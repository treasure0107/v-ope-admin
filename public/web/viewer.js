(function (n) { var i = {}; function r(e) { if (i[e]) { return i[e].exports } var t = i[e] = { i: e, l: false, exports: {} }; n[e].call(t.exports, t, t.exports, r); t.l = true; return t.exports } r.m = n; r.c = i; r.d = function (e, t, n) { if (!r.o(e, t)) { Object.defineProperty(e, t, { enumerable: true, get: n }) } }; r.r = function (e) { if (typeof Symbol !== "undefined" && Symbol.toStringTag) { Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }) } Object.defineProperty(e, "__esModule", { value: true }) }; r.t = function (t, e) { if (e & 1) t = r(t); if (e & 8) return t; if (e & 4 && typeof t === "object" && t && t.__esModule) return t; var n = Object.create(null); r.r(n); Object.defineProperty(n, "default", { enumerable: true, value: t }); if (e & 2 && typeof t != "string") for (var i in t) r.d(n, i, function (e) { return t[e] }.bind(null, i)); return n }; r.n = function (t) { var e = t && t.__esModule ? function e() { return t["default"] } : function e() { return t }; r.d(e, "a", e); return e }; r.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }; r.p = ""; return r(r.s = 0) })([function (e, t, n) { "use strict"; var i, r; { i = n(1); r = n(6) } { n(36) } { n(41) } function a() { return { appContainer: document.body, mainContainer: document.getElementById("viewerContainer"), viewerContainer: document.getElementById("viewer"), eventBus: null, toolbar: { container: document.getElementById("toolbarViewer"), numPages: document.getElementById("numPages"), pageNumber: document.getElementById("pageNumber"), scaleSelectContainer: document.getElementById("scaleSelectContainer"), scaleSelect: document.getElementById("scaleSelect"), customScaleOption: document.getElementById("customScaleOption"), previous: document.getElementById("previous"), next: document.getElementById("next"), zoomIn: document.getElementById("zoomIn"), zoomOut: document.getElementById("zoomOut"), viewFind: document.getElementById("viewFind"), openFile: document.getElementById("openFile"), print: document.getElementById("print"), presentationModeButton: document.getElementById("presentationMode"), download: document.getElementById("download"), viewBookmark: document.getElementById("viewBookmark") }, secondaryToolbar: { toolbar: document.getElementById("secondaryToolbar"), toggleButton: document.getElementById("secondaryToolbarToggle"), toolbarButtonContainer: document.getElementById("secondaryToolbarButtonContainer"), presentationModeButton: document.getElementById("secondaryPresentationMode"), openFileButton: document.getElementById("secondaryOpenFile"), printButton: document.getElementById("secondaryPrint"), downloadButton: document.getElementById("secondaryDownload"), viewBookmarkButton: document.getElementById("secondaryViewBookmark"), firstPageButton: document.getElementById("firstPage"), lastPageButton: document.getElementById("lastPage"), pageRotateCwButton: document.getElementById("pageRotateCw"), pageRotateCcwButton: document.getElementById("pageRotateCcw"), cursorSelectToolButton: document.getElementById("cursorSelectTool"), cursorHandToolButton: document.getElementById("cursorHandTool"), scrollVerticalButton: document.getElementById("scrollVertical"), scrollHorizontalButton: document.getElementById("scrollHorizontal"), scrollWrappedButton: document.getElementById("scrollWrapped"), spreadNoneButton: document.getElementById("spreadNone"), spreadOddButton: document.getElementById("spreadOdd"), spreadEvenButton: document.getElementById("spreadEven"), documentPropertiesButton: document.getElementById("documentProperties") }, fullscreen: { contextFirstPage: document.getElementById("contextFirstPage"), contextLastPage: document.getElementById("contextLastPage"), contextPageRotateCw: document.getElementById("contextPageRotateCw"), contextPageRotateCcw: document.getElementById("contextPageRotateCcw") }, sidebar: { outerContainer: document.getElementById("outerContainer"), viewerContainer: document.getElementById("viewerContainer"), toggleButton: document.getElementById("sidebarToggle"), thumbnailButton: document.getElementById("viewThumbnail"), outlineButton: document.getElementById("viewOutline"), attachmentsButton: document.getElementById("viewAttachments"), thumbnailView: document.getElementById("thumbnailView"), outlineView: document.getElementById("outlineView"), attachmentsView: document.getElementById("attachmentsView") }, sidebarResizer: { outerContainer: document.getElementById("outerContainer"), resizer: document.getElementById("sidebarResizer") }, findBar: { bar: document.getElementById("findbar"), toggleButton: document.getElementById("viewFind"), findField: document.getElementById("findInput"), highlightAllCheckbox: document.getElementById("findHighlightAll"), caseSensitiveCheckbox: document.getElementById("findMatchCase"), entireWordCheckbox: document.getElementById("findEntireWord"), findMsg: document.getElementById("findMsg"), findResultsCount: document.getElementById("findResultsCount"), findPreviousButton: document.getElementById("findPrevious"), findNextButton: document.getElementById("findNext") }, passwordOverlay: { overlayName: "passwordOverlay", container: document.getElementById("passwordOverlay"), label: document.getElementById("passwordText"), input: document.getElementById("password"), submitButton: document.getElementById("passwordSubmit"), cancelButton: document.getElementById("passwordCancel") }, documentProperties: { overlayName: "documentPropertiesOverlay", container: document.getElementById("documentPropertiesOverlay"), closeButton: document.getElementById("documentPropertiesClose"), fields: { fileName: document.getElementById("fileNameField"), fileSize: document.getElementById("fileSizeField"), title: document.getElementById("titleField"), author: document.getElementById("authorField"), subject: document.getElementById("subjectField"), keywords: document.getElementById("keywordsField"), creationDate: document.getElementById("creationDateField"), modificationDate: document.getElementById("modificationDateField"), creator: document.getElementById("creatorField"), producer: document.getElementById("producerField"), version: document.getElementById("versionField"), pageCount: document.getElementById("pageCountField"), pageSize: document.getElementById("pageSizeField"), linearized: document.getElementById("linearizedField") } }, errorWrapper: { container: document.getElementById("errorWrapper"), errorMessage: document.getElementById("errorMessage"), closeButton: document.getElementById("errorClose"), errorMoreInfo: document.getElementById("errorMoreInfo"), moreInfoButton: document.getElementById("errorShowMore"), lessInfoButton: document.getElementById("errorShowLess") }, printContainer: document.getElementById("printContainer"), openFileInputName: "fileInput", debuggerScriptPath: "./debugger.js" } } function o() { var e = a(); window.PDFViewerApplication = i.PDFViewerApplication; window.PDFViewerApplicationOptions = r.AppOptions; var t = document.createEvent("CustomEvent"); t.initCustomEvent("webviewerloaded", true, true, { source: window }); try { parent.document.dispatchEvent(t) } catch (e) { console.error("webviewerloaded: ".concat(e)); document.dispatchEvent(t) } i.PDFViewerApplication.run(e) } if (document.readyState === "interactive" || document.readyState === "complete") { o() } else { document.addEventListener("DOMContentLoaded", o, true) } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFPrintServiceFactory = t.DefaultExternalServices = t.PDFViewerApplication = void 0; var _ = i(n(2)); var P = n(5); var S = n(6); var m = n(8); var d = n(9); var f = n(11); var k = n(12); var h = n(13); var p = n(14); var v = n(15); var g = n(16); var y = n(17); var b = n(18); var w = n(20); var E = n(21); var L = n(22); var C = n(23); var x = n(24); var I = n(25); var T = n(27); var N = n(32); var M = n(34); var l = n(35); function i(e) { return e && e.__esModule ? e : { default: e } } function B(t, e) { var n; if (typeof Symbol === "undefined" || t[Symbol.iterator] == null) { if (Array.isArray(t) || (n = u(t)) || e && t && typeof t.length === "number") { if (n) t = n; var i = 0; var r = function e() { }; return { s: r, n: function e() { if (i >= t.length) return { done: true }; return { done: false, value: t[i++] } }, e: function e(t) { throw t }, f: r } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var a = true, o = false, s; return { s: function e() { n = t[Symbol.iterator]() }, n: function e() { var t = n.next(); a = t.done; return t }, e: function e(t) { o = true; s = t }, f: function e() { try { if (!a && n["return"] != null) n["return"]() } finally { if (o) throw s } } } } function O(e, t) { return s(e) || o(e, t) || u(e, t) || r() } function r() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function u(e, t) { if (!e) return; if (typeof e === "string") return a(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return a(e, t) } function a(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function o(e, t) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(e))) return; var n = []; var i = true; var r = false; var a = undefined; try { for (var o = e[Symbol.iterator](), s; !(i = (s = o.next()).done); i = true) { n.push(s.value); if (t && n.length === t) break } } catch (e) { r = true; a = e } finally { try { if (!i && o["return"] != null) o["return"]() } finally { if (r) throw a } } return n } function s(e) { if (Array.isArray(e)) return e } function c(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function A(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { c(i, t, n, r, a, "next", e) } function a(e) { c(i, t, n, r, a, "throw", e) } r(undefined) }) } } function R(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function D(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function V(e, t, n) { if (t) D(e.prototype, t); if (n) D(e, n); return e } var F = 1.1; var U = 5e3; var z = 1e4; var j = 1e3; var H = "enablePermissions"; var W = { UNKNOWN: -1, PREVIOUS: 0, INITIAL: 1 }; var q = function () { function e() { R(this, e); throw new Error("Cannot initialize DefaultExternalServices.") } V(e, null, [{ key: "updateFindControlState", value: function e(t) { } }, { key: "updateFindMatchesCount", value: function e(t) { } }, { key: "initPassiveLoading", value: function e(t) { } }, { key: "fallback", value: function e(t, n) { } }, { key: "reportTelemetry", value: function e(t) { } }, { key: "createDownloadManager", value: function e(t) { throw new Error("Not implemented: createDownloadManager") } }, { key: "createPreferences", value: function e() { throw new Error("Not implemented: createPreferences") } }, { key: "createL10n", value: function e(t) { throw new Error("Not implemented: createL10n") } }, { key: "supportsIntegratedFind", get: function e() { return (0, m.shadow)(this, "supportsIntegratedFind", false) } }, { key: "supportsDocumentFonts", get: function e() { return (0, m.shadow)(this, "supportsDocumentFonts", true) } }, { key: "supportedMouseWheelZoomModifierKeys", get: function e() { return (0, m.shadow)(this, "supportedMouseWheelZoomModifierKeys", { ctrlKey: true, metaKey: true }) } }, { key: "isInAutomation", get: function e() { return (0, m.shadow)(this, "isInAutomation", false) } }]); return e }(); t.DefaultExternalServices = q; var G = { initialBookmark: document.location.hash.substring(1), _initializedCapability: (0, m.createPromiseCapability)(), fellback: false, appConfig: null, pdfDocument: null, pdfLoadingTask: null, printService: null, pdfViewer: null, pdfThumbnailViewer: null, pdfRenderingQueue: null, pdfPresentationMode: null, pdfDocumentProperties: null, pdfLinkService: null, pdfHistory: null, pdfSidebar: null, pdfSidebarResizer: null, pdfOutlineViewer: null, pdfAttachmentViewer: null, pdfCursorTools: null, store: null, downloadManager: null, overlayManager: null, preferences: null, toolbar: null, secondaryToolbar: null, eventBus: null, l10n: null, isInitialViewSet: false, downloadComplete: false, isViewerEmbedded: window.parent !== window, url: "", baseUrl: "", externalServices: q, _boundEvents: {}, contentDispositionFilename: null, initialize: function e(i) { var r = this; return A(_["default"].mark(function e() { var n; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: r.preferences = r.externalServices.createPreferences(); r.appConfig = i; t.next = 4; return r._readPreferences(); case 4: t.next = 6; return r._parseHashParameters(); case 6: t.next = 8; return r._initializeL10n(); case 8: if (r.isViewerEmbedded && S.AppOptions.get("externalLinkTarget") === m.LinkTarget.NONE) { S.AppOptions.set("externalLinkTarget", m.LinkTarget.TOP) } t.next = 11; return r._initializeViewerComponents(); case 11: r.bindEvents(); r.bindWindowEvents(); n = i.appContainer || document.documentElement; r.l10n.translate(n).then(function () { r.eventBus.dispatch("localized", { source: r }) }); r._initializedCapability.resolve(); case 16: case "end": return t.stop() } } }, e) }))() }, _readPreferences: function e() { var r = this; return A(_["default"].mark(function e() { var n, i; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (!S.AppOptions.get("disablePreferences")) { t.next = 2; break } return t.abrupt("return"); case 2: t.prev = 2; t.next = 5; return r.preferences.getAll(); case 5: n = t.sent; for (i in n) { S.AppOptions.set(i, n[i]) } t.next = 12; break; case 9: t.prev = 9; t.t0 = t["catch"](2); console.error('_readPreferences: "'.concat(t.t0.message, '".')); case 12: case "end": return t.stop() } } }, e, null, [[2, 9]]) }))() }, _parseHashParameters: function e() { var s = this; return A(_["default"].mark(function e() { var n, i, r, a, o; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (S.AppOptions.get("pdfBugEnabled")) { t.next = 2; break } return t.abrupt("return", undefined); case 2: n = document.location.hash.substring(1); if (n) { t.next = 5; break } return t.abrupt("return", undefined); case 5: i = (0, P.parseQueryString)(n), r = []; if ("disableworker" in i && i.disableworker === "true") { r.push(Z()) } if ("disablerange" in i) { S.AppOptions.set("disableRange", i.disablerange === "true") } if ("disablestream" in i) { S.AppOptions.set("disableStream", i.disablestream === "true") } if ("disableautofetch" in i) { S.AppOptions.set("disableAutoFetch", i.disableautofetch === "true") } if ("disablefontface" in i) { S.AppOptions.set("disableFontFace", i.disablefontface === "true") } if ("disablehistory" in i) { S.AppOptions.set("disableHistory", i.disablehistory === "true") } if ("webgl" in i) { S.AppOptions.set("enableWebGL", i.webgl === "true") } if ("verbosity" in i) { S.AppOptions.set("verbosity", i.verbosity | 0) } if (!("textlayer" in i)) { t.next = 23; break } t.t0 = i.textlayer; t.next = t.t0 === "off" ? 18 : t.t0 === "visible" ? 20 : t.t0 === "shadow" ? 20 : t.t0 === "hover" ? 20 : 23; break; case 18: S.AppOptions.set("textLayerMode", P.TextLayerMode.DISABLE); return t.abrupt("break", 23); case 20: a = s.appConfig.viewerContainer; a.classList.add("textLayer-" + i.textlayer); return t.abrupt("break", 23); case 23: if ("pdfbug" in i) { S.AppOptions.set("pdfBug", true); S.AppOptions.set("fontExtraProperties", true); o = i.pdfbug.split(","); r.push(Y(o)) } if ("locale" in i) { S.AppOptions.set("locale", i.locale) } return t.abrupt("return", Promise.all(r)["catch"](function (e) { console.error('_parseHashParameters: "'.concat(e.message, '".')) })); case 26: case "end": return t.stop() } } }, e) }))() }, _initializeL10n: function e() { var i = this; return A(_["default"].mark(function e() { var n; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: i.l10n = i.externalServices.createL10n({ locale: S.AppOptions.get("locale") }); t.next = 3; return i.l10n.getDirection(); case 3: n = t.sent; document.getElementsByTagName("html")[0].dir = n; case 5: case "end": return t.stop() } } }, e) }))() }, _initializeViewerComponents: function e() { var c = this; return A(_["default"].mark(function e() { var n, i, r, a, o, s, u, l; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: n = c.appConfig; i = n.eventBus || new P.EventBus({ isInAutomation: c.externalServices.isInAutomation }); c.eventBus = i; c.overlayManager = new h.OverlayManager; r = new f.PDFRenderingQueue; r.onIdle = c.cleanup.bind(c); c.pdfRenderingQueue = r; a = new E.PDFLinkService({ eventBus: i, externalLinkTarget: S.AppOptions.get("externalLinkTarget"), externalLinkRel: S.AppOptions.get("externalLinkRel"), ignoreDestinationZoom: S.AppOptions.get("ignoreDestinationZoom") }); c.pdfLinkService = a; o = c.externalServices.createDownloadManager({ disableCreateObjectURL: S.AppOptions.get("disableCreateObjectURL") }); c.downloadManager = o; s = new b.PDFFindController({ linkService: a, eventBus: i }); c.findController = s; u = n.mainContainer; l = n.viewerContainer; c.pdfViewer = new T.PDFViewer({ container: u, viewer: l, eventBus: i, renderingQueue: r, linkService: a, downloadManager: o, findController: s, renderer: S.AppOptions.get("renderer"), enableWebGL: S.AppOptions.get("enableWebGL"), l10n: c.l10n, textLayerMode: S.AppOptions.get("textLayerMode"), imageResourcesPath: S.AppOptions.get("imageResourcesPath"), renderInteractiveForms: S.AppOptions.get("renderInteractiveForms"), enablePrintAutoRotate: S.AppOptions.get("enablePrintAutoRotate"), useOnlyCssZoom: S.AppOptions.get("useOnlyCssZoom"), maxCanvasPixels: S.AppOptions.get("maxCanvasPixels") }); r.setViewer(c.pdfViewer); a.setViewer(c.pdfViewer); c.pdfThumbnailViewer = new I.PDFThumbnailViewer({ container: n.sidebar.thumbnailView, renderingQueue: r, linkService: a, l10n: c.l10n }); r.setThumbnailViewer(c.pdfThumbnailViewer); c.pdfHistory = new w.PDFHistory({ linkService: a, eventBus: i }); a.setHistory(c.pdfHistory); if (!c.supportsIntegratedFind) { c.findBar = new y.PDFFindBar(n.findBar, i, c.l10n) } c.pdfDocumentProperties = new g.PDFDocumentProperties(n.documentProperties, c.overlayManager, i, c.l10n); c.pdfCursorTools = new d.PDFCursorTools({ container: u, eventBus: i, cursorToolOnLoad: S.AppOptions.get("cursorToolOnLoad") }); c.toolbar = new M.Toolbar(n.toolbar, i, c.l10n); c.secondaryToolbar = new N.SecondaryToolbar(n.secondaryToolbar, u, i); if (c.supportsFullscreen) { c.pdfPresentationMode = new C.PDFPresentationMode({ container: u, pdfViewer: c.pdfViewer, eventBus: i, contextMenuItems: n.fullscreen }) } c.passwordPrompt = new p.PasswordPrompt(n.passwordOverlay, c.overlayManager, c.l10n); c.pdfOutlineViewer = new L.PDFOutlineViewer({ container: n.sidebar.outlineView, eventBus: i, linkService: a }); c.pdfAttachmentViewer = new v.PDFAttachmentViewer({ container: n.sidebar.attachmentsView, eventBus: i, downloadManager: o }); c.pdfSidebar = new k.PDFSidebar({ elements: n.sidebar, pdfViewer: c.pdfViewer, pdfThumbnailViewer: c.pdfThumbnailViewer, eventBus: i, l10n: c.l10n }); c.pdfSidebar.onToggled = c.forceRendering.bind(c); c.pdfSidebarResizer = new x.PDFSidebarResizer(n.sidebarResizer, i, c.l10n); case 34: case "end": return t.stop() } } }, e) }))() }, run: function e(t) { this.initialize(t).then($) }, get initialized() { return this._initializedCapability.settled }, get initializedPromise() { return this._initializedCapability.promise }, zoomIn: function e(t) { if (this.pdfViewer.isInPresentationMode) { return } var n = this.pdfViewer.currentScale; do { n = (n * F).toFixed(2); n = Math.ceil(n * 10) / 10; n = Math.min(P.MAX_SCALE, n) } while (--t > 0 && n < P.MAX_SCALE); this.pdfViewer.currentScaleValue = n }, zoomOut: function e(t) { if (this.pdfViewer.isInPresentationMode) { return } var n = this.pdfViewer.currentScale; do { n = (n / F).toFixed(2); n = Math.floor(n * 10) / 10; n = Math.max(P.MIN_SCALE, n) } while (--t > 0 && n > P.MIN_SCALE); this.pdfViewer.currentScaleValue = n }, zoomReset: function e() { if (this.pdfViewer.isInPresentationMode) { return } this.pdfViewer.currentScaleValue = P.DEFAULT_SCALE_VALUE }, get pagesCount() { return this.pdfDocument ? this.pdfDocument.numPages : 0 }, get page() { return this.pdfViewer.currentPageNumber }, set page(e) { this.pdfViewer.currentPageNumber = e }, get printing() { return !!this.printService }, get supportsPrinting() { return qe.instance.supportsPrinting }, get supportsFullscreen() { var e; var t = document.documentElement; e = !!(t.requestFullscreen || t.mozRequestFullScreen || t.webkitRequestFullScreen || t.msRequestFullscreen); if (document.fullscreenEnabled === false || document.mozFullScreenEnabled === false || document.webkitFullscreenEnabled === false || document.msFullscreenEnabled === false) { e = false } return (0, m.shadow)(this, "supportsFullscreen", e) }, get supportsIntegratedFind() { return this.externalServices.supportsIntegratedFind }, get supportsDocumentFonts() { return this.externalServices.supportsDocumentFonts }, get loadingBar() { var e = new P.ProgressBar("#loadingBar"); return (0, m.shadow)(this, "loadingBar", e) }, get supportedMouseWheelZoomModifierKeys() { return this.externalServices.supportedMouseWheelZoomModifierKeys }, initPassiveLoading: function e() { throw new Error("Not implemented: initPassiveLoading") }, setTitleUsingUrl: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ""; this.url = t; this.baseUrl = t.split("#")[0]; var n = (0, P.getPDFFileNameFromURL)(t, ""); if (!n) { try { n = decodeURIComponent((0, m.getFilenameFromUrl)(t)) || t } catch (e) { n = t } } this.setTitle(n) }, setTitle: function e(t) { if (this.isViewerEmbedded) { return } document.title = t }, close: function e() { var r = this; return A(_["default"].mark(function e() { var n, i; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: n = r.appConfig.errorWrapper.container; n.setAttribute("hidden", "true"); if (r.pdfLoadingTask) { t.next = 4; break } return t.abrupt("return", undefined); case 4: i = r.pdfLoadingTask.destroy(); r.pdfLoadingTask = null; if (r.pdfDocument) { r.pdfDocument = null; r.pdfThumbnailViewer.setDocument(null); r.pdfViewer.setDocument(null); r.pdfLinkService.setDocument(null); r.pdfDocumentProperties.setDocument(null) } ee(); r.store = null; r.isInitialViewSet = false; r.downloadComplete = false; r.url = ""; r.baseUrl = ""; r.contentDispositionFilename = null; r.pdfSidebar.reset(); r.pdfOutlineViewer.reset(); r.pdfAttachmentViewer.reset(); if (r.pdfHistory) { r.pdfHistory.reset() } if (r.findBar) { r.findBar.reset() } r.toolbar.reset(); r.secondaryToolbar.reset(); if (typeof PDFBug !== "undefined") { PDFBug.cleanup() } return t.abrupt("return", i); case 23: case "end": return t.stop() } } }, e) }))() }, open: function e(f, d) { var h = this; return A(_["default"].mark(function e() { var n, i, r, a, o, s, u, l, c; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (!h.pdfLoadingTask) { t.next = 3; break } t.next = 3; return h.close(); case 3: n = S.AppOptions.getAll(S.OptionKind.WORKER); for (i in n) { m.GlobalWorkerOptions[i] = n[i] } r = Object.create(null); if (typeof f === "string") { h.setTitleUsingUrl(f); r.url = f } else if (f && "byteLength" in f) { r.data = f } else if (f.url && f.originalUrl) { h.setTitleUsingUrl(f.originalUrl); r.url = f.url } a = S.AppOptions.getAll(S.OptionKind.API); for (o in a) { s = a[o]; if (o === "docBaseUrl" && !s) { } r[o] = s } if (d) { for (u in d) { l = d[u]; if (u === "length") { h.pdfDocumentProperties.setFileSize(l) } r[u] = l } } c = (0, m.getDocument)(r); h.pdfLoadingTask = c; c.onPassword = function (e, t) { h.pdfLinkService.externalLinkEnabled = false; h.passwordPrompt.setUpdateCallback(e, t); h.passwordPrompt.open() }; c.onProgress = function (e) { var t = e.loaded, n = e.total; h.progress(t / n) }; c.onUnsupportedFeature = h.fallback.bind(h); return t.abrupt("return", c.promise.then(function (e) { h.load(e) }, function (t) { if (c !== h.pdfLoadingTask) { return undefined } var n = t && t.message; var e; if (t instanceof m.InvalidPDFException) { e = h.l10n.get("invalid_file_error", null, "Invalid or corrupted PDF file.") } else if (t instanceof m.MissingPDFException) { e = h.l10n.get("missing_file_error", null, "Missing PDF file.") } else if (t instanceof m.UnexpectedResponseException) { e = h.l10n.get("unexpected_response_error", null, "Unexpected server response.") } else { e = h.l10n.get("loading_error", null, "An error occurred while loading the PDF.") } return e.then(function (e) { h.error(e, { message: n }); throw t }) })); case 16: case "end": return t.stop() } } }, e) }))() }, download: function e() { var t = this; function n() { a.downloadUrl(i, r) } var i = this.baseUrl; var r = this.contentDispositionFilename || (0, P.getPDFFileNameFromURL)(this.url); var a = this.downloadManager; a.onerror = function (e) { t.error("PDF failed to download: ".concat(e)) }; if (!this.pdfDocument || !this.downloadComplete) { n(); return } this.pdfDocument.getData().then(function (e) { var t = new Blob([e], { type: "application/pdf" }); a.download(t, i, r) })["catch"](n) }, fallback: function e(t) { if (this.fellback) { return } this.fellback = true; this.externalServices.fallback({ featureId: t, url: this.baseUrl }, function e(t) { if (!t) { return } G.download() }) }, error: function e(t, n) { var i = [this.l10n.get("error_version_info", { version: m.version || "?", build: m.build || "?" }, "PDF.js v{{version}} (build: {{build}})")]; if (n) { i.push(this.l10n.get("error_message", { message: n.message }, "Message: {{message}}")); if (n.stack) { i.push(this.l10n.get("error_stack", { stack: n.stack }, "Stack: {{stack}}")) } else { if (n.filename) { i.push(this.l10n.get("error_file", { file: n.filename }, "File: {{file}}")) } if (n.lineNumber) { i.push(this.l10n.get("error_line", { line: n.lineNumber }, "Line: {{line}}")) } } } var r = this.appConfig.errorWrapper; var a = r.container; a.removeAttribute("hidden"); var o = r.errorMessage; o.textContent = t; var s = r.closeButton; s.onclick = function () { a.setAttribute("hidden", "true") }; var u = r.errorMoreInfo; var l = r.moreInfoButton; var c = r.lessInfoButton; l.onclick = function () { u.removeAttribute("hidden"); l.setAttribute("hidden", "true"); c.removeAttribute("hidden"); u.style.height = u.scrollHeight + "px" }; c.onclick = function () { u.setAttribute("hidden", "true"); l.removeAttribute("hidden"); c.setAttribute("hidden", "true") }; l.oncontextmenu = P.noContextMenuHandler; c.oncontextmenu = P.noContextMenuHandler; s.oncontextmenu = P.noContextMenuHandler; l.removeAttribute("hidden"); c.setAttribute("hidden", "true"); Promise.all(i).then(function (e) { u.value = e.join("\n") }) }, progress: function e(t) { var n = this; if (this.downloadComplete) { return } var i = Math.round(t * 100); if (i > this.loadingBar.percent || isNaN(i)) { this.loadingBar.percent = i; var r = this.pdfDocument ? this.pdfDocument.loadingParams.disableAutoFetch : S.AppOptions.get("disableAutoFetch"); if (r && i) { if (this.disableAutoFetchLoadingBarTimeout) { clearTimeout(this.disableAutoFetchLoadingBarTimeout); this.disableAutoFetchLoadingBarTimeout = null } this.loadingBar.show(); this.disableAutoFetchLoadingBarTimeout = setTimeout(function () { n.loadingBar.hide(); n.disableAutoFetchLoadingBarTimeout = null }, U) } } }, load: function e(m) { var y = this; this.pdfDocument = m; m.getDownloadInfo().then(function () { y.downloadComplete = true; y.loadingBar.hide(); a.then(function () { y.eventBus.dispatch("documentloaded", { source: y }) }) }); var t = m.getPageLayout()["catch"](function () { }); var n = m.getPageMode()["catch"](function () { }); var i = m.getOpenAction()["catch"](function () { }); this.toolbar.setPagesCount(m.numPages, false); this.secondaryToolbar.setPagesCount(m.numPages); var r; r = null; this.pdfLinkService.setDocument(m, r); this.pdfDocumentProperties.setDocument(m, this.url); var b = this.pdfViewer; b.setDocument(m); var a = b.firstPagePromise, o = b.onePageRendered, w = b.pagesPromise; var s = this.pdfThumbnailViewer; s.setDocument(m); var u = (this.store = new l.ViewHistory(m.fingerprint)).getMultiple({ page: null, zoom: P.DEFAULT_SCALE_VALUE, scrollLeft: "0", scrollTop: "0", rotation: null, sidebarView: k.SidebarView.UNKNOWN, scrollMode: P.ScrollMode.UNKNOWN, spreadMode: P.SpreadMode.UNKNOWN })["catch"](function () { return Object.create(null) }); a.then(function (e) { y.loadingBar.setWidth(y.appConfig.viewerContainer); Promise.all([P.animationStarted, u, t, n, i]).then(function () { var t = A(_["default"].mark(function e(n) { var i, r, a, o, s, u, l, c, f, d, h, p, v, g; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: i = O(n, 5), r = i[0], a = i[1], o = i[2], s = i[3], u = i[4]; l = S.AppOptions.get("viewOnLoad"); y._initializePdfHistory({ fingerprint: m.fingerprint, viewOnLoad: l, initialDest: u && u.dest }); c = y.initialBookmark; f = S.AppOptions.get("defaultZoomValue"); d = f ? "zoom=".concat(f) : null; h = null; p = S.AppOptions.get("sidebarViewOnLoad"); v = S.AppOptions.get("scrollModeOnLoad"); g = S.AppOptions.get("spreadModeOnLoad"); if (a.page && l !== W.INITIAL) { d = "page=".concat(a.page, "&zoom=").concat(f || a.zoom, ",") + "".concat(a.scrollLeft, ",").concat(a.scrollTop); h = parseInt(a.rotation, 10); if (p === k.SidebarView.UNKNOWN) { p = a.sidebarView | 0 } if (v === P.ScrollMode.UNKNOWN) { v = a.scrollMode | 0 } if (g === P.SpreadMode.UNKNOWN) { g = a.spreadMode | 0 } } if (s && p === k.SidebarView.UNKNOWN) { p = We(s) } if (o && g === P.SpreadMode.UNKNOWN) { g = He(o) } y.setInitialView(d, { rotation: h, sidebarView: p, scrollMode: v, spreadMode: g }); y.eventBus.dispatch("documentinit", { source: y }); if (!y.isViewerEmbedded) { b.focus() } y._initializePermissions(m); t.next = 19; return Promise.race([w, new Promise(function (e) { setTimeout(e, z) })]); case 19: if (!(!c && !d)) { t.next = 21; break } return t.abrupt("return"); case 21: if (!b.hasEqualPageSizes) { t.next = 23; break } return t.abrupt("return"); case 23: y.initialBookmark = c; b.currentScaleValue = b.currentScaleValue; y.setInitialView(d); case 26: case "end": return t.stop() } } }, e) })); return function (e) { return t.apply(this, arguments) } }())["catch"](function () { y.setInitialView() }).then(function () { b.update() }) }); w.then(function () { y._initializeAutoPrint(m, i) }); o.then(function () { m.getOutline().then(function (e) { y.pdfOutlineViewer.render({ outline: e }) }); m.getAttachments().then(function (e) { y.pdfAttachmentViewer.render({ attachments: e }) }) }); this._initializePageLabels(m); this._initializeMetadata(m) }, _initializeAutoPrint: function e(c, f) { var d = this; return A(_["default"].mark(function e() { var n, i, r, a, o, s, u, l; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return Promise.all([f, c.getJavaScript()]); case 2: n = t.sent; i = O(n, 2); r = i[0]; a = i[1]; if (!(c !== d.pdfDocument)) { t.next = 8; break } return t.abrupt("return"); case 8: o = false; if (r && r.action === "Print") { o = true } if (!a) { t.next = 31; break } a.some(function (e) { if (!e) { return false } console.warn("Warning: JavaScript is not supported"); d.fallback(m.UNSUPPORTED_FEATURES.javaScript); return true }); if (o) { t.next = 31; break } s = B(a); t.prev = 14; s.s(); case 16: if ((u = s.n()).done) { t.next = 23; break } l = u.value; if (!(l && P.AutoPrintRegExp.test(l))) { t.next = 21; break } o = true; return t.abrupt("break", 23); case 21: t.next = 16; break; case 23: t.next = 28; break; case 25: t.prev = 25; t.t0 = t["catch"](14); s.e(t.t0); case 28: t.prev = 28; s.f(); return t.finish(28); case 31: if (d.supportsPrinting) { t.next = 33; break } return t.abrupt("return"); case 33: if (o) { setTimeout(function () { window.print() }) } case 34: case "end": return t.stop() } } }, e, null, [[14, 25, 28, 31]]) }))() }, _initializeMetadata: function e(v) { var g = this; return A(_["default"].mark(function e() { var n, i, r, a, o, s, u, l, c, f, d, h, p; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return v.getMetadata(); case 2: n = t.sent; i = n.info; r = n.metadata; a = n.contentDispositionFilename; if (!(v !== g.pdfDocument)) { t.next = 8; break } return t.abrupt("return"); case 8: g.documentInfo = i; g.metadata = r; g.contentDispositionFilename = a; s = i && i.Title; if (s) { o = s } u = r && r.get("dc:title"); if (u) { if (u !== "Untitled" && !/[\uFFF0-\uFFFF]/g.test(u)) { o = u } } if (o) { g.setTitle("".concat(o, " - ").concat(a || document.title)) } else if (a) { g.setTitle(a) } if (i.IsAcroFormPresent) { console.warn("Warning: AcroForm/XFA is not supported"); g.fallback(m.UNSUPPORTED_FEATURES.forms) } l = "other"; c = ["1.0", "1.1", "1.2", "1.3", "1.4", "1.5", "1.6", "1.7", "1.8", "1.9", "2.0", "2.1", "2.2", "2.3"]; if (c.includes(i.PDFFormatVersion)) { l = "v".concat(i.PDFFormatVersion.replace(".", "_")) } f = "other"; d = ["acrobat distiller", "acrobat pdfwriter", "adobe livecycle", "adobe pdf library", "adobe photoshop", "ghostscript", "tcpdf", "cairo", "dvipdfm", "dvips", "pdftex", "pdfkit", "itext", "prince", "quarkxpress", "mac os x", "microsoft", "openoffice", "oracle", "luradocument", "pdf-xchange", "antenna house", "aspose.cells", "fpdf"]; if (i.Producer) { h = i.Producer.toLowerCase(); d.some(function (e) { if (!h.includes(e)) { return false } f = e.replace(/[ .\-]/g, "_"); return true }) } p = null; if (i.IsAcroFormPresent) { p = i.IsXFAPresent ? "xfa" : "acroform" } g.externalServices.reportTelemetry({ type: "documentInfo", version: l, generator: f, formType: p }); case 27: case "end": return t.stop() } } }, e) }))() }, _initializePageLabels: function e(u) { var l = this; return A(_["default"].mark(function e() { var n, i, r, a, o, s; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return u.getPageLabels(); case 2: n = t.sent; if (!(u !== l.pdfDocument)) { t.next = 5; break } return t.abrupt("return"); case 5: if (!(!n || S.AppOptions.get("disablePageLabels"))) { t.next = 7; break } return t.abrupt("return"); case 7: i = n.length; if (!(i !== l.pagesCount)) { t.next = 11; break } console.error("The number of Page Labels does not match the number of pages in the document."); return t.abrupt("return"); case 11: r = 0; while (r < i && n[r] === (r + 1).toString()) { r++ } if (!(r === i)) { t.next = 15; break } return t.abrupt("return"); case 15: a = l.pdfViewer, o = l.pdfThumbnailViewer, s = l.toolbar; a.setPageLabels(n); o.setPageLabels(n); s.setPagesCount(i, true); s.setPageNumber(a.currentPageNumber, a.currentPageLabel); case 20: case "end": return t.stop() } } }, e) }))() }, _initializePdfHistory: function e(t) { var n = t.fingerprint, i = t.viewOnLoad, r = t.initialDest, a = r === void 0 ? null : r; if (this.isViewerEmbedded || S.AppOptions.get("disableHistory")) { return } this.pdfHistory.initialize({ fingerprint: n, resetHistory: i === W.INITIAL, updateUrl: S.AppOptions.get("historyUpdateUrl") }); if (this.pdfHistory.initialBookmark) { this.initialBookmark = this.pdfHistory.initialBookmark; this.initialRotation = this.pdfHistory.initialRotation } if (a && !this.initialBookmark && i === W.UNKNOWN) { this.initialBookmark = JSON.stringify(a); this.pdfHistory.push({ explicitDest: a, pageNumber: null }) } }, _initializePermissions: function e(i) { var r = this; return A(_["default"].mark(function e() { var n; return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return i.getPermissions(); case 2: n = t.sent; if (!(i !== r.pdfDocument)) { t.next = 5; break } return t.abrupt("return"); case 5: if (!(!n || !S.AppOptions.get("enablePermissions"))) { t.next = 7; break } return t.abrupt("return"); case 7: if (!n.includes(m.PermissionFlag.COPY)) { r.appConfig.viewerContainer.classList.add(H) } case 8: case "end": return t.stop() } } }, e) }))() }, setInitialView: function e(t) { var i = this; var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}, r = n.rotation, a = n.sidebarView, o = n.scrollMode, s = n.spreadMode; var u = function e(t) { if ((0, P.isValidRotation)(t)) { i.pdfViewer.pagesRotation = t } }; var l = function e(t, n) { if ((0, P.isValidScrollMode)(t)) { i.pdfViewer.scrollMode = t } if ((0, P.isValidSpreadMode)(n)) { i.pdfViewer.spreadMode = n } }; this.isInitialViewSet = true; this.pdfSidebar.setInitialView(a); l(o, s); if (this.initialBookmark) { u(this.initialRotation); delete this.initialRotation; this.pdfLinkService.setHash(this.initialBookmark); this.initialBookmark = null } else if (t) { u(r); this.pdfLinkService.setHash(t) } this.toolbar.setPageNumber(this.pdfViewer.currentPageNumber, this.pdfViewer.currentPageLabel); this.secondaryToolbar.setPageNumber(this.pdfViewer.currentPageNumber); if (!this.pdfViewer.currentScaleValue) { this.pdfViewer.currentScaleValue = P.DEFAULT_SCALE_VALUE } }, cleanup: function e() { if (!this.pdfDocument) { return } this.pdfViewer.cleanup(); this.pdfThumbnailViewer.cleanup(); if (this.pdfViewer.renderer !== P.RendererType.SVG) { this.pdfDocument.cleanup() } }, forceRendering: function e() { this.pdfRenderingQueue.printing = this.printing; this.pdfRenderingQueue.isThumbnailViewEnabled = this.pdfSidebar.isThumbnailViewVisible; this.pdfRenderingQueue.renderHighestPriority() }, beforePrint: function e() { var t = this; if (this.printService) { return } if (!this.supportsPrinting) { this.l10n.get("printing_not_supported", null, "Warning: Printing is not fully supported by this browser.").then(function (e) { t.error(e) }); return } if (!this.pdfViewer.pageViewsReady) { this.l10n.get("printing_not_ready", null, "Warning: The PDF is not fully loaded for printing.").then(function (e) { window.alert(e) }); return } var n = this.pdfViewer.getPagesOverview(); var i = this.appConfig.printContainer; var r = qe.instance.createPrintService(this.pdfDocument, n, i, this.l10n); this.printService = r; this.forceRendering(); r.layout(); this.externalServices.reportTelemetry({ type: "print" }) }, afterPrint: function e() { if (this.printService) { this.printService.destroy(); this.printService = null } this.forceRendering() }, rotatePages: function e(t) { if (!this.pdfDocument) { return } var n = (this.pdfViewer.pagesRotation + 360 + t) % 360; this.pdfViewer.pagesRotation = n }, requestPresentationMode: function e() { if (!this.pdfPresentationMode) { return } this.pdfPresentationMode.request() }, bindEvents: function e() { var t = this.eventBus, n = this._boundEvents; n.beforePrint = this.beforePrint.bind(this); n.afterPrint = this.afterPrint.bind(this); t._on("resize", le); t._on("hashchange", ce); t._on("beforeprint", n.beforePrint); t._on("afterprint", n.afterPrint); t._on("pagerendered", te); t._on("updateviewarea", oe); t._on("pagechanging", Re); t._on("scalechanging", Oe); t._on("rotationchanging", Ae); t._on("sidebarviewchanged", ae); t._on("pagemode", ne); t._on("namedaction", ie); t._on("presentationmodechanged", re); t._on("presentationmode", he); t._on("print", pe); t._on("download", ve); t._on("firstpage", ge); t._on("lastpage", me); t._on("nextpage", ye); t._on("previouspage", be); t._on("zoomin", we); t._on("zoomout", _e); t._on("zoomreset", Pe); t._on("pagenumberchanged", Se); t._on("scalechanged", ke); t._on("rotatecw", Ee); t._on("rotateccw", Le); t._on("switchscrollmode", Ce); t._on("scrollmodechanged", se); t._on("switchspreadmode", xe); t._on("spreadmodechanged", ue); t._on("documentproperties", Ie); t._on("find", Te); t._on("findfromurlhash", Ne); t._on("updatefindmatchescount", Me); t._on("updatefindcontrolstate", Be); t._on("fileinputchange", fe); t._on("openfile", de) }, bindWindowEvents: function e() { var t = this.eventBus, n = this._boundEvents; n.windowResize = function () { t.dispatch("resize", { source: window }) }; n.windowHashChange = function () { t.dispatch("hashchange", { source: window, hash: document.location.hash.substring(1) }) }; n.windowBeforePrint = function () { t.dispatch("beforeprint", { source: window }) }; n.windowAfterPrint = function () { t.dispatch("afterprint", { source: window }) }; window.addEventListener("visibilitychange", De); window.addEventListener("wheel", Ue, { passive: false }); window.addEventListener("click", ze); window.addEventListener("keydown", je); window.addEventListener("resize", n.windowResize); window.addEventListener("hashchange", n.windowHashChange); window.addEventListener("beforeprint", n.windowBeforePrint); window.addEventListener("afterprint", n.windowAfterPrint) }, unbindEvents: function e() { var t = this.eventBus, n = this._boundEvents; t._off("resize", le); t._off("hashchange", ce); t._off("beforeprint", n.beforePrint); t._off("afterprint", n.afterPrint); t._off("pagerendered", te); t._off("updateviewarea", oe); t._off("pagechanging", Re); t._off("scalechanging", Oe); t._off("rotationchanging", Ae); t._off("sidebarviewchanged", ae); t._off("pagemode", ne); t._off("namedaction", ie); t._off("presentationmodechanged", re); t._off("presentationmode", he); t._off("print", pe); t._off("download", ve); t._off("firstpage", ge); t._off("lastpage", me); t._off("nextpage", ye); t._off("previouspage", be); t._off("zoomin", we); t._off("zoomout", _e); t._off("zoomreset", Pe); t._off("pagenumberchanged", Se); t._off("scalechanged", ke); t._off("rotatecw", Ee); t._off("rotateccw", Le); t._off("switchscrollmode", Ce); t._off("scrollmodechanged", se); t._off("switchspreadmode", xe); t._off("spreadmodechanged", ue); t._off("documentproperties", Ie); t._off("find", Te); t._off("findfromurlhash", Ne); t._off("updatefindmatchescount", Me); t._off("updatefindcontrolstate", Be); t._off("fileinputchange", fe); t._off("openfile", de); n.beforePrint = null; n.afterPrint = null }, unbindWindowEvents: function e() { var t = this._boundEvents; window.removeEventListener("visibilitychange", De); window.removeEventListener("wheel", Ue, { passive: false }); window.removeEventListener("click", ze); window.removeEventListener("keydown", je); window.removeEventListener("resize", t.windowResize); window.removeEventListener("hashchange", t.windowHashChange); window.removeEventListener("beforeprint", t.windowBeforePrint); window.removeEventListener("afterprint", t.windowAfterPrint); t.windowResize = null; t.windowHashChange = null; t.windowBeforePrint = null; t.windowAfterPrint = null } }; t.PDFViewerApplication = G; var K; { var Q = ["null", "http://mozilla.github.io", "https://mozilla.github.io"]; K = function e(t) { if (t === undefined) { return } try { var n = new URL(window.location.href).origin || "null"; if (Q.includes(n)) { return } var i = new URL(t, window.location.href), r = i.origin, a = i.protocol; if (r !== n && a !== "blob:") { } } catch (e) { var o = e && e.message; G.l10n.get("loading_error", null, "An error occurred while loading the PDF.").then(function (e) { G.error(e, { message: o }) }); throw e } } } function Z() { return X.apply(this, arguments) } function X() { X = A(_["default"].mark(function e() { return _["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (!m.GlobalWorkerOptions.workerSrc) { m.GlobalWorkerOptions.workerSrc = S.AppOptions.get("workerSrc") } return t.abrupt("return", (0, m.loadScript)(m.PDFWorker.getWorkerSrc())); case 2: case "end": return t.stop() } } }, e) })); return X.apply(this, arguments) } function Y(e) { var t = G.appConfig; return (0, m.loadScript)(t.debuggerScriptPath).then(function () { PDFBug.enable(e); PDFBug.init({ OPS: m.OPS }, t.mainContainer) }) } function $() { var e = G.appConfig; var t; var n = document.location.search.substring(1); var i = (0, P.parseQueryString)(n); t = "file" in i ? i.file : S.AppOptions.get("defaultUrl"); K(t); var r = document.createElement("input"); r.id = e.openFileInputName; r.className = "fileInput"; r.setAttribute("type", "file"); r.oncontextmenu = P.noContextMenuHandler; document.body.appendChild(r); if (!window.File || !window.FileReader || !window.FileList || !window.Blob) { e.toolbar.openFile.setAttribute("hidden", "true"); e.secondaryToolbar.openFileButton.setAttribute("hidden", "true") } else { r.value = null } r.addEventListener("change", function (e) { var t = e.target.files; if (!t || t.length === 0) { return } G.eventBus.dispatch("fileinputchange", { source: this, fileInput: e.target }) }); e.mainContainer.addEventListener("dragover", function (e) { e.preventDefault(); e.dataTransfer.dropEffect = "move" }); e.mainContainer.addEventListener("drop", function (e) { e.preventDefault(); var t = e.dataTransfer.files; if (!t || t.length === 0) { return } G.eventBus.dispatch("fileinputchange", { source: this, fileInput: e.dataTransfer }) }); if (!G.supportsDocumentFonts) { S.AppOptions.set("disableFontFace", true); G.l10n.get("web_fonts_disabled", null, "Web fonts are disabled: unable to use embedded PDF fonts.").then(function (e) { console.warn(e) }) } if (!G.supportsPrinting) { e.toolbar.print.classList.add("hidden"); e.secondaryToolbar.printButton.classList.add("hidden") } if (!G.supportsFullscreen) { e.toolbar.presentationModeButton.classList.add("hidden"); e.secondaryToolbar.presentationModeButton.classList.add("hidden") } if (G.supportsIntegratedFind) { e.toolbar.viewFind.classList.add("hidden") } e.mainContainer.addEventListener("transitionend", function (e) { if (e.target === this) { G.eventBus.dispatch("resize", { source: this }) } }, true); try { J(t) } catch (t) { G.l10n.get("loading_error", null, "An error occurred while loading the PDF.").then(function (e) { G.error(e, t) }) } } var J; { J = function e(t) { if (t && t.lastIndexOf("file:", 0) === 0) { G.setTitleUsingUrl(t); var n = new XMLHttpRequest; n.onload = function () { G.open(new Uint8Array(n.response)) }; n.open("GET", t); n.responseType = "arraybuffer"; n.send(); return } if (t) { G.open(t) } } } function ee() { var e = G.appConfig; if (!e) { return } e.viewerContainer.classList.remove(H) } function te(e) { var t = e.pageNumber; var n = t - 1; var i = G.pdfViewer.getPageView(n); if (t === G.page) { G.toolbar.updateLoadingIndicatorState(false) } if (!i) { return } if (G.pdfSidebar.isThumbnailViewVisible) { var r = G.pdfThumbnailViewer.getThumbnail(n); r.setImage(i) } if (typeof Stats !== "undefined" && Stats.enabled && i.stats) { Stats.add(t, i.stats) } if (i.error) { G.l10n.get("rendering_error", null, "An error occurred while rendering the page.").then(function (e) { G.error(e, i.error) }) } G.externalServices.reportTelemetry({ type: "pageInfo", timestamp: e.timestamp }); G.pdfDocument.getStats().then(function (e) { G.externalServices.reportTelemetry({ type: "documentStats", stats: e }) }) } function ne(e) { var t = e.mode; var n; switch (t) { case "thumbs": n = k.SidebarView.THUMBS; break; case "bookmarks": case "outline": n = k.SidebarView.OUTLINE; break; case "attachments": n = k.SidebarView.ATTACHMENTS; break; case "none": n = k.SidebarView.NONE; break; default: console.error('Invalid "pagemode" hash parameter: ' + t); return }G.pdfSidebar.switchView(n, true) } function ie(e) { var t = e.action; switch (t) { case "GoToPage": G.appConfig.toolbar.pageNumber.select(); break; case "Find": if (!G.supportsIntegratedFind) { G.findBar.toggle() } break } } function re(e) { var t = e.active, n = e.switchInProgress; var i = P.PresentationModeState.NORMAL; if (n) { i = P.PresentationModeState.CHANGING } else if (t) { i = P.PresentationModeState.FULLSCREEN } G.pdfViewer.presentationModeState = i } function ae(e) { G.pdfRenderingQueue.isThumbnailViewEnabled = G.pdfSidebar.isThumbnailViewVisible; var t = G.store; if (t && G.isInitialViewSet) { t.set("sidebarView", e.view)["catch"](function () { }) } } function oe(e) { var t = e.location, n = G.store; if (n && G.isInitialViewSet) { n.setMultiple({ page: t.pageNumber, zoom: t.scale, scrollLeft: t.left, scrollTop: t.top, rotation: t.rotation })["catch"](function () { }) } var i = G.pdfLinkService.getAnchorUrl(t.pdfOpenParams); G.appConfig.toolbar.viewBookmark.href = i; G.appConfig.secondaryToolbar.viewBookmarkButton.href = i; var r = G.pdfViewer.getPageView(G.page - 1); var a = r.renderingState !== f.RenderingStates.FINISHED; G.toolbar.updateLoadingIndicatorState(a) } function se(e) { var t = G.store; if (t && G.isInitialViewSet) { t.set("scrollMode", e.mode)["catch"](function () { }) } } function ue(e) { var t = G.store; if (t && G.isInitialViewSet) { t.set("spreadMode", e.mode)["catch"](function () { }) } } function le() { var e = G.pdfDocument, t = G.pdfViewer; if (!e) { return } var n = t.currentScaleValue; if (n === "auto" || n === "page-fit" || n === "page-width") { t.currentScaleValue = n } t.update() } function ce(e) { var t = e.hash; if (!t) { return } if (!G.isInitialViewSet) { G.initialBookmark = t } else if (!G.pdfHistory.popStateInProgress) { G.pdfLinkService.setHash(t) } } var fe, de; { fe = function e(t) { if (G.pdfViewer && G.pdfViewer.isInPresentationMode) { return } var n = t.fileInput.files[0]; if (!S.AppOptions.get("disableCreateObjectURL")) { var i = URL.createObjectURL(n); if (n.name) { i = { url: i, originalUrl: n.name } } G.open(i) } else { G.setTitleUsingUrl(n.name); var r = new FileReader; r.onload = function e(t) { var n = t.target.result; G.open(new Uint8Array(n)) }; r.readAsArrayBuffer(n) } var a = G.appConfig; a.toolbar.viewBookmark.setAttribute("hidden", "true"); a.secondaryToolbar.viewBookmarkButton.setAttribute("hidden", "true"); a.toolbar.download.setAttribute("hidden", "true"); a.secondaryToolbar.downloadButton.setAttribute("hidden", "true") }; de = function e(t) { var n = G.appConfig.openFileInputName; document.getElementById(n).click() } } function he() { G.requestPresentationMode() } function pe() { window.print() } function ve() { G.download() } function ge() { if (G.pdfDocument) { G.page = 1 } } function me() { if (G.pdfDocument) { G.page = G.pagesCount } } function ye() { G.page++ } function be() { G.page-- } function we() { G.zoomIn() } function _e() { G.zoomOut() } function Pe() { G.zoomReset() } function Se(e) { var t = G.pdfViewer; if (e.value !== "") { t.currentPageLabel = e.value } if (e.value !== t.currentPageNumber.toString() && e.value !== t.currentPageLabel) { G.toolbar.setPageNumber(t.currentPageNumber, t.currentPageLabel) } } function ke(e) { G.pdfViewer.currentScaleValue = e.value } function Ee() { G.rotatePages(90) } function Le() { G.rotatePages(-90) } function Ce(e) { G.pdfViewer.scrollMode = e.mode } function xe(e) { G.pdfViewer.spreadMode = e.mode } function Ie() { G.pdfDocumentProperties.open() } function Te(e) { G.findController.executeCommand("find" + e.type, { query: e.query, phraseSearch: e.phraseSearch, caseSensitive: e.caseSensitive, entireWord: e.entireWord, highlightAll: e.highlightAll, findPrevious: e.findPrevious }) } function Ne(e) { G.findController.executeCommand("find", { query: e.query, phraseSearch: e.phraseSearch, caseSensitive: false, entireWord: false, highlightAll: true, findPrevious: false }) } function Me(e) { var t = e.matchesCount; if (G.supportsIntegratedFind) { G.externalServices.updateFindMatchesCount(t) } else { G.findBar.updateResultsCount(t) } } function Be(e) { var t = e.state, n = e.previous, i = e.matchesCount; if (G.supportsIntegratedFind) { G.externalServices.updateFindControlState({ result: t, findPrevious: n, matchesCount: i }) } else { G.findBar.updateUIState(t, n, i) } } function Oe(e) { G.toolbar.setPageScale(e.presetValue, e.scale); G.pdfViewer.update() } function Ae(e) { G.pdfThumbnailViewer.pagesRotation = e.pagesRotation; G.forceRendering(); G.pdfViewer.currentPageNumber = e.pageNumber } function Re(e) { var t = e.pageNumber; G.toolbar.setPageNumber(t, e.pageLabel || null); G.secondaryToolbar.setPageNumber(t); if (G.pdfSidebar.isThumbnailViewVisible) { G.pdfThumbnailViewer.scrollThumbnailIntoView(t) } if (typeof Stats !== "undefined" && Stats.enabled) { var n = G.pdfViewer.getPageView(t - 1); if (n && n.stats) { Stats.add(t, n.stats) } } } function De(e) { if (document.visibilityState === "visible") { Fe() } } var Ve = null; function Fe() { if (Ve) { clearTimeout(Ve) } Ve = setTimeout(function () { Ve = null }, j) } function Ue(e) { var t = G.pdfViewer, n = G.supportedMouseWheelZoomModifierKeys; if (t.isInPresentationMode) { return } if (e.ctrlKey && n.ctrlKey || e.metaKey && n.metaKey) { e.preventDefault(); if (Ve || document.visibilityState === "hidden") { return } var i = t.currentScale; var r = (0, P.normalizeWheelEventDelta)(e); var a = 3; var o = r * a; if (o < 0) { G.zoomOut(-o) } else { G.zoomIn(o) } var s = t.currentScale; if (i !== s) { var u = s / i - 1; var l = t.container.getBoundingClientRect(); var c = e.clientX - l.left; var f = e.clientY - l.top; t.container.scrollLeft += c * u; t.container.scrollTop += f * u } } else { Fe() } } function ze(e) { if (!G.secondaryToolbar.isOpen) { return } var t = G.appConfig; if (G.pdfViewer.containsElement(e.target) || t.toolbar.container.contains(e.target) && e.target !== t.secondaryToolbar.toggleButton) { G.secondaryToolbar.close() } } function je(e) { if (G.overlayManager.active) { return } var t = false, n = false; var i = (e.ctrlKey ? 1 : 0) | (e.altKey ? 2 : 0) | (e.shiftKey ? 4 : 0) | (e.metaKey ? 8 : 0); var r = G.pdfViewer; var a = r && r.isInPresentationMode; if (i === 1 || i === 8 || i === 5 || i === 12) { switch (e.keyCode) { case 70: if (!G.supportsIntegratedFind) { G.findBar.open(); t = true } break; case 71: if (!G.supportsIntegratedFind) { var o = G.findController.state; if (o) { G.findController.executeCommand("findagain", { query: o.query, phraseSearch: o.phraseSearch, caseSensitive: o.caseSensitive, entireWord: o.entireWord, highlightAll: o.highlightAll, findPrevious: i === 5 || i === 12 }) } t = true } break; case 61: case 107: case 187: case 171: if (!a) { G.zoomIn() } t = true; break; case 173: case 109: case 189: if (!a) { G.zoomOut() } t = true; break; case 48: case 96: if (!a) { setTimeout(function () { G.zoomReset() }); t = false } break; case 38: if (a || G.page > 1) { G.page = 1; t = true; n = true } break; case 40: if (a || G.page < G.pagesCount) { G.page = G.pagesCount; t = true; n = true } break } } var s = G.eventBus; if (i === 1 || i === 8) { switch (e.keyCode) { case 83: s.dispatch("download", { source: window }); t = true; break; case 79: { s.dispatch("openfile", { source: window }); t = true } break } } if (i === 3 || i === 10) { switch (e.keyCode) { case 80: G.requestPresentationMode(); t = true; break; case 71: G.appConfig.toolbar.pageNumber.select(); t = true; break } } if (t) { if (n && !a) { r.focus() } e.preventDefault(); return } var u = document.activeElement || document.querySelector(":focus"); var l = u && u.tagName.toUpperCase(); if (l === "INPUT" || l === "TEXTAREA" || l === "SELECT" || u && u.isContentEditable) { if (e.keyCode !== 27) { return } } if (i === 0) { var c = 0, f = false; switch (e.keyCode) { case 38: case 33: if (r.isVerticalScrollbarEnabled) { f = true } c = -1; break; case 8: if (!a) { f = true } c = -1; break; case 37: if (r.isHorizontalScrollbarEnabled) { f = true } case 75: case 80: c = -1; break; case 27: if (G.secondaryToolbar.isOpen) { G.secondaryToolbar.close(); t = true } if (!G.supportsIntegratedFind && G.findBar.opened) { G.findBar.close(); t = true } break; case 40: case 34: if (r.isVerticalScrollbarEnabled) { f = true } c = 1; break; case 13: case 32: if (!a) { f = true } c = 1; break; case 39: if (r.isHorizontalScrollbarEnabled) { f = true } case 74: case 78: c = 1; break; case 36: if (a || G.page > 1) { G.page = 1; t = true; n = true } break; case 35: if (a || G.page < G.pagesCount) { G.page = G.pagesCount; t = true; n = true } break; case 83: G.pdfCursorTools.switchTool(d.CursorTool.SELECT); break; case 72: G.pdfCursorTools.switchTool(d.CursorTool.HAND); break; case 82: G.rotatePages(90); break; case 115: G.pdfSidebar.toggle(); break }if (c !== 0 && (!f || r.currentScaleValue === "page-fit")) { if (c > 0) { if (G.page < G.pagesCount) { G.page++ } } else { if (G.page > 1) { G.page-- } } t = true } } if (i === 4) { switch (e.keyCode) { case 13: case 32: if (!a && r.currentScaleValue !== "page-fit") { break } if (G.page > 1) { G.page-- } t = true; break; case 82: G.rotatePages(-90); break } } if (!t && !a) { if (e.keyCode >= 33 && e.keyCode <= 40 || e.keyCode === 32 && l !== "BUTTON") { n = true } } if (n && !r.containsElement(u)) { r.focus() } if (t) { e.preventDefault() } } function He(e) { switch (e) { case "SinglePage": case "OneColumn": return P.SpreadMode.NONE; case "TwoColumnLeft": case "TwoPageLeft": return P.SpreadMode.ODD; case "TwoColumnRight": case "TwoPageRight": return P.SpreadMode.EVEN }return P.SpreadMode.NONE } function We(e) { switch (e) { case "UseNone": return k.SidebarView.NONE; case "UseThumbs": return k.SidebarView.THUMBS; case "UseOutlines": return k.SidebarView.OUTLINE; case "UseAttachments": return k.SidebarView.ATTACHMENTS; case "UseOC": }return k.SidebarView.NONE } var qe = { instance: { supportsPrinting: false, createPrintService: function e() { throw new Error("Not implemented: createPrintService") } } }; t.PDFPrintServiceFactory = qe }, function (e, t, n) { "use strict"; e.exports = n(3) }, function (e, t, n) { "use strict"; (function (e) { function N(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { N = function e(t) { return typeof t } } else { N = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return N(e) } var t = function (o) { "use strict"; var e = Object.prototype; var c = e.hasOwnProperty; var l; var t = typeof Symbol === "function" ? Symbol : {}; var r = t.iterator || "@@iterator"; var n = t.asyncIterator || "@@asyncIterator"; var i = t.toStringTag || "@@toStringTag"; function s(e, t, n, i) { var r = t && t.prototype instanceof u ? t : u; var a = Object.create(r.prototype); var o = new x(i || []); a._invoke = k(e, n, o); return a } o.wrap = s; function f(e, t, n) { try { return { type: "normal", arg: e.call(t, n) } } catch (e) { return { type: "throw", arg: e } } } var d = "suspendedStart"; var h = "suspendedYield"; var p = "executing"; var v = "completed"; var g = {}; function u() { } function a() { } function m() { } var y = {}; y[r] = function () { return this }; var b = Object.getPrototypeOf; var w = b && b(b(I([]))); if (w && w !== e && c.call(w, r)) { y = w } var _ = m.prototype = u.prototype = Object.create(y); a.prototype = _.constructor = m; m.constructor = a; m[i] = a.displayName = "GeneratorFunction"; function P(e) { ["next", "throw", "return"].forEach(function (t) { e[t] = function (e) { return this._invoke(t, e) } }) } o.isGeneratorFunction = function (e) { var t = typeof e === "function" && e.constructor; return t ? t === a || (t.displayName || t.name) === "GeneratorFunction" : false }; o.mark = function (e) { if (Object.setPrototypeOf) { Object.setPrototypeOf(e, m) } else { e.__proto__ = m; if (!(i in e)) { e[i] = "GeneratorFunction" } } e.prototype = Object.create(_); return e }; o.awrap = function (e) { return { __await: e } }; function S(s, u) { function l(e, t, n, i) { var r = f(s[e], s, t); if (r.type === "throw") { i(r.arg) } else { var a = r.arg; var o = a.value; if (o && N(o) === "object" && c.call(o, "__await")) { return u.resolve(o.__await).then(function (e) { l("next", e, n, i) }, function (e) { l("throw", e, n, i) }) } return u.resolve(o).then(function (e) { a.value = e; n(a) }, function (e) { return l("throw", e, n, i) }) } } var t; function e(n, i) { function e() { return new u(function (e, t) { l(n, i, e, t) }) } return t = t ? t.then(e, e) : e() } this._invoke = e } P(S.prototype); S.prototype[n] = function () { return this }; o.AsyncIterator = S; o.async = function (e, t, n, i, r) { if (r === void 0) r = Promise; var a = new S(s(e, t, n, i), r); return o.isGeneratorFunction(t) ? a : a.next().then(function (e) { return e.done ? e.value : a.next() }) }; function k(o, s, u) { var l = d; return function e(t, n) { if (l === p) { throw new Error("Generator is already running") } if (l === v) { if (t === "throw") { throw n } return T() } u.method = t; u.arg = n; while (true) { var i = u.delegate; if (i) { var r = E(i, u); if (r) { if (r === g) continue; return r } } if (u.method === "next") { u.sent = u._sent = u.arg } else if (u.method === "throw") { if (l === d) { l = v; throw u.arg } u.dispatchException(u.arg) } else if (u.method === "return") { u.abrupt("return", u.arg) } l = p; var a = f(o, s, u); if (a.type === "normal") { l = u.done ? v : h; if (a.arg === g) { continue } return { value: a.arg, done: u.done } } else if (a.type === "throw") { l = v; u.method = "throw"; u.arg = a.arg } } } } function E(e, t) { var n = e.iterator[t.method]; if (n === l) { t.delegate = null; if (t.method === "throw") { if (e.iterator["return"]) { t.method = "return"; t.arg = l; E(e, t); if (t.method === "throw") { return g } } t.method = "throw"; t.arg = new TypeError("The iterator does not provide a 'throw' method") } return g } var i = f(n, e.iterator, t.arg); if (i.type === "throw") { t.method = "throw"; t.arg = i.arg; t.delegate = null; return g } var r = i.arg; if (!r) { t.method = "throw"; t.arg = new TypeError("iterator result is not an object"); t.delegate = null; return g } if (r.done) { t[e.resultName] = r.value; t.next = e.nextLoc; if (t.method !== "return") { t.method = "next"; t.arg = l } } else { return r } t.delegate = null; return g } P(_); _[i] = "Generator"; _[r] = function () { return this }; _.toString = function () { return "[object Generator]" }; function L(e) { var t = { tryLoc: e[0] }; if (1 in e) { t.catchLoc = e[1] } if (2 in e) { t.finallyLoc = e[2]; t.afterLoc = e[3] } this.tryEntries.push(t) } function C(e) { var t = e.completion || {}; t.type = "normal"; delete t.arg; e.completion = t } function x(e) { this.tryEntries = [{ tryLoc: "root" }]; e.forEach(L, this); this.reset(true) } o.keys = function (n) { var i = []; for (var e in n) { i.push(e) } i.reverse(); return function e() { while (i.length) { var t = i.pop(); if (t in n) { e.value = t; e.done = false; return e } } e.done = true; return e } }; function I(t) { if (t) { var e = t[r]; if (e) { return e.call(t) } if (typeof t.next === "function") { return t } if (!isNaN(t.length)) { var n = -1, i = function e() { while (++n < t.length) { if (c.call(t, n)) { e.value = t[n]; e.done = false; return e } } e.value = l; e.done = true; return e }; return i.next = i } } return { next: T } } o.values = I; function T() { return { value: l, done: true } } x.prototype = { constructor: x, reset: function e(t) { this.prev = 0; this.next = 0; this.sent = this._sent = l; this.done = false; this.delegate = null; this.method = "next"; this.arg = l; this.tryEntries.forEach(C); if (!t) { for (var n in this) { if (n.charAt(0) === "t" && c.call(this, n) && !isNaN(+n.slice(1))) { this[n] = l } } } }, stop: function e() { this.done = true; var t = this.tryEntries[0]; var n = t.completion; if (n.type === "throw") { throw n.arg } return this.rval }, dispatchException: function e(n) { if (this.done) { throw n } var i = this; function t(e, t) { o.type = "throw"; o.arg = n; i.next = e; if (t) { i.method = "next"; i.arg = l } return !!t } for (var r = this.tryEntries.length - 1; r >= 0; --r) { var a = this.tryEntries[r]; var o = a.completion; if (a.tryLoc === "root") { return t("end") } if (a.tryLoc <= this.prev) { var s = c.call(a, "catchLoc"); var u = c.call(a, "finallyLoc"); if (s && u) { if (this.prev < a.catchLoc) { return t(a.catchLoc, true) } else if (this.prev < a.finallyLoc) { return t(a.finallyLoc) } } else if (s) { if (this.prev < a.catchLoc) { return t(a.catchLoc, true) } } else if (u) { if (this.prev < a.finallyLoc) { return t(a.finallyLoc) } } else { throw new Error("try statement without catch or finally") } } } }, abrupt: function e(t, n) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var r = this.tryEntries[i]; if (r.tryLoc <= this.prev && c.call(r, "finallyLoc") && this.prev < r.finallyLoc) { var a = r; break } } if (a && (t === "break" || t === "continue") && a.tryLoc <= n && n <= a.finallyLoc) { a = null } var o = a ? a.completion : {}; o.type = t; o.arg = n; if (a) { this.method = "next"; this.next = a.finallyLoc; return g } return this.complete(o) }, complete: function e(t, n) { if (t.type === "throw") { throw t.arg } if (t.type === "break" || t.type === "continue") { this.next = t.arg } else if (t.type === "return") { this.rval = this.arg = t.arg; this.method = "return"; this.next = "end" } else if (t.type === "normal" && n) { this.next = n } return g }, finish: function e(t) { for (var n = this.tryEntries.length - 1; n >= 0; --n) { var i = this.tryEntries[n]; if (i.finallyLoc === t) { this.complete(i.completion, i.afterLoc); C(i); return g } } }, catch: function e(t) { for (var n = this.tryEntries.length - 1; n >= 0; --n) { var i = this.tryEntries[n]; if (i.tryLoc === t) { var r = i.completion; if (r.type === "throw") { var a = r.arg; C(i) } return a } } throw new Error("illegal catch attempt") }, delegateYield: function e(t, n, i) { this.delegate = { iterator: I(t), resultName: n, nextLoc: i }; if (this.method === "next") { this.arg = l } return g } }; return o }((false ? undefined : N(e)) === "object" ? e.exports : {}); try { regeneratorRuntime = t } catch (e) { Function("r", "regeneratorRuntime = r")(t) } }).call(this, n(4)(e)) }, function (e, t, n) { "use strict"; e.exports = function (t) { if (!t.webpackPolyfill) { t.deprecate = function () { }; t.paths = []; if (!t.children) t.children = []; Object.defineProperty(t, "loaded", { enumerable: true, get: function e() { return t.l } }); Object.defineProperty(t, "id", { enumerable: true, get: function e() { return t.i } }); t.webpackPolyfill = 1 } return t } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.isValidRotation = Q; t.isValidScrollMode = Z; t.isValidSpreadMode = X; t.isPortraitOrientation = Y; t.clamp = ie; t.getPDFFileNameFromURL = G; t.noContextMenuHandler = W; t.parseQueryString = D; t.backtrackBeforeAllVisibleElements = j; t.getVisibleElements = H; t.roundToDivide = U; t.getPageSizeInches = z; t.approximateFraction = F; t.getOutputScale = O; t.scrollIntoView = A; t.watchScroll = R; t.binarySearchFirstItem = V; t.normalizeWheelEventDelta = K; t.waitOnEventOrTimeout = J; t.moveToEndOfArray = ae; t.WaitOnType = t.animationStarted = t.ProgressBar = t.EventBus = t.NullL10n = t.SpreadMode = t.ScrollMode = t.TextLayerMode = t.RendererType = t.PresentationModeState = t.VERTICAL_PADDING = t.SCROLLBAR_PADDING = t.MAX_AUTO_SCALE = t.UNKNOWN_SCALE = t.MAX_SCALE = t.MIN_SCALE = t.DEFAULT_SCALE = t.DEFAULT_SCALE_VALUE = t.CSS_UNITS = t.AutoPrintRegExp = void 0; var r = i(n(2)); function i(e) { return e && e.__esModule ? e : { default: e } } function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function a(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) a(e.prototype, t); if (n) a(e, n); return e } function l(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { l = function e(t) { return typeof t } } else { l = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return l(e) } function d(e, t) { return p(e) || h(e, t) || c(e, t) || u() } function u() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function c(e, t) { if (!e) return; if (typeof e === "string") return f(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return f(e, t) } function f(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function h(e, t) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(e))) return; var n = []; var i = true; var r = false; var a = undefined; try { for (var o = e[Symbol.iterator](), s; !(i = (s = o.next()).done); i = true) { n.push(s.value); if (t && n.length === t) break } } catch (e) { r = true; a = e } finally { try { if (!i && o["return"] != null) o["return"]() } finally { if (r) throw a } } return n } function p(e) { if (Array.isArray(e)) return e } function v(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function g(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { v(i, t, n, r, a, "next", e) } function a(e) { v(i, t, n, r, a, "throw", e) } r(undefined) }) } } var m = 96 / 72; t.CSS_UNITS = m; var y = "auto"; t.DEFAULT_SCALE_VALUE = y; var b = 1; t.DEFAULT_SCALE = b; var w = .1; t.MIN_SCALE = w; var _ = 10; t.MAX_SCALE = _; var P = 0; t.UNKNOWN_SCALE = P; var S = 1.25; t.MAX_AUTO_SCALE = S; var k = 40; t.SCROLLBAR_PADDING = k; var E = 5; t.VERTICAL_PADDING = E; var L = { UNKNOWN: 0, NORMAL: 1, CHANGING: 2, FULLSCREEN: 3 }; t.PresentationModeState = L; var C = { CANVAS: "canvas", SVG: "svg" }; t.RendererType = C; var x = { DISABLE: 0, ENABLE: 1, ENABLE_ENHANCE: 2 }; t.TextLayerMode = x; var I = { UNKNOWN: -1, VERTICAL: 0, HORIZONTAL: 1, WRAPPED: 2 }; t.ScrollMode = I; var T = { UNKNOWN: -1, NONE: 0, ODD: 1, EVEN: 2 }; t.SpreadMode = T; var N = /\bprint\s*\(/; t.AutoPrintRegExp = N; function M(e, n) { if (!n) { return e } return e.replace(/\{\{\s*(\w+)\s*\}\}/g, function (e, t) { return t in n ? n[t] : "{{" + t + "}}" }) } var B = { getLanguage: function e() { return g(r["default"].mark(function e() { return r["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: return t.abrupt("return", "en-us"); case 1: case "end": return t.stop() } } }, e) }))() }, getDirection: function e() { return g(r["default"].mark(function e() { return r["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: return t.abrupt("return", "ltr"); case 1: case "end": return t.stop() } } }, e) }))() }, get: function e(t, n, i) { return g(r["default"].mark(function e() { return r["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: return t.abrupt("return", M(i, n)); case 1: case "end": return t.stop() } } }, e) }))() }, translate: function e(t) { return g(r["default"].mark(function e() { return r["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: case "end": return t.stop() } } }, e) }))() } }; t.NullL10n = B; function O(e) { var t = window.devicePixelRatio || 1; var n = e.webkitBackingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || e.backingStorePixelRatio || 1; var i = t / n; return { sx: i, sy: i, scaled: i !== 1 } } function A(e, t) { var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false; var i = e.offsetParent; if (!i) { console.error("offsetParent is not set -- cannot scroll"); return } var r = e.offsetTop + e.clientTop; var a = e.offsetLeft + e.clientLeft; while (i.clientHeight === i.scrollHeight && i.clientWidth === i.scrollWidth || n && getComputedStyle(i).overflow === "hidden") { if (i.dataset._scaleY) { r /= i.dataset._scaleY; a /= i.dataset._scaleX } r += i.offsetTop; a += i.offsetLeft; i = i.offsetParent; if (!i) { return } } if (t) { if (t.top !== undefined) { r += t.top } if (t.left !== undefined) { a += t.left; i.scrollLeft = a } } i.scrollTop = r } function R(a, o) { var e = function e(t) { if (u) { return } u = window.requestAnimationFrame(function e() { u = null; var t = a.scrollLeft; var n = s.lastX; if (t !== n) { s.right = t > n } s.lastX = t; var i = a.scrollTop; var r = s.lastY; if (i !== r) { s.down = i > r } s.lastY = i; o(s) }) }; var s = { right: true, down: true, lastX: a.scrollLeft, lastY: a.scrollTop, _eventHandler: e }; var u = null; a.addEventListener("scroll", e, true); return s } function D(e) { var t = e.split("&"); var n = Object.create(null); for (var i = 0, r = t.length; i < r; ++i) { var a = t[i].split("="); var o = a[0].toLowerCase(); var s = a.length > 1 ? a[1] : null; n[decodeURIComponent(o)] = decodeURIComponent(s) } return n } function V(e, t) { var n = 0; var i = e.length - 1; if (i < 0 || !t(e[i])) { return e.length } if (t(e[n])) { return n } while (n < i) { var r = n + i >> 1; var a = e[r]; if (t(a)) { i = r } else { n = r + 1 } } return n } function F(e) { if (Math.floor(e) === e) { return [e, 1] } var t = 1 / e; var n = 8; if (t > n) { return [1, n] } else if (Math.floor(t) === t) { return [1, t] } var i = e > 1 ? t : e; var r = 0, a = 1, o = 1, s = 1; while (true) { var u = r + o, l = a + s; if (l > n) { break } if (i <= u / l) { o = u; s = l } else { r = u; a = l } } var c; if (i - r / a < o / s - i) { c = i === e ? [r, a] : [a, r] } else { c = i === e ? [o, s] : [s, o] } return c } function U(e, t) { var n = e % t; return n === 0 ? e : Math.round(e - n + t) } function z(e) { var t = e.view, n = e.userUnit, i = e.rotate; var r = d(t, 4), a = r[0], o = r[1], s = r[2], u = r[3]; var l = i % 180 !== 0; var c = (s - a) / 72 * n; var f = (u - o) / 72 * n; return { width: l ? f : c, height: l ? c : f } } function j(e, t, n) { if (e < 2) { return e } var i = t[e].div; var r = i.offsetTop + i.clientTop; if (r >= n) { i = t[e - 1].div; r = i.offsetTop + i.clientTop } for (var a = e - 2; a >= 0; --a) { i = t[a].div; if (i.offsetTop + i.clientTop + i.clientHeight <= r) { break } e = a } return e } function H(e, t) { var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false; var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; var r = e.scrollTop, a = r + e.clientHeight; var o = e.scrollLeft, s = o + e.clientWidth; function u(e) { var t = e.div; var n = t.offsetTop + t.clientTop + t.clientHeight; return n > r } function l(e) { var t = e.div; var n = t.offsetLeft + t.clientLeft + t.clientWidth; return n > o } var c = [], f = t.length; var d = f === 0 ? 0 : V(t, i ? l : u); if (d > 0 && d < f && !i) { d = j(d, t, r) } var h = i ? s : -1; for (var p = d; p < f; p++) { var v = t[p], g = v.div; var m = g.offsetLeft + g.clientLeft; var y = g.offsetTop + g.clientTop; var b = g.clientWidth, w = g.clientHeight; var _ = m + b; var P = y + w; if (h === -1) { if (P >= a) { h = P } } else if ((i ? m : y) > h) { break } if (P <= r || y >= a || _ <= o || m >= s) { continue } var S = Math.max(0, r - y) + Math.max(0, P - a); var k = Math.max(0, o - m) + Math.max(0, _ - s); var E = (w - S) * (b - k) * 100 / w / b | 0; c.push({ id: v.id, x: m, y: y, view: v, percent: E }) } var L = c[0], C = c[c.length - 1]; if (n) { c.sort(function (e, t) { var n = e.percent - t.percent; if (Math.abs(n) > .001) { return -n } return e.id - t.id }) } return { first: L, last: C, views: c } } function W(e) { e.preventDefault() } function q(e) { var t = 0; var n = e.length; while (t < n && e[t].trim() === "") { t++ } return e.substring(t, t + 5).toLowerCase() === "data:" } function G(e) { var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "document.pdf"; if (typeof e !== "string") { return t } if (q(e)) { console.warn("getPDFFileNameFromURL: " + 'ignoring "data:" URL for performance reasons.'); return t } var n = /^(?:(?:[^:]+:)?\/\/[^\/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/; var i = /[^\/?#=]+\.pdf\b(?!.*\.pdf\b)/i; var r = n.exec(e); var a = i.exec(r[1]) || i.exec(r[2]) || i.exec(r[3]); if (a) { a = a[0]; if (a.includes("%")) { try { a = i.exec(decodeURIComponent(a))[0] } catch (e) { } } } return a || t } function K(e) { var t = Math.sqrt(e.deltaX * e.deltaX + e.deltaY * e.deltaY); var n = Math.atan2(e.deltaY, e.deltaX); if (-.25 * Math.PI < n && n < .75 * Math.PI) { t = -t } var i = 0; var r = 1; var a = 30; var o = 30; if (e.deltaMode === i) { t /= a * o } else if (e.deltaMode === r) { t /= o } return t } function Q(e) { return Number.isInteger(e) && e % 90 === 0 } function Z(e) { return Number.isInteger(e) && Object.values(I).includes(e) && e !== I.UNKNOWN } function X(e) { return Number.isInteger(e) && Object.values(T).includes(e) && e !== T.UNKNOWN } function Y(e) { return e.width <= e.height } var $ = { EVENT: "event", TIMEOUT: "timeout" }; t.WaitOnType = $; function J(e) { var o = e.target, s = e.name, t = e.delay, u = t === void 0 ? 0 : t; return new Promise(function (t, e) { if (l(o) !== "object" || !(s && typeof s === "string") || !(Number.isInteger(u) && u >= 0)) { throw new Error("waitOnEventOrTimeout - invalid parameters.") } function n(e) { if (o instanceof ne) { o._off(s, i) } else { o.removeEventListener(s, i) } if (a) { clearTimeout(a) } t(e) } var i = n.bind(null, $.EVENT); if (o instanceof ne) { o._on(s, i) } else { o.addEventListener(s, i) } var r = n.bind(null, $.TIMEOUT); var a = setTimeout(r, u) }) } var ee = new Promise(function (e) { window.requestAnimationFrame(e) }); t.animationStarted = ee; function te(e) { var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; throw new Error("Not implemented: dispatchDOMEvent") } var ne = function () { function t(e) { o(this, t); this._listeners = Object.create(null) } s(t, [{ key: "on", value: function e(t, n) { this._on(t, n, { external: true }) } }, { key: "off", value: function e(t, n) { this._off(t, n, { external: true }) } }, { key: "dispatch", value: function e(t) { var n = this._listeners[t]; if (!n || n.length === 0) { return } var i = Array.prototype.slice.call(arguments, 1); var r; n.slice(0).forEach(function (e) { var t = e.listener, n = e.external; if (n) { if (!r) { r = [] } r.push(t); return } t.apply(null, i) }); if (r) { r.forEach(function (e) { e.apply(null, i) }); r = null } } }, { key: "_on", value: function e(t, n) { var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null; var r = this._listeners[t]; if (!r) { this._listeners[t] = r = [] } r.push({ listener: n, external: (i && i.external) === true }) } }, { key: "_off", value: function e(t, n) { var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null; var r = this._listeners[t]; if (!r) { return } for (var a = 0, o = r.length; a < o; a++) { if (r[a].listener === n) { r.splice(a, 1); return } } } }]); return t }(); t.EventBus = ne; function ie(e, t, n) { return Math.min(Math.max(e, t), n) } var re = function () { function a(e) { var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {}, n = t.height, i = t.width, r = t.units; o(this, a); this.visible = true; this.div = document.querySelector(e + " .progress"); this.bar = this.div.parentNode; this.height = n || 100; this.width = i || 100; this.units = r || "%"; this.div.style.height = this.height + this.units; this.percent = 0 } s(a, [{ key: "_updateBar", value: function e() { if (this._indeterminate) { this.div.classList.add("indeterminate"); this.div.style.width = this.width + this.units; return } this.div.classList.remove("indeterminate"); var t = this.width * this._percent / 100; this.div.style.width = t + this.units } }, { key: "setWidth", value: function e(t) { if (!t) { return } var n = t.parentNode; var i = n.offsetWidth - t.offsetWidth; if (i > 0) { this.bar.style.width = "calc(100% - ".concat(i, "px)") } } }, { key: "hide", value: function e() { if (!this.visible) { return } this.visible = false; this.bar.classList.add("hidden"); document.body.classList.remove("loadingInProgress") } }, { key: "show", value: function e() { if (this.visible) { return } this.visible = true; document.body.classList.add("loadingInProgress"); this.bar.classList.remove("hidden") } }, { key: "percent", get: function e() { return this._percent }, set: function e(t) { this._indeterminate = isNaN(t); this._percent = ie(t, 0, 100); this._updateBar() } }]); return a }(); t.ProgressBar = re; function ae(e, t) { var n = [], i = e.length; var r = 0; for (var a = 0; a < i; ++a) { if (t(e[a])) { n.push(e[a]) } else { e[r] = e[a]; ++r } } for (var o = 0; r < i; ++o, ++r) { e[r] = n[o] } } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.OptionKind = t.AppOptions = void 0; var i = n(7); function u(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { u = function e(t) { return typeof t } } else { u = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return u(e) } function r(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function a(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function o(e, t, n) { if (t) a(e.prototype, t); if (n) a(e, n); return e } var l = { VIEWER: 2, API: 4, WORKER: 8, PREFERENCE: 128 }; t.OptionKind = l; var c = { cursorToolOnLoad: { value: 0, kind: l.VIEWER + l.PREFERENCE }, defaultUrl: { value: "compressed.tracemonkey-pldi-09.pdf", kind: l.VIEWER }, defaultZoomValue: { value: "", kind: l.VIEWER + l.PREFERENCE }, disableCreateObjectURL: { value: false, compatibility: i.viewerCompatibilityParams.disableCreateObjectURL, kind: l.VIEWER }, disableHistory: { value: false, kind: l.VIEWER }, disablePageLabels: { value: false, kind: l.VIEWER + l.PREFERENCE }, enablePermissions: { value: false, kind: l.VIEWER + l.PREFERENCE }, enablePrintAutoRotate: { value: false, kind: l.VIEWER + l.PREFERENCE }, enableWebGL: { value: false, kind: l.VIEWER + l.PREFERENCE }, externalLinkRel: { value: "noopener noreferrer nofollow", kind: l.VIEWER }, externalLinkTarget: { value: 0, kind: l.VIEWER + l.PREFERENCE }, historyUpdateUrl: { value: false, kind: l.VIEWER + l.PREFERENCE }, ignoreDestinationZoom: { value: false, kind: l.VIEWER + l.PREFERENCE }, imageResourcesPath: { value: "./images/", kind: l.VIEWER }, maxCanvasPixels: { value: 16777216, compatibility: i.viewerCompatibilityParams.maxCanvasPixels, kind: l.VIEWER }, pdfBugEnabled: { value: false, kind: l.VIEWER + l.PREFERENCE }, printResolution: { value: 150, kind: l.VIEWER }, renderer: { value: "canvas", kind: l.VIEWER + l.PREFERENCE }, renderInteractiveForms: { value: false, kind: l.VIEWER + l.PREFERENCE }, sidebarViewOnLoad: { value: -1, kind: l.VIEWER + l.PREFERENCE }, scrollModeOnLoad: { value: -1, kind: l.VIEWER + l.PREFERENCE }, spreadModeOnLoad: { value: -1, kind: l.VIEWER + l.PREFERENCE }, textLayerMode: { value: 1, kind: l.VIEWER + l.PREFERENCE }, useOnlyCssZoom: { value: false, kind: l.VIEWER + l.PREFERENCE }, viewOnLoad: { value: 0, kind: l.VIEWER + l.PREFERENCE }, cMapPacked: { value: true, kind: l.API }, cMapUrl: { value: "../web/cmaps/", kind: l.API }, disableAutoFetch: { value: false, kind: l.API + l.PREFERENCE }, disableFontFace: { value: false, kind: l.API + l.PREFERENCE }, disableRange: { value: false, kind: l.API + l.PREFERENCE }, disableStream: { value: false, kind: l.API + l.PREFERENCE }, docBaseUrl: { value: "", kind: l.API }, fontExtraProperties: { value: false, kind: l.API }, isEvalSupported: { value: true, kind: l.API }, maxImageSize: { value: -1, kind: l.API }, pdfBug: { value: false, kind: l.API }, verbosity: { value: 1, kind: l.API }, workerPort: { value: null, kind: l.WORKER }, workerSrc: { value: "../build/pdf.worker.js", kind: l.WORKER } }; { c.disablePreferences = { value: false, kind: l.VIEWER }; c.locale = { value: typeof navigator !== "undefined" ? navigator.language : "en-US", kind: l.VIEWER } } var f = Object.create(null); var s = function () { function e() { r(this, e); throw new Error("Cannot initialize AppOptions.") } o(e, null, [{ key: "get", value: function e(t) { var n = f[t]; if (n !== undefined) { return n } var i = c[t]; if (i !== undefined) { return i.compatibility || i.value } return undefined } }, { key: "getAll", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null; var n = Object.create(null); for (var i in c) { var r = c[i]; if (t) { if ((t & r.kind) === 0) { continue } if (t === l.PREFERENCE) { var a = r.value, o = u(a); if (o === "boolean" || o === "string" || o === "number" && Number.isInteger(a)) { n[i] = a; continue } throw new Error("Invalid type for preference: ".concat(i)) } } var s = f[i]; n[i] = s !== undefined ? s : r.compatibility || r.value } return n } }, { key: "set", value: function e(t, n) { f[t] = n } }, { key: "remove", value: function e(t) { delete f[t] } }]); return e }(); t.AppOptions = s }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.viewerCompatibilityParams = void 0; var i = Object.create(null); { var r = typeof navigator !== "undefined" && navigator.userAgent || ""; var a = typeof navigator !== "undefined" && navigator.platform || ""; var o = typeof navigator !== "undefined" && navigator.maxTouchPoints || 1; var s = /Android/.test(r); var u = /Trident/.test(r); var l = /\b(iPad|iPhone|iPod)(?=;)/.test(r) || a === "MacIntel" && o > 1; var c = /CriOS/.test(r); (function e() { if (u || c) { i.disableCreateObjectURL = true } })(); (function e() { if (l || s) { i.maxCanvasPixels = 5242880 } })() } var f = Object.freeze(i); t.viewerCompatibilityParams = f }, function (e, t, n) { "use strict"; var i; if (typeof window !== "undefined" && window["pdfjs-dist/build/pdf"]) { i = window["pdfjs-dist/build/pdf"] } else { i = require("../build/pdf.js") } e.exports = i }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFCursorTools = t.CursorTool = void 0; var s = n(10); function u(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function r(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var l = { SELECT: 0, HAND: 1, ZOOM: 2 }; t.CursorTool = l; var a = function () { function o(e) { var t = this; var n = e.container, i = e.eventBus, r = e.cursorToolOnLoad, a = r === void 0 ? l.SELECT : r; u(this, o); this.container = n; this.eventBus = i; this.active = l.SELECT; this.activeBeforePresentationMode = null; this.handTool = new s.GrabToPan({ element: this.container }); this._addEventListeners(); Promise.resolve().then(function () { t.switchTool(a) }) } r(o, [{ key: "switchTool", value: function e(t) { var n = this; if (this.activeBeforePresentationMode !== null) { return } if (t === this.active) { return } var i = function e() { switch (n.active) { case l.SELECT: break; case l.HAND: n.handTool.deactivate(); break; case l.ZOOM: } }; switch (t) { case l.SELECT: i(); break; case l.HAND: i(); this.handTool.activate(); break; case l.ZOOM: default: console.error('switchTool: "'.concat(t, '" is an unsupported value.')); return }this.active = t; this._dispatchEvent() } }, { key: "_dispatchEvent", value: function e() { this.eventBus.dispatch("cursortoolchanged", { source: this, tool: this.active }) } }, { key: "_addEventListeners", value: function e() { var n = this; this.eventBus._on("switchcursortool", function (e) { n.switchTool(e.tool) }); this.eventBus._on("presentationmodechanged", function (e) { if (e.switchInProgress) { return } var t; if (e.active) { t = n.active; n.switchTool(l.SELECT); n.activeBeforePresentationMode = t } else { t = n.activeBeforePresentationMode; n.activeBeforePresentationMode = null; n.switchTool(t) } }) } }, { key: "activeTool", get: function e() { return this.active } }]); return o }(); t.PDFCursorTools = a }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.GrabToPan = i; function i(e) { this.element = e.element; this.document = e.element.ownerDocument; if (typeof e.ignoreTarget === "function") { this.ignoreTarget = e.ignoreTarget } this.onActiveChanged = e.onActiveChanged; this.activate = this.activate.bind(this); this.deactivate = this.deactivate.bind(this); this.toggle = this.toggle.bind(this); this._onmousedown = this._onmousedown.bind(this); this._onmousemove = this._onmousemove.bind(this); this._endPan = this._endPan.bind(this); var t = this.overlay = document.createElement("div"); t.className = "grab-to-pan-grabbing" } i.prototype = { CSS_CLASS_GRAB: "grab-to-pan-grab", activate: function e() { if (!this.active) { this.active = true; this.element.addEventListener("mousedown", this._onmousedown, true); this.element.classList.add(this.CSS_CLASS_GRAB); if (this.onActiveChanged) { this.onActiveChanged(true) } } }, deactivate: function e() { if (this.active) { this.active = false; this.element.removeEventListener("mousedown", this._onmousedown, true); this._endPan(); this.element.classList.remove(this.CSS_CLASS_GRAB); if (this.onActiveChanged) { this.onActiveChanged(false) } } }, toggle: function e() { if (this.active) { this.deactivate() } else { this.activate() } }, ignoreTarget: function e(t) { return t[r]("a[href], a[href] *, input, textarea, button, button *, select, option") }, _onmousedown: function e(t) { if (t.button !== 0 || this.ignoreTarget(t.target)) { return } if (t.originalTarget) { try { t.originalTarget.tagName } catch (e) { return } } this.scrollLeftStart = this.element.scrollLeft; this.scrollTopStart = this.element.scrollTop; this.clientXStart = t.clientX; this.clientYStart = t.clientY; this.document.addEventListener("mousemove", this._onmousemove, true); this.document.addEventListener("mouseup", this._endPan, true); this.element.addEventListener("scroll", this._endPan, true); t.preventDefault(); t.stopPropagation(); var n = document.activeElement; if (n && !n.contains(t.target)) { n.blur() } }, _onmousemove: function e(t) { this.element.removeEventListener("scroll", this._endPan, true); if (l(t)) { this._endPan(); return } var n = t.clientX - this.clientXStart; var i = t.clientY - this.clientYStart; var r = this.scrollTopStart - i; var a = this.scrollLeftStart - n; if (this.element.scrollTo) { this.element.scrollTo({ top: r, left: a, behavior: "instant" }) } else { this.element.scrollTop = r; this.element.scrollLeft = a } if (!this.overlay.parentNode) { document.body.appendChild(this.overlay) } }, _endPan: function e() { this.element.removeEventListener("scroll", this._endPan, true); this.document.removeEventListener("mousemove", this._onmousemove, true); this.document.removeEventListener("mouseup", this._endPan, true); this.overlay.remove() } }; var r;["webkitM", "mozM", "msM", "oM", "m"].some(function (e) { var t = e + "atches"; if (t in document.documentElement) { r = t } t += "Selector"; if (t in document.documentElement) { r = t } return r }); var a = !document.documentMode || document.documentMode > 9; var o = window.chrome; var s = o && (o.webstore || o.app); var u = /Apple/.test(navigator.vendor) && /Version\/([6-9]\d*|[1-5]\d+)/.test(navigator.userAgent); function l(e) { if ("buttons" in e && a) { return !(e.buttons & 1) } if (s || u) { return e.which === 0 } return false } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFRenderingQueue = t.RenderingStates = void 0; function i(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function r(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function a(e, t, n) { if (t) r(e.prototype, t); if (n) r(e, n); return e } var o = 3e4; var s = { INITIAL: 0, RUNNING: 1, PAUSED: 2, FINISHED: 3 }; t.RenderingStates = s; var u = function () { function e() { i(this, e); this.pdfViewer = null; this.pdfThumbnailViewer = null; this.onIdle = null; this.highestPriorityPage = null; this.idleTimeout = null; this.printing = false; this.isThumbnailViewEnabled = false } a(e, [{ key: "setViewer", value: function e(t) { this.pdfViewer = t } }, { key: "setThumbnailViewer", value: function e(t) { this.pdfThumbnailViewer = t } }, { key: "isHighestPriority", value: function e(t) { return this.highestPriorityPage === t.renderingId } }, { key: "renderHighestPriority", value: function e(t) { if (this.idleTimeout) { clearTimeout(this.idleTimeout); this.idleTimeout = null } if (this.pdfViewer.forceRendering(t)) { return } if (this.pdfThumbnailViewer && this.isThumbnailViewEnabled) { if (this.pdfThumbnailViewer.forceRendering()) { return } } if (this.printing) { return } if (this.onIdle) { this.idleTimeout = setTimeout(this.onIdle.bind(this), o) } } }, { key: "getHighestPriority", value: function e(t, n, i) { var r = t.views; var a = r.length; if (a === 0) { return null } for (var o = 0; o < a; ++o) { var s = r[o].view; if (!this.isViewFinished(s)) { return s } } if (i) { var u = t.last.id; if (n[u] && !this.isViewFinished(n[u])) { return n[u] } } else { var l = t.first.id - 2; if (n[l] && !this.isViewFinished(n[l])) { return n[l] } } return null } }, { key: "isViewFinished", value: function e(t) { return t.renderingState === s.FINISHED } }, { key: "renderView", value: function e(t) { var n = this; switch (t.renderingState) { case s.FINISHED: return false; case s.PAUSED: this.highestPriorityPage = t.renderingId; t.resume(); break; case s.RUNNING: this.highestPriorityPage = t.renderingId; break; case s.INITIAL: this.highestPriorityPage = t.renderingId; t.draw()["finally"](function () { n.renderHighestPriority() })["catch"](function (e) { console.error('renderView: "'.concat(e, '"')) }); break }return true } }]); return e }(); t.PDFRenderingQueue = u }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFSidebar = t.SidebarView = void 0; var c = n(5); var s = n(11); function f(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function r(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var a = "pdfSidebarNotification"; var d = { UNKNOWN: -1, NONE: 0, THUMBS: 1, OUTLINE: 2, ATTACHMENTS: 3, LAYERS: 4 }; t.SidebarView = d; var o = function () { function l(e) { var t = e.elements, n = e.pdfViewer, i = e.pdfThumbnailViewer, r = e.eventBus, a = e.l10n, o = a === void 0 ? c.NullL10n : a, s = e.disableNotification, u = s === void 0 ? false : s; f(this, l); this.isOpen = false; this.active = d.THUMBS; this.isInitialViewSet = false; this.onToggled = null; this.pdfViewer = n; this.pdfThumbnailViewer = i; this.outerContainer = t.outerContainer; this.viewerContainer = t.viewerContainer; this.toggleButton = t.toggleButton; this.thumbnailButton = t.thumbnailButton; this.outlineButton = t.outlineButton; this.attachmentsButton = t.attachmentsButton; this.thumbnailView = t.thumbnailView; this.outlineView = t.outlineView; this.attachmentsView = t.attachmentsView; this.eventBus = r; this.l10n = o; this._disableNotification = u; this._addEventListeners() } r(l, [{ key: "reset", value: function e() { this.isInitialViewSet = false; this._hideUINotification(null); this.switchView(d.THUMBS); this.outlineButton.disabled = false; this.attachmentsButton.disabled = false } }, { key: "setInitialView", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : d.NONE; if (this.isInitialViewSet) { return } this.isInitialViewSet = true; if (t === d.NONE || t === d.UNKNOWN) { this._dispatchEvent(); return } if (!this._switchView(t, true)) { this._dispatchEvent() } } }, { key: "switchView", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; this._switchView(t, n) } }, { key: "_switchView", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; var i = t !== this.active; var r = false; switch (t) { case d.NONE: if (this.isOpen) { this.close(); return true } return false; case d.THUMBS: if (this.isOpen && i) { r = true } break; case d.OUTLINE: if (this.outlineButton.disabled) { return false } break; case d.ATTACHMENTS: if (this.attachmentsButton.disabled) { return false } break; default: console.error('PDFSidebar._switchView: "'.concat(t, '" is not a valid view.')); return false }this.active = t; this.thumbnailButton.classList.toggle("toggled", t === d.THUMBS); this.outlineButton.classList.toggle("toggled", t === d.OUTLINE); this.attachmentsButton.classList.toggle("toggled", t === d.ATTACHMENTS); this.thumbnailView.classList.toggle("hidden", t !== d.THUMBS); this.outlineView.classList.toggle("hidden", t !== d.OUTLINE); this.attachmentsView.classList.toggle("hidden", t !== d.ATTACHMENTS); if (n && !this.isOpen) { this.open(); return true } if (r) { this._updateThumbnailViewer(); this._forceRendering() } if (i) { this._dispatchEvent() } this._hideUINotification(this.active); return i } }, { key: "open", value: function e() { if (this.isOpen) { return } this.isOpen = true; this.toggleButton.classList.add("toggled"); this.outerContainer.classList.add("sidebarMoving", "sidebarOpen"); if (this.active === d.THUMBS) { this._updateThumbnailViewer() } this._forceRendering(); this._dispatchEvent(); this._hideUINotification(this.active) } }, { key: "close", value: function e() { if (!this.isOpen) { return } this.isOpen = false; this.toggleButton.classList.remove("toggled"); this.outerContainer.classList.add("sidebarMoving"); this.outerContainer.classList.remove("sidebarOpen"); this._forceRendering(); this._dispatchEvent() } }, { key: "toggle", value: function e() { if (this.isOpen) { this.close() } else { this.open() } } }, { key: "_dispatchEvent", value: function e() { this.eventBus.dispatch("sidebarviewchanged", { source: this, view: this.visibleView }) } }, { key: "_forceRendering", value: function e() { if (this.onToggled) { this.onToggled() } else { this.pdfViewer.forceRendering(); this.pdfThumbnailViewer.forceRendering() } } }, { key: "_updateThumbnailViewer", value: function e() { var t = this.pdfViewer, n = this.pdfThumbnailViewer; var i = t.pagesCount; for (var r = 0; r < i; r++) { var a = t.getPageView(r); if (a && a.renderingState === s.RenderingStates.FINISHED) { var o = n.getThumbnail(r); o.setImage(a) } } n.scrollThumbnailIntoView(t.currentPageNumber) } }, { key: "_showUINotification", value: function e(t) { var n = this; if (this._disableNotification) { return } this.l10n.get("toggle_sidebar_notification.title", null, "Toggle Sidebar (document contains outline/attachments)").then(function (e) { n.toggleButton.title = e }); if (!this.isOpen) { this.toggleButton.classList.add(a) } else if (t === this.active) { return } switch (t) { case d.OUTLINE: this.outlineButton.classList.add(a); break; case d.ATTACHMENTS: this.attachmentsButton.classList.add(a); break } } }, { key: "_hideUINotification", value: function e(t) { var n = this; if (this._disableNotification) { return } var i = function e(t) { switch (t) { case d.OUTLINE: n.outlineButton.classList.remove(a); break; case d.ATTACHMENTS: n.attachmentsButton.classList.remove(a); break } }; if (!this.isOpen && t !== null) { return } this.toggleButton.classList.remove(a); if (t !== null) { i(t); return } for (t in d) { i(d[t]) } this.l10n.get("toggle_sidebar.title", null, "Toggle Sidebar").then(function (e) { n.toggleButton.title = e }) } }, { key: "_addEventListeners", value: function e() { var n = this; this.viewerContainer.addEventListener("transitionend", function (e) { if (e.target === n.viewerContainer) { n.outerContainer.classList.remove("sidebarMoving") } }); this.toggleButton.addEventListener("click", function () { n.toggle() }); this.thumbnailButton.addEventListener("click", function () { n.switchView(d.THUMBS) }); this.outlineButton.addEventListener("click", function () { n.switchView(d.OUTLINE) }); this.outlineButton.addEventListener("dblclick", function () { n.eventBus.dispatch("toggleoutlinetree", { source: n }) }); this.attachmentsButton.addEventListener("click", function () { n.switchView(d.ATTACHMENTS) }); this.eventBus._on("outlineloaded", function (e) { var t = e.outlineCount; n.outlineButton.disabled = !t; if (t) { n._showUINotification(d.OUTLINE) } else if (n.active === d.OUTLINE) { n.switchView(d.THUMBS) } }); this.eventBus._on("attachmentsloaded", function (e) { if (e.attachmentsCount) { n.attachmentsButton.disabled = false; n._showUINotification(d.ATTACHMENTS); return } Promise.resolve().then(function () { if (n.attachmentsView.hasChildNodes()) { return } n.attachmentsButton.disabled = true; if (n.active === d.ATTACHMENTS) { n.switchView(d.THUMBS) } }) }); this.eventBus._on("presentationmodechanged", function (e) { if (!e.active && !e.switchInProgress && n.isThumbnailViewVisible) { n._updateThumbnailViewer() } }) } }, { key: "visibleView", get: function e() { return this.isOpen ? this.active : d.NONE } }, { key: "isThumbnailViewVisible", get: function e() { return this.isOpen && this.active === d.THUMBS } }, { key: "isOutlineViewVisible", get: function e() { return this.isOpen && this.active === d.OUTLINE } }, { key: "isAttachmentsViewVisible", get: function e() { return this.isOpen && this.active === d.ATTACHMENTS } }]); return l }(); t.PDFSidebar = o }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.OverlayManager = void 0; var u = i(n(2)); function i(e) { return e && e.__esModule ? e : { default: e } } function l(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function r(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { l(i, t, n, r, a, "next", e) } function a(e) { l(i, t, n, r, a, "throw", e) } r(undefined) }) } } function a(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function o(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) o(e.prototype, t); if (n) o(e, n); return e } var c = function () { function e() { a(this, e); this._overlays = {}; this._active = null; this._keyDownBound = this._keyDown.bind(this) } s(e, [{ key: "register", value: function () { var n = r(u["default"].mark(function e(n, i) { var r, a, o, s = arguments; return u["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: r = s.length > 2 && s[2] !== undefined ? s[2] : null; a = s.length > 3 && s[3] !== undefined ? s[3] : false; if (!(!n || !i || !(o = i.parentNode))) { t.next = 6; break } throw new Error("Not enough parameters."); case 6: if (!this._overlays[n]) { t.next = 8; break } throw new Error("The overlay is already registered."); case 8: this._overlays[n] = { element: i, container: o, callerCloseMethod: r, canForceClose: a }; case 9: case "end": return t.stop() } } }, e, this) })); function e(e, t) { return n.apply(this, arguments) } return e }() }, { key: "unregister", value: function () { var t = r(u["default"].mark(function e(n) { return u["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (this._overlays[n]) { t.next = 4; break } throw new Error("The overlay does not exist."); case 4: if (!(this._active === n)) { t.next = 6; break } throw new Error("The overlay cannot be removed while it is active."); case 6: delete this._overlays[n]; case 7: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "open", value: function () { var t = r(u["default"].mark(function e(n) { return u["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (this._overlays[n]) { t.next = 4; break } throw new Error("The overlay does not exist."); case 4: if (!this._active) { t.next = 14; break } if (!this._overlays[n].canForceClose) { t.next = 9; break } this._closeThroughCaller(); t.next = 14; break; case 9: if (!(this._active === n)) { t.next = 13; break } throw new Error("The overlay is already active."); case 13: throw new Error("Another overlay is currently active."); case 14: this._active = n; this._overlays[this._active].element.classList.remove("hidden"); this._overlays[this._active].container.classList.remove("hidden"); window.addEventListener("keydown", this._keyDownBound); case 18: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "close", value: function () { var t = r(u["default"].mark(function e(n) { return u["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (this._overlays[n]) { t.next = 4; break } throw new Error("The overlay does not exist."); case 4: if (this._active) { t.next = 8; break } throw new Error("The overlay is currently not active."); case 8: if (!(this._active !== n)) { t.next = 10; break } throw new Error("Another overlay is currently active."); case 10: this._overlays[this._active].container.classList.add("hidden"); this._overlays[this._active].element.classList.add("hidden"); this._active = null; window.removeEventListener("keydown", this._keyDownBound); case 14: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "_keyDown", value: function e(t) { if (this._active && t.keyCode === 27) { this._closeThroughCaller(); t.preventDefault() } } }, { key: "_closeThroughCaller", value: function e() { if (this._overlays[this._active].callerCloseMethod) { this._overlays[this._active].callerCloseMethod() } if (this._active) { this.close(this._active) } } }, { key: "active", get: function e() { return this._active } }]); return e }(); t.OverlayManager = c }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PasswordPrompt = void 0; var a = n(5); var i = n(8); function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function r(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) r(e.prototype, t); if (n) r(e, n); return e } var u = function () { function r(e, t) { var n = this; var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : a.NullL10n; o(this, r); this.overlayName = e.overlayName; this.container = e.container; this.label = e.label; this.input = e.input; this.submitButton = e.submitButton; this.cancelButton = e.cancelButton; this.overlayManager = t; this.l10n = i; this.updateCallback = null; this.reason = null; this.submitButton.addEventListener("click", this.verify.bind(this)); this.cancelButton.addEventListener("click", this.close.bind(this)); this.input.addEventListener("keydown", function (e) { if (e.keyCode === 13) { n.verify() } }); this.overlayManager.register(this.overlayName, this.container, this.close.bind(this), true) } s(r, [{ key: "open", value: function e() { var t = this; this.overlayManager.open(this.overlayName).then(function () { t.input.focus(); var e; if (t.reason === i.PasswordResponses.INCORRECT_PASSWORD) { e = t.l10n.get("password_invalid", null, "Invalid password. Please try again.") } else { e = t.l10n.get("password_label", null, "Enter the password to open this PDF file.") } e.then(function (e) { t.label.textContent = e }) }) } }, { key: "close", value: function e() { var t = this; this.overlayManager.close(this.overlayName).then(function () { t.input.value = "" }) } }, { key: "verify", value: function e() { var t = this.input.value; if (t && t.length > 0) { this.close(); this.updateCallback(t) } } }, { key: "setUpdateCallback", value: function e(t, n) { this.updateCallback = t; this.reason = n } }]); return r }(); t.PasswordPrompt = u }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFAttachmentViewer = void 0; var d = n(8); function a(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function o(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var r = function () { function r(e) { var t = e.container, n = e.eventBus, i = e.downloadManager; a(this, r); this.container = t; this.eventBus = n; this.downloadManager = i; this.reset(); this.eventBus._on("fileattachmentannotation", this._appendAttachment.bind(this)) } o(r, [{ key: "reset", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; this.attachments = null; this.container.textContent = ""; if (!t) { this._renderedCapability = (0, d.createPromiseCapability)() } } }, { key: "_dispatchEvent", value: function e(t) { this._renderedCapability.resolve(); this.eventBus.dispatch("attachmentsloaded", { source: this, attachmentsCount: t }) } }, { key: "_bindPdfLink", value: function e(t, n, i) { var r = this; var a; t.onclick = function () { if (!a) { a = URL.createObjectURL(new Blob([n], { type: "application/pdf" })) } var e; e = "?file=" + encodeURIComponent(a + "#" + i); try { window.open(e) } catch (e) { console.error("_bindPdfLink: ".concat(e)); URL.revokeObjectURL(a); a = null; r.downloadManager.downloadData(n, i, "application/pdf") } return false } } }, { key: "_bindLink", value: function e(t, n, i) { var r = this; t.onclick = function () { r.downloadManager.downloadData(n, i, ""); return false } } }, { key: "render", value: function e(t) { var n = t.attachments, i = t.keepRenderedCapability, r = i === void 0 ? false : i; var a = 0; if (this.attachments) { this.reset(r === true) } this.attachments = n || null; if (!n) { this._dispatchEvent(a); return } var o = Object.keys(n).sort(function (e, t) { return e.toLowerCase().localeCompare(t.toLowerCase()) }); a = o.length; for (var s = 0; s < a; s++) { var u = n[o[s]]; var l = (0, d.removeNullCharacters)((0, d.getFilenameFromUrl)(u.filename)); var c = document.createElement("div"); c.className = "attachmentsItem"; var f = document.createElement("button"); f.textContent = l; if (/\.pdf$/i.test(l) && !this.downloadManager.disableCreateObjectURL) { this._bindPdfLink(f, u.content, l) } else { this._bindLink(f, u.content, l) } c.appendChild(f); this.container.appendChild(c) } this._dispatchEvent(a) } }, { key: "_appendAttachment", value: function e(t) { var n = this; var i = t.id, r = t.filename, a = t.content; this._renderedCapability.promise.then(function () { var e = n.attachments; if (!e) { e = Object.create(null) } else { for (var t in e) { if (i === t) { return } } } e[i] = { filename: r, content: a }; n.render({ attachments: e, keepRenderedCapability: true }) }) } }]); return r }(); t.PDFAttachmentViewer = r }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFDocumentProperties = void 0; var d = i(n(2)); var r = n(8); var p = n(5); function i(e) { return e && e.__esModule ? e : { default: e } } function u(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function a(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { u(i, t, n, r, a, "next", e) } function a(e) { u(i, t, n, r, a, "throw", e) } r(undefined) }) } } function v(e, t) { return f(e) || c(e, t) || s(e, t) || o() } function o() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function s(e, t) { if (!e) return; if (typeof e === "string") return l(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return l(e, t) } function l(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function c(e, t) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(e))) return; var n = []; var i = true; var r = false; var a = undefined; try { for (var o = e[Symbol.iterator](), s; !(i = (s = o.next()).done); i = true) { n.push(s.value); if (t && n.length === t) break } } catch (e) { r = true; a = e } finally { try { if (!i && o["return"] != null) o["return"]() } finally { if (r) throw a } } return n } function f(e) { if (Array.isArray(e)) return e } function h(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function g(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function m(e, t, n) { if (t) g(e.prototype, t); if (n) g(e, n); return e } var y = "-"; var b = ["en-us", "en-lr", "my"]; var w = { "8.5x11": "Letter", "8.5x14": "Legal" }; var _ = { "297x420": "A3", "210x297": "A4" }; function P(e, t, n) { var i = t ? e.width : e.height; var r = t ? e.height : e.width; return n["".concat(i, "x").concat(r)] } var S = function () { function l(e, t, n) { var i = this; var r = e.overlayName, a = e.fields, o = e.container, s = e.closeButton; var u = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : p.NullL10n; h(this, l); this.overlayName = r; this.fields = a; this.container = o; this.overlayManager = t; this.l10n = u; this._reset(); s.addEventListener("click", this.close.bind(this)); this.overlayManager.register(this.overlayName, this.container, this.close.bind(this)); n._on("pagechanging", function (e) { i._currentPageNumber = e.pageNumber }); n._on("rotationchanging", function (e) { i._pagesRotation = e.pagesRotation }); this._isNonMetricLocale = true; u.getLanguage().then(function (e) { i._isNonMetricLocale = b.includes(e) }) } m(l, [{ key: "open", value: function e() { var d = this; var h = function e(t) { Object.defineProperty(d, "fieldData", { value: Object.freeze(t), writable: false, enumerable: true, configurable: true }) }; Promise.all([this.overlayManager.open(this.overlayName), this._dataAvailableCapability.promise]).then(function () { var c = d._currentPageNumber; var f = d._pagesRotation; if (d.fieldData && c === d.fieldData._currentPageNumber && f === d.fieldData._pagesRotation) { d._updateUI(); return } d.pdfDocument.getMetadata().then(function (e) { var t = e.info, n = e.metadata, i = e.contentDispositionFilename; return Promise.all([t, n, i || (0, p.getPDFFileNameFromURL)(d.url), d._parseFileSize(d.maybeFileSize), d._parseDate(t.CreationDate), d._parseDate(t.ModDate), d.pdfDocument.getPage(c).then(function (e) { return d._parsePageSize((0, p.getPageSizeInches)(e), f) }), d._parseLinearization(t.IsLinearized)]) }).then(function (e) { var t = v(e, 8), n = t[0], i = t[1], r = t[2], a = t[3], o = t[4], s = t[5], u = t[6], l = t[7]; h({ fileName: r, fileSize: a, title: n.Title, author: n.Author, subject: n.Subject, keywords: n.Keywords, creationDate: o, modificationDate: s, creator: n.Creator, producer: n.Producer, version: n.PDFFormatVersion, pageCount: d.pdfDocument.numPages, pageSize: u, linearized: l, _currentPageNumber: c, _pagesRotation: f }); d._updateUI(); return d.pdfDocument.getDownloadInfo() }).then(function (e) { var t = e.length; d.maybeFileSize = t; return d._parseFileSize(t) }).then(function (e) { if (e === d.fieldData.fileSize) { return } var t = Object.assign(Object.create(null), d.fieldData); t.fileSize = e; h(t); d._updateUI() }) }) } }, { key: "close", value: function e() { this.overlayManager.close(this.overlayName) } }, { key: "setDocument", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; if (this.pdfDocument) { this._reset(); this._updateUI(true) } if (!t) { return } this.pdfDocument = t; this.url = n; this._dataAvailableCapability.resolve() } }, { key: "setFileSize", value: function e(t) { if (Number.isInteger(t) && t > 0) { this.maybeFileSize = t } } }, { key: "_reset", value: function e() { this.pdfDocument = null; this.url = null; this.maybeFileSize = 0; delete this.fieldData; this._dataAvailableCapability = (0, r.createPromiseCapability)(); this._currentPageNumber = 1; this._pagesRotation = 0 } }, { key: "_updateUI", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; if (t || !this.fieldData) { for (var n in this.fields) { this.fields[n].textContent = y } return } if (this.overlayManager.active !== this.overlayName) { return } for (var i in this.fields) { var r = this.fieldData[i]; this.fields[i].textContent = r || r === 0 ? r : y } } }, { key: "_parseFileSize", value: function () { var e = a(d["default"].mark(function e() { var n, i, r = arguments; return d["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: n = r.length > 0 && r[0] !== undefined ? r[0] : 0; i = n / 1024; if (i) { t.next = 6; break } return t.abrupt("return", undefined); case 6: if (!(i < 1024)) { t.next = 8; break } return t.abrupt("return", this.l10n.get("document_properties_kb", { size_kb: (+i.toPrecision(3)).toLocaleString(), size_b: n.toLocaleString() }, "{{size_kb}} KB ({{size_b}} bytes)")); case 8: return t.abrupt("return", this.l10n.get("document_properties_mb", { size_mb: (+(i / 1024).toPrecision(3)).toLocaleString(), size_b: n.toLocaleString() }, "{{size_mb}} MB ({{size_b}} bytes)")); case 9: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }, { key: "_parsePageSize", value: function () { var n = a(d["default"].mark(function e(n, i) { var u = this; var r, a, o, s, l, c, f; return d["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (n) { t.next = 2; break } return t.abrupt("return", undefined); case 2: if (i % 180 !== 0) { n = { width: n.height, height: n.width } } r = (0, p.isPortraitOrientation)(n); a = { width: Math.round(n.width * 100) / 100, height: Math.round(n.height * 100) / 100 }; o = { width: Math.round(n.width * 25.4 * 10) / 10, height: Math.round(n.height * 25.4 * 10) / 10 }; s = null; l = P(a, r, w) || P(o, r, _); if (!l && !(Number.isInteger(o.width) && Number.isInteger(o.height))) { c = { width: n.width * 25.4, height: n.height * 25.4 }; f = { width: Math.round(o.width), height: Math.round(o.height) }; if (Math.abs(c.width - f.width) < .1 && Math.abs(c.height - f.height) < .1) { l = P(f, r, _); if (l) { a = { width: Math.round(f.width / 25.4 * 100) / 100, height: Math.round(f.height / 25.4 * 100) / 100 }; o = f } } } if (l) { s = this.l10n.get("document_properties_page_size_name_" + l.toLowerCase(), null, l) } return t.abrupt("return", Promise.all([this._isNonMetricLocale ? a : o, this.l10n.get("document_properties_page_size_unit_" + (this._isNonMetricLocale ? "inches" : "millimeters"), null, this._isNonMetricLocale ? "in" : "mm"), s, this.l10n.get("document_properties_page_size_orientation_" + (r ? "portrait" : "landscape"), null, r ? "portrait" : "landscape")]).then(function (e) { var t = v(e, 4), n = t[0], i = n.width, r = n.height, a = t[1], o = t[2], s = t[3]; return u.l10n.get("document_properties_page_size_dimension_" + (o ? "name_" : "") + "string", { width: i.toLocaleString(), height: r.toLocaleString(), unit: a, name: o, orientation: s }, "{{width}}  {{height}} {{unit}} (" + (o ? "{{name}}, " : "") + "{{orientation}})") })); case 11: case "end": return t.stop() } } }, e, this) })); function e(e, t) { return n.apply(this, arguments) } return e }() }, { key: "_parseDate", value: function () { var t = a(d["default"].mark(function e(n) { var i; return d["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: i = r.PDFDateString.toDateObject(n); if (i) { t.next = 3; break } return t.abrupt("return", undefined); case 3: return t.abrupt("return", this.l10n.get("document_properties_date_string", { date: i.toLocaleDateString(), time: i.toLocaleTimeString() }, "{{date}}, {{time}}")); case 4: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "_parseLinearization", value: function e(t) { return this.l10n.get("document_properties_linearized_" + (t ? "yes" : "no"), null, t ? "Yes" : "No") } }]); return l }(); t.PDFDocumentProperties = S }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFFindBar = void 0; var u = n(18); var a = n(5); function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var l = 1e3; var r = function () { function r(e, t) { var n = this; var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : a.NullL10n; o(this, r); this.opened = false; this.bar = e.bar || null; this.toggleButton = e.toggleButton || null; this.findField = e.findField || null; this.highlightAll = e.highlightAllCheckbox || null; this.caseSensitive = e.caseSensitiveCheckbox || null; this.entireWord = e.entireWordCheckbox || null; this.findMsg = e.findMsg || null; this.findResultsCount = e.findResultsCount || null; this.findPreviousButton = e.findPreviousButton || null; this.findNextButton = e.findNextButton || null; this.eventBus = t; this.l10n = i; this.toggleButton.addEventListener("click", function () { n.toggle() }); this.findField.addEventListener("input", function () { n.dispatchEvent("") }); this.bar.addEventListener("keydown", function (e) { switch (e.keyCode) { case 13: if (e.target === n.findField) { n.dispatchEvent("again", e.shiftKey) } break; case 27: n.close(); break } }); this.findPreviousButton.addEventListener("click", function () { n.dispatchEvent("again", true) }); this.findNextButton.addEventListener("click", function () { n.dispatchEvent("again", false) }); this.highlightAll.addEventListener("click", function () { n.dispatchEvent("highlightallchange") }); this.caseSensitive.addEventListener("click", function () { n.dispatchEvent("casesensitivitychange") }); this.entireWord.addEventListener("click", function () { n.dispatchEvent("entirewordchange") }); this.eventBus._on("resize", this._adjustWidth.bind(this)) } s(r, [{ key: "reset", value: function e() { this.updateUIState() } }, { key: "dispatchEvent", value: function e(t, n) { this.eventBus.dispatch("find", { source: this, type: t, query: this.findField.value, phraseSearch: true, caseSensitive: this.caseSensitive.checked, entireWord: this.entireWord.checked, highlightAll: this.highlightAll.checked, findPrevious: n }) } }, { key: "updateUIState", value: function e(t, n, i) { var r = this; var a = false; var o = ""; var s = ""; switch (t) { case u.FindState.FOUND: break; case u.FindState.PENDING: s = "pending"; break; case u.FindState.NOT_FOUND: o = this.l10n.get("find_not_found", null, "Phrase not found"); a = true; break; case u.FindState.WRAPPED: if (n) { o = this.l10n.get("find_reached_top", null, "Reached top of document, continued from bottom") } else { o = this.l10n.get("find_reached_bottom", null, "Reached end of document, continued from top") } break }this.findField.classList.toggle("notFound", a); this.findField.setAttribute("data-status", s); Promise.resolve(o).then(function (e) { r.findMsg.textContent = e; r._adjustWidth() }); this.updateResultsCount(i) } }, { key: "updateResultsCount", value: function e() { var t = this; var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, i = n.current, r = i === void 0 ? 0 : i, a = n.total, o = a === void 0 ? 0 : a; if (!this.findResultsCount) { return } var s = l; var u = ""; if (o > 0) { if (o > s) { u = this.l10n.get("find_match_count_limit", { limit: s }, "More than {{limit}} match" + (s !== 1 ? "es" : "")) } else { u = this.l10n.get("find_match_count", { current: r, total: o }, "{{current}} of {{total}} match" + (o !== 1 ? "es" : "")) } } Promise.resolve(u).then(function (e) { t.findResultsCount.textContent = e; t.findResultsCount.classList.toggle("hidden", !o); t._adjustWidth() }) } }, { key: "open", value: function e() { if (!this.opened) { this.opened = true; this.toggleButton.classList.add("toggled"); this.bar.classList.remove("hidden") } this.findField.select(); this.findField.focus(); this._adjustWidth() } }, { key: "close", value: function e() { if (!this.opened) { return } this.opened = false; this.toggleButton.classList.remove("toggled"); this.bar.classList.add("hidden"); this.eventBus.dispatch("findbarclose", { source: this }) } }, { key: "toggle", value: function e() { if (this.opened) { this.close() } else { this.open() } } }, { key: "_adjustWidth", value: function e() { if (!this.opened) { return } this.bar.classList.remove("wrapContainers"); var t = this.bar.clientHeight; var n = this.bar.firstElementChild.clientHeight; if (t > n) { this.bar.classList.add("wrapContainers") } } }]); return r }(); t.PDFFindBar = r }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFFindController = t.FindState = void 0; var u = n(8); var l = n(19); var c = n(5); function r(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function a(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var f = { FOUND: 0, NOT_FOUND: 1, WRAPPED: 2, PENDING: 3 }; t.FindState = f; var o = 250; var d = -50; var h = -400; var s = { "": "'", "": "'", "": "'", "": "'", "": '"', "": '"', "": '"', "": '"', "": "1/4", "": "1/2", "": "3/4" }; var p = null; function v(e) { if (!p) { var t = Object.keys(s).join(""); p = new RegExp("[".concat(t, "]"), "g") } return e.replace(p, function (e) { return s[e] }) } var g = function () { function i(e) { var t = e.linkService, n = e.eventBus; r(this, i); this._linkService = t; this._eventBus = n; this._reset(); n._on("findbarclose", this._onFindBarClose.bind(this)) } a(i, [{ key: "setDocument", value: function e(t) { if (this._pdfDocument) { this._reset() } if (!t) { return } this._pdfDocument = t; this._firstPageCapability.resolve() } }, { key: "executeCommand", value: function e(n, t) { var i = this; if (!t) { return } var r = this._pdfDocument; if (this._state === null || this._shouldDirtyMatch(n, t)) { this._dirtyMatch = true } this._state = t; if (n !== "findhighlightallchange") { this._updateUIState(f.PENDING) } this._firstPageCapability.promise.then(function () { if (!i._pdfDocument || r && i._pdfDocument !== r) { return } i._extractText(); var e = !i._highlightMatches; var t = !!i._findTimeout; if (i._findTimeout) { clearTimeout(i._findTimeout); i._findTimeout = null } if (n === "find") { i._findTimeout = setTimeout(function () { i._nextMatch(); i._findTimeout = null }, o) } else if (i._dirtyMatch) { i._nextMatch() } else if (n === "findagain") { i._nextMatch(); if (e && i._state.highlightAll) { i._updateAllPages() } } else if (n === "findhighlightallchange") { if (t) { i._nextMatch() } else { i._highlightMatches = true } i._updateAllPages() } else { i._nextMatch() } }) } }, { key: "scrollMatchIntoView", value: function e(t) { var n = t.element, i = n === void 0 ? null : n, r = t.pageIndex, a = r === void 0 ? -1 : r, o = t.matchIndex, s = o === void 0 ? -1 : o; if (!this._scrollMatches || !i) { return } else if (s === -1 || s !== this._selected.matchIdx) { return } else if (a === -1 || a !== this._selected.pageIdx) { return } this._scrollMatches = false; var u = { top: d, left: h }; (0, c.scrollIntoView)(i, u, true) } }, { key: "_reset", value: function e() { this._highlightMatches = false; this._scrollMatches = false; this._pdfDocument = null; this._pageMatches = []; this._pageMatchesLength = []; this._state = null; this._selected = { pageIdx: -1, matchIdx: -1 }; this._offset = { pageIdx: null, matchIdx: null, wrapped: false }; this._extractTextPromises = []; this._pageContents = []; this._matchesCountTotal = 0; this._pagesToSearch = null; this._pendingFindMatches = Object.create(null); this._resumePageIdx = null; this._dirtyMatch = false; clearTimeout(this._findTimeout); this._findTimeout = null; this._firstPageCapability = (0, u.createPromiseCapability)() } }, { key: "_shouldDirtyMatch", value: function e(t, n) { if (n.query !== this._state.query) { return true } switch (t) { case "findagain": var i = this._selected.pageIdx + 1; var r = this._linkService; if (i >= 1 && i <= r.pagesCount && i !== r.page && !r.isPageVisible(i)) { return true } return false; case "findhighlightallchange": return false }return true } }, { key: "_prepareMatches", value: function e(a, t, n) { function i(e) { var t = a[e]; var n = a[e + 1]; if (e < a.length - 1 && t.match === n.match) { t.skipped = true; return true } for (var i = e - 1; i >= 0; i--) { var r = a[i]; if (r.skipped) { continue } if (r.match + r.matchLength < t.match) { break } if (r.match + r.matchLength >= t.match + t.matchLength) { t.skipped = true; return true } } return false } a.sort(function (e, t) { return e.match === t.match ? e.matchLength - t.matchLength : e.match - t.match }); for (var r = 0, o = a.length; r < o; r++) { if (i(r)) { continue } t.push(a[r].match); n.push(a[r].matchLength) } } }, { key: "_isEntireWord", value: function e(t, n, i) { if (n > 0) { var r = t.charCodeAt(n); var a = t.charCodeAt(n - 1); if ((0, l.getCharacterType)(r) === (0, l.getCharacterType)(a)) { return false } } var o = n + i - 1; if (o < t.length - 1) { var s = t.charCodeAt(o); var u = t.charCodeAt(o + 1); if ((0, l.getCharacterType)(s) === (0, l.getCharacterType)(u)) { return false } } return true } }, { key: "_calculatePhraseMatch", value: function e(t, n, i, r) { var a = []; var o = t.length; var s = -o; while (true) { s = i.indexOf(t, s + o); if (s === -1) { break } if (r && !this._isEntireWord(i, s, o)) { continue } a.push(s) } this._pageMatches[n] = a } }, { key: "_calculateWordMatch", value: function e(t, n, i, r) { var a = []; var o = t.match(/\S+/g); for (var s = 0, u = o.length; s < u; s++) { var l = o[s]; var c = l.length; var f = -c; while (true) { f = i.indexOf(l, f + c); if (f === -1) { break } if (r && !this._isEntireWord(i, f, c)) { continue } a.push({ match: f, matchLength: c, skipped: false }) } } this._pageMatchesLength[n] = []; this._pageMatches[n] = []; this._prepareMatches(a, this._pageMatches[n], this._pageMatchesLength[n]) } }, { key: "_calculateMatch", value: function e(t) { var n = this._pageContents[t]; var i = this._query; var r = this._state, a = r.caseSensitive, o = r.entireWord, s = r.phraseSearch; if (i.length === 0) { return } if (!a) { n = n.toLowerCase(); i = i.toLowerCase() } if (s) { this._calculatePhraseMatch(i, t, n, o) } else { this._calculateWordMatch(i, t, n, o) } if (this._state.highlightAll) { this._updatePage(t) } if (this._resumePageIdx === t) { this._resumePageIdx = null; this._nextPageMatch() } var u = this._pageMatches[t].length; if (u > 0) { this._matchesCountTotal += u; this._updateUIResultsCount() } } }, { key: "_extractText", value: function e() { var s = this; if (this._extractTextPromises.length > 0) { return } var n = Promise.resolve(); var t = function e(a, t) { var o = (0, u.createPromiseCapability)(); s._extractTextPromises[a] = o.promise; n = n.then(function () { return s._pdfDocument.getPage(a + 1).then(function (e) { return e.getTextContent({ normalizeWhitespace: true }) }).then(function (e) { var t = e.items; var n = []; for (var i = 0, r = t.length; i < r; i++) { n.push(t[i].str) } s._pageContents[a] = v(n.join("")); o.resolve(a) }, function (e) { console.error("Unable to get text content for page ".concat(a + 1), e); s._pageContents[a] = ""; o.resolve(a) }) }) }; for (var i = 0, r = this._linkService.pagesCount; i < r; i++) { t(i, r) } } }, { key: "_updatePage", value: function e(t) { if (this._scrollMatches && this._selected.pageIdx === t) { this._linkService.page = t + 1 } this._eventBus.dispatch("updatetextlayermatches", { source: this, pageIndex: t }) } }, { key: "_updateAllPages", value: function e() { this._eventBus.dispatch("updatetextlayermatches", { source: this, pageIndex: -1 }) } }, { key: "_nextMatch", value: function e() { var t = this; var n = this._state.findPrevious; var i = this._linkService.page - 1; var r = this._linkService.pagesCount; this._highlightMatches = true; if (this._dirtyMatch) { this._dirtyMatch = false; this._selected.pageIdx = this._selected.matchIdx = -1; this._offset.pageIdx = i; this._offset.matchIdx = null; this._offset.wrapped = false; this._resumePageIdx = null; this._pageMatches.length = 0; this._pageMatchesLength.length = 0; this._matchesCountTotal = 0; this._updateAllPages(); for (var a = 0; a < r; a++) { if (this._pendingFindMatches[a] === true) { continue } this._pendingFindMatches[a] = true; this._extractTextPromises[a].then(function (e) { delete t._pendingFindMatches[e]; t._calculateMatch(e) }) } } if (this._query === "") { this._updateUIState(f.FOUND); return } if (this._resumePageIdx) { return } var o = this._offset; this._pagesToSearch = r; if (o.matchIdx !== null) { var s = this._pageMatches[o.pageIdx].length; if (!n && o.matchIdx + 1 < s || n && o.matchIdx > 0) { o.matchIdx = n ? o.matchIdx - 1 : o.matchIdx + 1; this._updateMatch(true); return } this._advanceOffsetPage(n) } this._nextPageMatch() } }, { key: "_matchesReady", value: function e(t) { var n = this._offset; var i = t.length; var r = this._state.findPrevious; if (i) { n.matchIdx = r ? i - 1 : 0; this._updateMatch(true); return true } this._advanceOffsetPage(r); if (n.wrapped) { n.matchIdx = null; if (this._pagesToSearch < 0) { this._updateMatch(false); return true } } return false } }, { key: "_nextPageMatch", value: function e() { if (this._resumePageIdx !== null) { console.error("There can only be one pending page.") } var t = null; do { var n = this._offset.pageIdx; t = this._pageMatches[n]; if (!t) { this._resumePageIdx = n; break } } while (!this._matchesReady(t)) } }, { key: "_advanceOffsetPage", value: function e(t) { var n = this._offset; var i = this._linkService.pagesCount; n.pageIdx = t ? n.pageIdx - 1 : n.pageIdx + 1; n.matchIdx = null; this._pagesToSearch--; if (n.pageIdx >= i || n.pageIdx < 0) { n.pageIdx = t ? i - 1 : 0; n.wrapped = true } } }, { key: "_updateMatch", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; var n = f.NOT_FOUND; var i = this._offset.wrapped; this._offset.wrapped = false; if (t) { var r = this._selected.pageIdx; this._selected.pageIdx = this._offset.pageIdx; this._selected.matchIdx = this._offset.matchIdx; n = i ? f.WRAPPED : f.FOUND; if (r !== -1 && r !== this._selected.pageIdx) { this._updatePage(r) } } this._updateUIState(n, this._state.findPrevious); if (this._selected.pageIdx !== -1) { this._scrollMatches = true; this._updatePage(this._selected.pageIdx) } } }, { key: "_onFindBarClose", value: function e(t) { var n = this; var i = this._pdfDocument; this._firstPageCapability.promise.then(function () { if (!n._pdfDocument || i && n._pdfDocument !== i) { return } if (n._findTimeout) { clearTimeout(n._findTimeout); n._findTimeout = null } if (n._resumePageIdx) { n._resumePageIdx = null; n._dirtyMatch = true } n._updateUIState(f.FOUND); n._highlightMatches = false; n._updateAllPages() }) } }, { key: "_requestMatchesCount", value: function e() { var t = this._selected, n = t.pageIdx, i = t.matchIdx; var r = 0, a = this._matchesCountTotal; if (i !== -1) { for (var o = 0; o < n; o++) { r += this._pageMatches[o] && this._pageMatches[o].length || 0 } r += i + 1 } if (r < 1 || r > a) { r = a = 0 } return { current: r, total: a } } }, { key: "_updateUIResultsCount", value: function e() { this._eventBus.dispatch("updatefindmatchescount", { source: this, matchesCount: this._requestMatchesCount() }) } }, { key: "_updateUIState", value: function e(t, n) { this._eventBus.dispatch("updatefindcontrolstate", { source: this, state: t, previous: n, matchesCount: this._requestMatchesCount() }) } }, { key: "highlightMatches", get: function e() { return this._highlightMatches } }, { key: "pageMatches", get: function e() { return this._pageMatches } }, { key: "pageMatchesLength", get: function e() { return this._pageMatchesLength } }, { key: "selected", get: function e() { return this._selected } }, { key: "state", get: function e() { return this._state } }, { key: "_query", get: function e() { if (this._state.query !== this._rawQuery) { this._rawQuery = this._state.query; this._normalizedQuery = v(this._state.query) } return this._normalizedQuery } }]); return i }(); t.PDFFindController = g }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.getCharacterType = p; t.CharacterType = void 0; var i = { SPACE: 0, ALPHA_LETTER: 1, PUNCT: 2, HAN_LETTER: 3, KATAKANA_LETTER: 4, HIRAGANA_LETTER: 5, HALFWIDTH_KATAKANA_LETTER: 6, THAI_LETTER: 7 }; t.CharacterType = i; function r(e) { return e < 11904 } function a(e) { return (e & 65408) === 0 } function o(e) { return e >= 97 && e <= 122 || e >= 65 && e <= 90 } function s(e) { return e >= 48 && e <= 57 } function u(e) { return e === 32 || e === 9 || e === 13 || e === 10 } function l(e) { return e >= 13312 && e <= 40959 || e >= 63744 && e <= 64255 } function c(e) { return e >= 12448 && e <= 12543 } function f(e) { return e >= 12352 && e <= 12447 } function d(e) { return e >= 65376 && e <= 65439 } function h(e) { return (e & 65408) === 3584 } function p(e) { if (r(e)) { if (a(e)) { if (u(e)) { return i.SPACE } else if (o(e) || s(e) || e === 95) { return i.ALPHA_LETTER } return i.PUNCT } else if (h(e)) { return i.THAI_LETTER } else if (e === 160) { return i.SPACE } return i.ALPHA_LETTER } if (l(e)) { return i.HAN_LETTER } else if (c(e)) { return i.KATAKANA_LETTER } else if (f(e)) { return i.HIRAGANA_LETTER } else if (d(e)) { return i.HALFWIDTH_KATAKANA_LETTER } return i.ALPHA_LETTER } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.isDestHashesEqual = b; t.isDestArraysEqual = w; t.PDFHistory = void 0; var f = n(5); function o(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { o = function e(t) { return typeof t } } else { o = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return o(e) } function s(e, t) { return l(e) || u(e, t) || r(e, t) || i() } function i() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } function r(e, t) { if (!e) return; if (typeof e === "string") return a(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return a(e, t) } function a(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function u(e, t) { if (typeof Symbol === "undefined" || !(Symbol.iterator in Object(e))) return; var n = []; var i = true; var r = false; var a = undefined; try { for (var o = e[Symbol.iterator](), s; !(i = (s = o.next()).done); i = true) { n.push(s.value); if (t && n.length === t) break } } catch (e) { r = true; a = e } finally { try { if (!i && o["return"] != null) o["return"]() } finally { if (r) throw a } } return n } function l(e) { if (Array.isArray(e)) return e } function c(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function d(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function h(e, t, n) { if (t) d(e.prototype, t); if (n) d(e, n); return e } var p = 1e3; var v = 50; var g = 1e3; function m() { return document.location.hash } var y = function () { function r(e) { var n = this; var t = e.linkService, i = e.eventBus; c(this, r); this.linkService = t; this.eventBus = i; this._initialized = false; this._fingerprint = ""; this.reset(); this._boundEvents = null; this._isViewerInPresentationMode = false; this.eventBus._on("presentationmodechanged", function (e) { n._isViewerInPresentationMode = e.active || e.switchInProgress }); this.eventBus._on("pagesinit", function () { n._isPagesLoaded = false; var e = function e(t) { n.eventBus._off("pagesloaded", e); n._isPagesLoaded = !!t.pagesCount }; n.eventBus._on("pagesloaded", e) }) } h(r, [{ key: "initialize", value: function e(t) { var n = t.fingerprint, i = t.resetHistory, r = i === void 0 ? false : i, a = t.updateUrl, o = a === void 0 ? false : a; if (!n || typeof n !== "string") { console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.'); return } if (this._initialized) { this.reset() } var s = this._fingerprint !== "" && this._fingerprint !== n; this._fingerprint = n; this._updateUrl = o === true; this._initialized = true; this._bindEvents(); var u = window.history.state; this._popStateInProgress = false; this._blockHashChange = 0; this._currentHash = m(); this._numPositionUpdates = 0; this._uid = this._maxUid = 0; this._destination = null; this._position = null; if (!this._isValidState(u, true) || r) { var l = this._parseCurrentHash(true), c = l.hash, f = l.page, d = l.rotation; if (!c || s || r) { this._pushOrReplaceState(null, true); return } this._pushOrReplaceState({ hash: c, page: f, rotation: d }, true); return } var h = u.destination; this._updateInternalState(h, u.uid, true); if (this._uid > this._maxUid) { this._maxUid = this._uid } if (h.rotation !== undefined) { this._initialRotation = h.rotation } if (h.dest) { this._initialBookmark = JSON.stringify(h.dest); this._destination.page = null } else if (h.hash) { this._initialBookmark = h.hash } else if (h.page) { this._initialBookmark = "page=".concat(h.page) } } }, { key: "reset", value: function e() { if (this._initialized) { this._pageHide(); this._initialized = false; this._unbindEvents() } if (this._updateViewareaTimeout) { clearTimeout(this._updateViewareaTimeout); this._updateViewareaTimeout = null } this._initialBookmark = null; this._initialRotation = null } }, { key: "push", value: function e(t) { var n = this; var i = t.namedDest, r = i === void 0 ? null : i, a = t.explicitDest, o = t.pageNumber; if (!this._initialized) { return } if (r && typeof r !== "string") { console.error("PDFHistory.push: " + '"'.concat(r, '" is not a valid namedDest parameter.')); return } else if (!Array.isArray(a)) { console.error("PDFHistory.push: " + '"'.concat(a, '" is not a valid explicitDest parameter.')); return } else if (!(Number.isInteger(o) && o > 0 && o <= this.linkService.pagesCount)) { if (o !== null || this._destination) { console.error("PDFHistory.push: " + '"'.concat(o, '" is not a valid pageNumber parameter.')); return } } var s = r || JSON.stringify(a); if (!s) { return } var u = false; if (this._destination && (b(this._destination.hash, s) || w(this._destination.dest, a))) { if (this._destination.page) { return } u = true } if (this._popStateInProgress && !u) { return } this._pushOrReplaceState({ dest: a, hash: s, page: o, rotation: this.linkService.rotation }, u); if (!this._popStateInProgress) { this._popStateInProgress = true; Promise.resolve().then(function () { n._popStateInProgress = false }) } } }, { key: "pushCurrentPosition", value: function e() { if (!this._initialized || this._popStateInProgress) { return } this._tryPushCurrentPosition() } }, { key: "back", value: function e() { if (!this._initialized || this._popStateInProgress) { return } var t = window.history.state; if (this._isValidState(t) && t.uid > 0) { window.history.back() } } }, { key: "forward", value: function e() { if (!this._initialized || this._popStateInProgress) { return } var t = window.history.state; if (this._isValidState(t) && t.uid < this._maxUid) { window.history.forward() } } }, { key: "_pushOrReplaceState", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; var i = n || !this._destination; var r = { fingerprint: this._fingerprint, uid: i ? this._uid : this._uid + 1, destination: t }; this._updateInternalState(t, r.uid); var a; if (this._updateUrl && t && t.hash) { var o = document.location.href.split("#")[0]; if (!o.startsWith("file://")) { a = "".concat(o, "#").concat(t.hash) } } if (i) { window.history.replaceState(r, "", a) } else { this._maxUid = this._uid; window.history.pushState(r, "", a) } } }, { key: "_tryPushCurrentPosition", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; if (!this._position) { return } var n = this._position; if (t) { n = Object.assign(Object.create(null), this._position); n.temporary = true } if (!this._destination) { this._pushOrReplaceState(n); return } if (this._destination.temporary) { this._pushOrReplaceState(n, true); return } if (this._destination.hash === n.hash) { return } if (!this._destination.page && (v <= 0 || this._numPositionUpdates <= v)) { return } var i = false; if (this._destination.page >= n.first && this._destination.page <= n.page) { if (this._destination.dest || !this._destination.first) { return } i = true } this._pushOrReplaceState(n, i) } }, { key: "_isValidState", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; if (!t) { return false } if (t.fingerprint !== this._fingerprint) { if (n) { if (typeof t.fingerprint !== "string" || t.fingerprint.length !== this._fingerprint.length) { return false } var i = performance.getEntriesByType("navigation"), r = s(i, 1), a = r[0]; if (!a || a.type !== "reload") { return false } } else { return false } } if (!Number.isInteger(t.uid) || t.uid < 0) { return false } if (t.destination === null || o(t.destination) !== "object") { return false } return true } }, { key: "_updateInternalState", value: function e(t, n) { var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false; if (this._updateViewareaTimeout) { clearTimeout(this._updateViewareaTimeout); this._updateViewareaTimeout = null } if (i && t && t.temporary) { delete t.temporary } this._destination = t; this._uid = n; this._numPositionUpdates = 0 } }, { key: "_parseCurrentHash", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; var n = unescape(m()).substring(1); var i = (0, f.parseQueryString)(n); var r = i.nameddest || ""; var a = i.page | 0; if (!(Number.isInteger(a) && a > 0 && a <= this.linkService.pagesCount) || t && r.length > 0) { a = null } return { hash: n, page: a, rotation: this.linkService.rotation } } }, { key: "_updateViewarea", value: function e(t) { var n = this; var i = t.location; if (this._updateViewareaTimeout) { clearTimeout(this._updateViewareaTimeout); this._updateViewareaTimeout = null } this._position = { hash: this._isViewerInPresentationMode ? "page=".concat(i.pageNumber) : i.pdfOpenParams.substring(1), page: this.linkService.page, first: i.pageNumber, rotation: i.rotation }; if (this._popStateInProgress) { return } if (v > 0 && this._isPagesLoaded && this._destination && !this._destination.page) { this._numPositionUpdates++ } if (g > 0) { this._updateViewareaTimeout = setTimeout(function () { if (!n._popStateInProgress) { n._tryPushCurrentPosition(true) } n._updateViewareaTimeout = null }, g) } } }, { key: "_popState", value: function e(t) { var n = this; var i = t.state; var r = m(), a = this._currentHash !== r; this._currentHash = r; if (!i) { this._uid++; var o = this._parseCurrentHash(), s = o.hash, u = o.page, l = o.rotation; this._pushOrReplaceState({ hash: s, page: u, rotation: l }, true); return } if (!this._isValidState(i)) { return } this._popStateInProgress = true; if (a) { this._blockHashChange++; (0, f.waitOnEventOrTimeout)({ target: window, name: "hashchange", delay: p }).then(function () { n._blockHashChange-- }) } var c = i.destination; this._updateInternalState(c, i.uid, true); if (this._uid > this._maxUid) { this._maxUid = this._uid } if ((0, f.isValidRotation)(c.rotation)) { this.linkService.rotation = c.rotation } if (c.dest) { this.linkService.navigateTo(c.dest) } else if (c.hash) { this.linkService.setHash(c.hash) } else if (c.page) { this.linkService.page = c.page } Promise.resolve().then(function () { n._popStateInProgress = false }) } }, { key: "_pageHide", value: function e() { if (!this._destination || this._destination.temporary) { this._tryPushCurrentPosition() } } }, { key: "_bindEvents", value: function e() { if (this._boundEvents) { return } this._boundEvents = { updateViewarea: this._updateViewarea.bind(this), popState: this._popState.bind(this), pageHide: this._pageHide.bind(this) }; this.eventBus._on("updateviewarea", this._boundEvents.updateViewarea); window.addEventListener("popstate", this._boundEvents.popState); window.addEventListener("pagehide", this._boundEvents.pageHide) } }, { key: "_unbindEvents", value: function e() { if (!this._boundEvents) { return } this.eventBus._off("updateviewarea", this._boundEvents.updateViewarea); window.removeEventListener("popstate", this._boundEvents.popState); window.removeEventListener("pagehide", this._boundEvents.pageHide); this._boundEvents = null } }, { key: "popStateInProgress", get: function e() { return this._initialized && (this._popStateInProgress || this._blockHashChange > 0) } }, { key: "initialBookmark", get: function e() { return this._initialized ? this._initialBookmark : null } }, { key: "initialRotation", get: function e() { return this._initialized ? this._initialRotation : null } }]); return r }(); t.PDFHistory = y; function b(e, t) { if (typeof e !== "string" || typeof t !== "string") { return false } if (e === t) { return true } var n = (0, f.parseQueryString)(e), i = n.nameddest; if (i === t) { return true } return false } function w(e, t) { function i(e, t) { if (o(e) !== o(t)) { return false } if (Array.isArray(e) || Array.isArray(t)) { return false } if (e !== null && o(e) === "object" && t !== null) { if (Object.keys(e).length !== Object.keys(t).length) { return false } for (var n in e) { if (!i(e[n], t[n])) { return false } } return true } return e === t || Number.isNaN(e) && Number.isNaN(t) } if (!(Array.isArray(e) && Array.isArray(t))) { return false } if (e.length !== t.length) { return false } for (var n = 0, r = e.length; n < r; n++) { if (!i(e[n], t[n])) { return false } } return true } }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.SimpleLinkService = t.PDFLinkService = void 0; var u = n(5); function s(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { s = function e(t) { return typeof t } } else { s = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return s(e) } function f(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function r(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var a = function () { function c() { var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {}, t = e.eventBus, n = e.externalLinkTarget, i = n === void 0 ? null : n, r = e.externalLinkRel, a = r === void 0 ? null : r, o = e.externalLinkEnabled, s = o === void 0 ? true : o, u = e.ignoreDestinationZoom, l = u === void 0 ? false : u; f(this, c); this.eventBus = t; this.externalLinkTarget = i; this.externalLinkRel = a; this.externalLinkEnabled = s; this._ignoreDestinationZoom = l; this.baseUrl = null; this.pdfDocument = null; this.pdfViewer = null; this.pdfHistory = null; this._pagesRefCache = null } r(c, [{ key: "setDocument", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null; this.baseUrl = n; this.pdfDocument = t; this._pagesRefCache = Object.create(null) } }, { key: "setViewer", value: function e(t) { this.pdfViewer = t } }, { key: "setHistory", value: function e(t) { this.pdfHistory = t } }, { key: "navigateTo", value: function e(o) { var s = this; var t = function t(e) { var n = e.namedDest, i = e.explicitDest; var r = i[0]; var a; if (r instanceof Object) { a = s._cachedPageNumber(r); if (a === null) { s.pdfDocument.getPageIndex(r).then(function (e) { s.cachePageRef(e + 1, r); t({ namedDest: n, explicitDest: i }) })["catch"](function () { console.error('PDFLinkService.navigateTo: "'.concat(r, '" is not ') + 'a valid page reference, for dest="'.concat(o, '".')) }); return } } else if (Number.isInteger(r)) { a = r + 1 } else { console.error('PDFLinkService.navigateTo: "'.concat(r, '" is not ') + 'a valid destination reference, for dest="'.concat(o, '".')); return } if (!a || a < 1 || a > s.pagesCount) { console.error('PDFLinkService.navigateTo: "'.concat(a, '" is not ') + 'a valid page number, for dest="'.concat(o, '".')); return } if (s.pdfHistory) { s.pdfHistory.pushCurrentPosition(); s.pdfHistory.push({ namedDest: n, explicitDest: i, pageNumber: a }) } s.pdfViewer.scrollPageIntoView({ pageNumber: a, destArray: i, ignoreDestinationZoom: s._ignoreDestinationZoom }) }; new Promise(function (t, e) { if (typeof o === "string") { s.pdfDocument.getDestination(o).then(function (e) { t({ namedDest: o, explicitDest: e }) }); return } t({ namedDest: "", explicitDest: o }) }).then(function (e) { if (!Array.isArray(e.explicitDest)) { console.error('PDFLinkService.navigateTo: "'.concat(e.explicitDest, '" is') + ' not a valid destination array, for dest="'.concat(o, '".')); return } t(e) }) } }, { key: "getDestinationHash", value: function e(t) { if (typeof t === "string") { return this.getAnchorUrl("#" + escape(t)) } if (Array.isArray(t)) { var n = JSON.stringify(t); return this.getAnchorUrl("#" + escape(n)) } return this.getAnchorUrl("") } }, { key: "getAnchorUrl", value: function e(t) { return (this.baseUrl || "") + t } }, { key: "setHash", value: function e(t) { var n, i; if (t.includes("=")) { var r = (0, u.parseQueryString)(t); if ("search" in r) { this.eventBus.dispatch("findfromurlhash", { source: this, query: r.search.replace(/"/g, ""), phraseSearch: r.phrase === "true" }) } if ("page" in r) { n = r.page | 0 || 1 } if ("zoom" in r) { var a = r.zoom.split(","); var o = a[0]; var s = parseFloat(o); if (!o.includes("Fit")) { i = [null, { name: "XYZ" }, a.length > 1 ? a[1] | 0 : null, a.length > 2 ? a[2] | 0 : null, s ? s / 100 : o] } else { if (o === "Fit" || o === "FitB") { i = [null, { name: o }] } else if (o === "FitH" || o === "FitBH" || o === "FitV" || o === "FitBV") { i = [null, { name: o }, a.length > 1 ? a[1] | 0 : null] } else if (o === "FitR") { if (a.length !== 5) { console.error('PDFLinkService.setHash: Not enough parameters for "FitR".') } else { i = [null, { name: o }, a[1] | 0, a[2] | 0, a[3] | 0, a[4] | 0] } } else { console.error('PDFLinkService.setHash: "'.concat(o, '" is not ') + "a valid zoom value.") } } } if (i) { this.pdfViewer.scrollPageIntoView({ pageNumber: n || this.page, destArray: i, allowNegativeOffset: true }) } else if (n) { this.page = n } if ("pagemode" in r) { this.eventBus.dispatch("pagemode", { source: this, mode: r.pagemode }) } if ("nameddest" in r) { this.navigateTo(r.nameddest) } } else { i = unescape(t); try { i = JSON.parse(i); if (!Array.isArray(i)) { i = i.toString() } } catch (e) { } if (typeof i === "string" || l(i)) { this.navigateTo(i); return } console.error('PDFLinkService.setHash: "'.concat(unescape(t), '" is not ') + "a valid destination.") } } }, { key: "executeNamedAction", value: function e(t) { switch (t) { case "GoBack": if (this.pdfHistory) { this.pdfHistory.back() } break; case "GoForward": if (this.pdfHistory) { this.pdfHistory.forward() } break; case "NextPage": if (this.page < this.pagesCount) { this.page++ } break; case "PrevPage": if (this.page > 1) { this.page-- } break; case "LastPage": this.page = this.pagesCount; break; case "FirstPage": this.page = 1; break; default: break }this.eventBus.dispatch("namedaction", { source: this, action: t }) } }, { key: "cachePageRef", value: function e(t, n) { if (!n) { return } var i = n.gen === 0 ? "".concat(n.num, "R") : "".concat(n.num, "R").concat(n.gen); this._pagesRefCache[i] = t } }, { key: "_cachedPageNumber", value: function e(t) { var n = t.gen === 0 ? "".concat(t.num, "R") : "".concat(t.num, "R").concat(t.gen); return this._pagesRefCache && this._pagesRefCache[n] || null } }, { key: "isPageVisible", value: function e(t) { return this.pdfViewer.isPageVisible(t) } }, { key: "pagesCount", get: function e() { return this.pdfDocument ? this.pdfDocument.numPages : 0 } }, { key: "page", get: function e() { return this.pdfViewer.currentPageNumber }, set: function e(t) { this.pdfViewer.currentPageNumber = t } }, { key: "rotation", get: function e() { return this.pdfViewer.pagesRotation }, set: function e(t) { this.pdfViewer.pagesRotation = t } }]); return c }(); t.PDFLinkService = a; function l(e) { if (!Array.isArray(e)) { return false } var t = e.length; if (t < 2) { return false } var n = e[0]; if (!(s(n) === "object" && Number.isInteger(n.num) && Number.isInteger(n.gen)) && !(Number.isInteger(n) && n >= 0)) { return false } var i = e[1]; if (!(s(i) === "object" && typeof i.name === "string")) { return false } var r = true; switch (i.name) { case "XYZ": if (t !== 5) { return false } break; case "Fit": case "FitB": return t === 2; case "FitH": case "FitBH": case "FitV": case "FitBV": if (t !== 3) { return false } break; case "FitR": if (t !== 6) { return false } r = false; break; default: return false }for (var a = 2; a < t; a++) { var o = e[a]; if (!(typeof o === "number" || r && o === null)) { return false } } return true } var o = function () { function e() { f(this, e); this.externalLinkTarget = null; this.externalLinkRel = null; this.externalLinkEnabled = true; this._ignoreDestinationZoom = false } r(e, [{ key: "navigateTo", value: function e(t) { } }, { key: "getDestinationHash", value: function e(t) { return "#" } }, { key: "getAnchorUrl", value: function e(t) { return "#" } }, { key: "setHash", value: function e(t) { } }, { key: "executeNamedAction", value: function e(t) { } }, { key: "cachePageRef", value: function e(t, n) { } }, { key: "isPageVisible", value: function e(t) { return true } }, { key: "pagesCount", get: function e() { return 0 } }, { key: "page", get: function e() { return 0 }, set: function e(t) { } }, { key: "rotation", get: function e() { return 0 }, set: function e(t) { } }]); return e }(); t.SimpleLinkService = o }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFOutlineViewer = void 0; var p = n(8); function v(t, e) { var n; if (typeof Symbol === "undefined" || t[Symbol.iterator] == null) { if (Array.isArray(t) || (n = u(t)) || e && t && typeof t.length === "number") { if (n) t = n; var i = 0; var r = function e() { }; return { s: r, n: function e() { if (i >= t.length) return { done: true }; return { done: false, value: t[i++] } }, e: function e(t) { throw t }, f: r } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var a = true, o = false, s; return { s: function e() { n = t[Symbol.iterator]() }, n: function e() { var t = n.next(); a = t.done; return t }, e: function e(t) { o = true; s = t }, f: function e() { try { if (!a && n["return"] != null) n["return"]() } finally { if (o) throw s } } } } function u(e, t) { if (!e) return; if (typeof e === "string") return i(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return i(e, t) } function i(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function a(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function r(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function o(e, t, n) { if (t) r(e.prototype, t); if (n) r(e, n); return e } var g = ""; var s = function () { function r(e) { var t = e.container, n = e.linkService, i = e.eventBus; a(this, r); this.container = t; this.linkService = n; this.eventBus = i; this.reset(); i._on("toggleoutlinetree", this.toggleOutlineTree.bind(this)) } o(r, [{ key: "reset", value: function e() { this.outline = null; this.lastToggleIsShow = true; this.container.textContent = ""; this.container.classList.remove("outlineWithDeepNesting") } }, { key: "_dispatchEvent", value: function e(t) { this.eventBus.dispatch("outlineloaded", { source: this, outlineCount: t }) } }, { key: "_bindLink", value: function e(t, n) { var i = n.url, r = n.newWindow, a = n.dest; var o = this.linkService; if (i) { (0, p.addLinkAttributes)(t, { url: i, target: r ? p.LinkTarget.BLANK : o.externalLinkTarget, rel: o.externalLinkRel, enabled: o.externalLinkEnabled }); return } t.href = o.getDestinationHash(a); t.onclick = function () { if (a) { o.navigateTo(a) } return false } } }, { key: "_setStyles", value: function e(t, n) { var i = n.bold, r = n.italic; if (i) { t.style.fontWeight = "bold" } if (r) { t.style.fontStyle = "italic" } } }, { key: "_addToggleButton", value: function e(n, t) { var i = this; var r = t.count, a = t.items; var o = document.createElement("div"); o.className = "outlineItemToggler"; if (r < 0 && Math.abs(r) === a.length) { o.classList.add("outlineItemsHidden") } o.onclick = function (e) { e.stopPropagation(); o.classList.toggle("outlineItemsHidden"); if (e.shiftKey) { var t = !o.classList.contains("outlineItemsHidden"); i._toggleOutlineItem(n, t) } }; n.insertBefore(o, n.firstChild) } }, { key: "_toggleOutlineItem", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; this.lastToggleIsShow = n; var i = v(t.querySelectorAll(".outlineItemToggler")), r; try { for (i.s(); !(r = i.n()).done;) { var a = r.value; a.classList.toggle("outlineItemsHidden", !n) } } catch (e) { i.e(e) } finally { i.f() } } }, { key: "toggleOutlineTree", value: function e() { if (!this.outline) { return } this._toggleOutlineItem(this.container, !this.lastToggleIsShow) } }, { key: "render", value: function e(t) { var n = t.outline; var i = 0; if (this.outline) { this.reset() } this.outline = n || null; if (!n) { this._dispatchEvent(i); return } var r = document.createDocumentFragment(); var a = [{ parent: r, items: this.outline }]; var o = false; while (a.length > 0) { var s = a.shift(); var u = v(s.items), l; try { for (u.s(); !(l = u.n()).done;) { var c = l.value; var f = document.createElement("div"); f.className = "outlineItem"; var d = document.createElement("a"); this._bindLink(d, c); this._setStyles(d, c); d.textContent = (0, p.removeNullCharacters)(c.title) || g; f.appendChild(d); if (c.items.length > 0) { o = true; this._addToggleButton(f, c); var h = document.createElement("div"); h.className = "outlineItems"; f.appendChild(h); a.push({ parent: h, items: c.items }) } s.parent.appendChild(f); i++ } } catch (e) { u.e(e) } finally { u.f() } } if (o) { this.container.classList.add("outlineWithDeepNesting"); this.lastToggleIsShow = r.querySelectorAll(".outlineItemsHidden").length === 0 } this.container.appendChild(r); this._dispatchEvent(i) } }]); return r }(); t.PDFOutlineViewer = s }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFPresentationMode = void 0; var u = n(5); function l(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function r(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var a = 1500; var o = 3e3; var c = "pdfPresentationMode"; var f = "pdfPresentationModeControls"; var d = 50; var h = .1; var p = 50; var v = Math.PI / 6; var s = function () { function s(e) { var t = this; var n = e.container, i = e.pdfViewer, r = e.eventBus, a = e.contextMenuItems, o = a === void 0 ? null : a; l(this, s); this.container = n; this.pdfViewer = i; this.eventBus = r; this.active = false; this.args = null; this.contextMenuOpen = false; this.mouseScrollTimeStamp = 0; this.mouseScrollDelta = 0; this.touchSwipeState = null; if (o) { o.contextFirstPage.addEventListener("click", function () { t.contextMenuOpen = false; t.eventBus.dispatch("firstpage", { source: t }) }); o.contextLastPage.addEventListener("click", function () { t.contextMenuOpen = false; t.eventBus.dispatch("lastpage", { source: t }) }); o.contextPageRotateCw.addEventListener("click", function () { t.contextMenuOpen = false; t.eventBus.dispatch("rotatecw", { source: t }) }); o.contextPageRotateCcw.addEventListener("click", function () { t.contextMenuOpen = false; t.eventBus.dispatch("rotateccw", { source: t }) }) } } r(s, [{ key: "request", value: function e() { if (this.switchInProgress || this.active || !this.pdfViewer.pagesCount) { return false } this._addFullscreenChangeListeners(); this._setSwitchInProgress(); this._notifyStateChange(); if (this.container.requestFullscreen) { this.container.requestFullscreen() } else if (this.container.mozRequestFullScreen) { this.container.mozRequestFullScreen() } else if (this.container.webkitRequestFullscreen) { this.container.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT) } else if (this.container.msRequestFullscreen) { this.container.msRequestFullscreen() } else { return false } this.args = { page: this.pdfViewer.currentPageNumber, previousScale: this.pdfViewer.currentScaleValue }; return true } }, { key: "_mouseWheel", value: function e(t) { if (!this.active) { return } t.preventDefault(); var n = (0, u.normalizeWheelEventDelta)(t); var i = (new Date).getTime(); var r = this.mouseScrollTimeStamp; if (i > r && i - r < d) { return } if (this.mouseScrollDelta > 0 && n < 0 || this.mouseScrollDelta < 0 && n > 0) { this._resetMouseScrollState() } this.mouseScrollDelta += n; if (Math.abs(this.mouseScrollDelta) >= h) { var a = this.mouseScrollDelta; this._resetMouseScrollState(); var o = a > 0 ? this._goToPreviousPage() : this._goToNextPage(); if (o) { this.mouseScrollTimeStamp = i } } } }, { key: "_goToPreviousPage", value: function e() { var t = this.pdfViewer.currentPageNumber; if (t <= 1) { return false } this.pdfViewer.currentPageNumber = t - 1; return true } }, { key: "_goToNextPage", value: function e() { var t = this.pdfViewer.currentPageNumber; if (t >= this.pdfViewer.pagesCount) { return false } this.pdfViewer.currentPageNumber = t + 1; return true } }, { key: "_notifyStateChange", value: function e() { this.eventBus.dispatch("presentationmodechanged", { source: this, active: this.active, switchInProgress: !!this.switchInProgress }) } }, { key: "_setSwitchInProgress", value: function e() { var t = this; if (this.switchInProgress) { clearTimeout(this.switchInProgress) } this.switchInProgress = setTimeout(function () { t._removeFullscreenChangeListeners(); delete t.switchInProgress; t._notifyStateChange() }, a) } }, { key: "_resetSwitchInProgress", value: function e() { if (this.switchInProgress) { clearTimeout(this.switchInProgress); delete this.switchInProgress } } }, { key: "_enter", value: function e() { var t = this; this.active = true; this._resetSwitchInProgress(); this._notifyStateChange(); this.container.classList.add(c); setTimeout(function () { t.pdfViewer.currentPageNumber = t.args.page; t.pdfViewer.currentScaleValue = "page-fit" }, 0); this._addWindowListeners(); this._showControls(); this.contextMenuOpen = false; this.container.setAttribute("contextmenu", "viewerContextMenu"); window.getSelection().removeAllRanges() } }, { key: "_exit", value: function e() { var t = this; var n = this.pdfViewer.currentPageNumber; this.container.classList.remove(c); setTimeout(function () { t.active = false; t._removeFullscreenChangeListeners(); t._notifyStateChange(); t.pdfViewer.currentScaleValue = t.args.previousScale; t.pdfViewer.currentPageNumber = n; t.args = null }, 0); this._removeWindowListeners(); this._hideControls(); this._resetMouseScrollState(); this.container.removeAttribute("contextmenu"); this.contextMenuOpen = false } }, { key: "_mouseDown", value: function e(t) { if (this.contextMenuOpen) { this.contextMenuOpen = false; t.preventDefault(); return } if (t.button === 0) { var n = t.target.href && t.target.classList.contains("internalLink"); if (!n) { t.preventDefault(); if (t.shiftKey) { this._goToPreviousPage() } else { this._goToNextPage() } } } } }, { key: "_contextMenu", value: function e() { this.contextMenuOpen = true } }, { key: "_showControls", value: function e() { var t = this; if (this.controlsTimeout) { clearTimeout(this.controlsTimeout) } else { this.container.classList.add(f) } this.controlsTimeout = setTimeout(function () { t.container.classList.remove(f); delete t.controlsTimeout }, o) } }, { key: "_hideControls", value: function e() { if (!this.controlsTimeout) { return } clearTimeout(this.controlsTimeout); this.container.classList.remove(f); delete this.controlsTimeout } }, { key: "_resetMouseScrollState", value: function e() { this.mouseScrollTimeStamp = 0; this.mouseScrollDelta = 0 } }, { key: "_touchSwipe", value: function e(t) { if (!this.active) { return } if (t.touches.length > 1) { this.touchSwipeState = null; return } switch (t.type) { case "touchstart": this.touchSwipeState = { startX: t.touches[0].pageX, startY: t.touches[0].pageY, endX: t.touches[0].pageX, endY: t.touches[0].pageY }; break; case "touchmove": if (this.touchSwipeState === null) { return } this.touchSwipeState.endX = t.touches[0].pageX; this.touchSwipeState.endY = t.touches[0].pageY; t.preventDefault(); break; case "touchend": if (this.touchSwipeState === null) { return } var n = 0; var i = this.touchSwipeState.endX - this.touchSwipeState.startX; var r = this.touchSwipeState.endY - this.touchSwipeState.startY; var a = Math.abs(Math.atan2(r, i)); if (Math.abs(i) > p && (a <= v || a >= Math.PI - v)) { n = i } else if (Math.abs(r) > p && Math.abs(a - Math.PI / 2) <= v) { n = r } if (n > 0) { this._goToPreviousPage() } else if (n < 0) { this._goToNextPage() } break } } }, { key: "_addWindowListeners", value: function e() { this.showControlsBind = this._showControls.bind(this); this.mouseDownBind = this._mouseDown.bind(this); this.mouseWheelBind = this._mouseWheel.bind(this); this.resetMouseScrollStateBind = this._resetMouseScrollState.bind(this); this.contextMenuBind = this._contextMenu.bind(this); this.touchSwipeBind = this._touchSwipe.bind(this); window.addEventListener("mousemove", this.showControlsBind); window.addEventListener("mousedown", this.mouseDownBind); window.addEventListener("wheel", this.mouseWheelBind, { passive: false }); window.addEventListener("keydown", this.resetMouseScrollStateBind); window.addEventListener("contextmenu", this.contextMenuBind); window.addEventListener("touchstart", this.touchSwipeBind); window.addEventListener("touchmove", this.touchSwipeBind); window.addEventListener("touchend", this.touchSwipeBind) } }, { key: "_removeWindowListeners", value: function e() { window.removeEventListener("mousemove", this.showControlsBind); window.removeEventListener("mousedown", this.mouseDownBind); window.removeEventListener("wheel", this.mouseWheelBind, { passive: false }); window.removeEventListener("keydown", this.resetMouseScrollStateBind); window.removeEventListener("contextmenu", this.contextMenuBind); window.removeEventListener("touchstart", this.touchSwipeBind); window.removeEventListener("touchmove", this.touchSwipeBind); window.removeEventListener("touchend", this.touchSwipeBind); delete this.showControlsBind; delete this.mouseDownBind; delete this.mouseWheelBind; delete this.resetMouseScrollStateBind; delete this.contextMenuBind; delete this.touchSwipeBind } }, { key: "_fullscreenChange", value: function e() { if (this.isFullscreen) { this._enter() } else { this._exit() } } }, { key: "_addFullscreenChangeListeners", value: function e() { this.fullscreenChangeBind = this._fullscreenChange.bind(this); window.addEventListener("fullscreenchange", this.fullscreenChangeBind); window.addEventListener("mozfullscreenchange", this.fullscreenChangeBind); window.addEventListener("webkitfullscreenchange", this.fullscreenChangeBind); window.addEventListener("MSFullscreenChange", this.fullscreenChangeBind) } }, { key: "_removeFullscreenChangeListeners", value: function e() { window.removeEventListener("fullscreenchange", this.fullscreenChangeBind); window.removeEventListener("mozfullscreenchange", this.fullscreenChangeBind); window.removeEventListener("webkitfullscreenchange", this.fullscreenChangeBind); window.removeEventListener("MSFullscreenChange", this.fullscreenChangeBind); delete this.fullscreenChangeBind } }, { key: "isFullscreen", get: function e() { return !!(document.fullscreenElement || document.mozFullScreen || document.webkitIsFullScreen || document.msFullscreenElement) } }]); return s }(); t.PDFPresentationMode = s }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFSidebarResizer = void 0; var a = n(5); function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var u = "--sidebar-width"; var l = 200; var c = "sidebarResizing"; var r = function () { function r(e, t) { var n = this; var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : a.NullL10n; o(this, r); this.enabled = false; this.isRTL = false; this.sidebarOpen = false; this.doc = document.documentElement; this._width = null; this._outerContainerWidth = null; this._boundEvents = Object.create(null); this.outerContainer = e.outerContainer; this.resizer = e.resizer; this.eventBus = t; this.l10n = i; if (typeof CSS === "undefined" || typeof CSS.supports !== "function" || !CSS.supports(u, "calc(-1 * ".concat(l, "px)"))) { console.warn("PDFSidebarResizer: The browser does not support resizing of the sidebar."); return } this.enabled = true; this.resizer.classList.remove("hidden"); this.l10n.getDirection().then(function (e) { n.isRTL = e === "rtl" }); this._addEventListeners() } s(r, [{ key: "_updateWidth", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0; if (!this.enabled) { return false } var n = (0, a.clamp)(t, l, Math.floor(this.outerContainerWidth / 2)); if (n === this._width) { return false } this._width = n; this.doc.style.setProperty(u, "".concat(n, "px")); return true } }, { key: "_mouseMove", value: function e(t) { var n = t.clientX; if (this.isRTL) { n = this.outerContainerWidth - n } this._updateWidth(n) } }, { key: "_mouseUp", value: function e(t) { this.outerContainer.classList.remove(c); this.eventBus.dispatch("resize", { source: this }); var n = this._boundEvents; window.removeEventListener("mousemove", n.mouseMove); window.removeEventListener("mouseup", n.mouseUp) } }, { key: "_addEventListeners", value: function e() { var n = this; if (!this.enabled) { return } var t = this._boundEvents; t.mouseMove = this._mouseMove.bind(this); t.mouseUp = this._mouseUp.bind(this); this.resizer.addEventListener("mousedown", function (e) { if (e.button !== 0) { return } n.outerContainer.classList.add(c); window.addEventListener("mousemove", t.mouseMove); window.addEventListener("mouseup", t.mouseUp) }); this.eventBus._on("sidebarviewchanged", function (e) { n.sidebarOpen = !!(e && e.view) }); this.eventBus._on("resize", function (e) { if (!e || e.source !== window) { return } n._outerContainerWidth = null; if (!n._width) { return } if (!n.sidebarOpen) { n._updateWidth(n._width); return } n.outerContainer.classList.add(c); var t = n._updateWidth(n._width); Promise.resolve().then(function () { n.outerContainer.classList.remove(c); if (t) { n.eventBus.dispatch("resize", { source: n }) } }) }) } }, { key: "outerContainerWidth", get: function e() { if (!this._outerContainerWidth) { this._outerContainerWidth = this.outerContainer.clientWidth } return this._outerContainerWidth } }]); return r }(); t.PDFSidebarResizer = r }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFThumbnailViewer = void 0; var l = n(5); var c = n(26); function s(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function r(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var f = -19; var d = "selected"; var a = function () { function o(e) { var t = e.container, n = e.linkService, i = e.renderingQueue, r = e.l10n, a = r === void 0 ? l.NullL10n : r; s(this, o); this.container = t; this.linkService = n; this.renderingQueue = i; this.l10n = a; this.scroll = (0, l.watchScroll)(this.container, this._scrollUpdated.bind(this)); this._resetView() } r(o, [{ key: "_scrollUpdated", value: function e() { this.renderingQueue.renderHighestPriority() } }, { key: "getThumbnail", value: function e(t) { return this._thumbnails[t] } }, { key: "_getVisibleThumbs", value: function e() { return (0, l.getVisibleElements)(this.container, this._thumbnails) } }, { key: "scrollThumbnailIntoView", value: function e(t) { if (!this.pdfDocument) { return } var n = this._thumbnails[t - 1]; if (!n) { console.error('scrollThumbnailIntoView: Invalid "pageNumber" parameter.'); return } if (t !== this._currentPageNumber) { var i = this._thumbnails[this._currentPageNumber - 1]; i.div.classList.remove(d); n.div.classList.add(d) } var r = this._getVisibleThumbs(); var a = r.views.length; if (a > 0) { var o = r.first.id; var s = a > 1 ? r.last.id : o; var u = false; if (t <= o || t >= s) { u = true } else { r.views.some(function (e) { if (e.id !== t) { return false } u = e.percent < 100; return true }) } if (u) { (0, l.scrollIntoView)(n.div, { top: f }) } } this._currentPageNumber = t } }, { key: "cleanup", value: function e() { c.PDFThumbnailView.cleanup() } }, { key: "_resetView", value: function e() { this._thumbnails = []; this._currentPageNumber = 1; this._pageLabels = null; this._pagesRotation = 0; this._pagesRequests = new WeakMap; this.container.textContent = "" } }, { key: "setDocument", value: function e(s) { var u = this; if (this.pdfDocument) { this._cancelRendering(); this._resetView() } this.pdfDocument = s; if (!s) { return } s.getPage(1).then(function (e) { var t = s.numPages; var n = e.getViewport({ scale: 1 }); for (var i = 1; i <= t; ++i) { var r = new c.PDFThumbnailView({ container: u.container, id: i, defaultViewport: n.clone(), linkService: u.linkService, renderingQueue: u.renderingQueue, disableCanvasToImageConversion: false, l10n: u.l10n }); u._thumbnails.push(r) } var a = u._thumbnails[0]; if (a) { a.setPdfPage(e) } var o = u._thumbnails[u._currentPageNumber - 1]; o.div.classList.add(d) })["catch"](function (e) { console.error("Unable to initialize thumbnail viewer", e) }) } }, { key: "_cancelRendering", value: function e() { for (var t = 0, n = this._thumbnails.length; t < n; t++) { if (this._thumbnails[t]) { this._thumbnails[t].cancelRendering() } } } }, { key: "setPageLabels", value: function e(t) { if (!this.pdfDocument) { return } if (!t) { this._pageLabels = null } else if (!(Array.isArray(t) && this.pdfDocument.numPages === t.length)) { this._pageLabels = null; console.error("PDFThumbnailViewer_setPageLabels: Invalid page labels.") } else { this._pageLabels = t } for (var n = 0, i = this._thumbnails.length; n < i; n++) { var r = this._pageLabels && this._pageLabels[n]; this._thumbnails[n].setPageLabel(r) } } }, { key: "_ensurePdfPageLoaded", value: function e(t) { var n = this; if (t.pdfPage) { return Promise.resolve(t.pdfPage) } if (this._pagesRequests.has(t)) { return this._pagesRequests.get(t) } var i = this.pdfDocument.getPage(t.id).then(function (e) { if (!t.pdfPage) { t.setPdfPage(e) } n._pagesRequests["delete"](t); return e })["catch"](function (e) { console.error("Unable to get page for thumb view", e); n._pagesRequests["delete"](t) }); this._pagesRequests.set(t, i); return i } }, { key: "forceRendering", value: function e() { var t = this; var n = this._getVisibleThumbs(); var i = this.renderingQueue.getHighestPriority(n, this._thumbnails, this.scroll.down); if (i) { this._ensurePdfPageLoaded(i).then(function () { t.renderingQueue.renderView(i) }); return true } return false } }, { key: "pagesRotation", get: function e() { return this._pagesRotation }, set: function e(t) { if (!(0, l.isValidRotation)(t)) { throw new Error("Invalid thumbnails rotation angle.") } if (!this.pdfDocument) { return } if (this._pagesRotation === t) { return } this._pagesRotation = t; for (var n = 0, i = this._thumbnails.length; n < i; n++) { this._thumbnails[n].update(t) } } }]); return o }(); t.PDFThumbnailViewer = a }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFThumbnailView = void 0; var c = n(8); var v = n(5); var g = n(11); function m(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function r(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var l = 3; var y = 1; var b = 98; var f = function e() { var a = null; return { getCanvas: function e(t, n) { var i = a; if (!i) { i = document.createElement("canvas"); a = i } i.width = t; i.height = n; i.mozOpaque = true; var r = i.getContext("2d", { alpha: false }); r.save(); r.fillStyle = "rgb(255, 255, 255)"; r.fillRect(0, 0, t, n); r.restore(); return i }, destroyCanvas: function e() { var t = a; if (t) { t.width = 0; t.height = 0 } a = null } } }(); var a = function () { function p(e) { var t = e.container, n = e.id, i = e.defaultViewport, r = e.linkService, a = e.renderingQueue, o = e.disableCanvasToImageConversion, s = o === void 0 ? false : o, u = e.l10n, l = u === void 0 ? v.NullL10n : u; m(this, p); this.id = n; this.renderingId = "thumbnail" + n; this.pageLabel = null; this.pdfPage = null; this.rotation = 0; this.viewport = i; this.pdfPageRotate = i.rotation; this.linkService = r; this.renderingQueue = a; this.renderTask = null; this.renderingState = g.RenderingStates.INITIAL; this.resume = null; this.disableCanvasToImageConversion = s; this.pageWidth = this.viewport.width; this.pageHeight = this.viewport.height; this.pageRatio = this.pageWidth / this.pageHeight; this.canvasWidth = b; this.canvasHeight = this.canvasWidth / this.pageRatio | 0; this.scale = this.canvasWidth / this.pageWidth; this.l10n = l; var c = document.createElement("a"); c.href = r.getAnchorUrl("#page=" + n); this._thumbPageTitle.then(function (e) { c.title = e }); c.onclick = function () { r.page = n; return false }; this.anchor = c; var f = document.createElement("div"); f.className = "thumbnail"; f.setAttribute("data-page-number", this.id); this.div = f; var d = document.createElement("div"); d.className = "thumbnailSelectionRing"; var h = 2 * y; d.style.width = this.canvasWidth + h + "px"; d.style.height = this.canvasHeight + h + "px"; this.ring = d; f.appendChild(d); c.appendChild(f); t.appendChild(c) } r(p, [{ key: "setPdfPage", value: function e(t) { this.pdfPage = t; this.pdfPageRotate = t.rotate; var n = (this.rotation + this.pdfPageRotate) % 360; this.viewport = t.getViewport({ scale: 1, rotation: n }); this.reset() } }, { key: "reset", value: function e() { this.cancelRendering(); this.renderingState = g.RenderingStates.INITIAL; this.pageWidth = this.viewport.width; this.pageHeight = this.viewport.height; this.pageRatio = this.pageWidth / this.pageHeight; this.canvasHeight = this.canvasWidth / this.pageRatio | 0; this.scale = this.canvasWidth / this.pageWidth; this.div.removeAttribute("data-loaded"); var t = this.ring; var n = t.childNodes; for (var i = n.length - 1; i >= 0; i--) { t.removeChild(n[i]) } var r = 2 * y; t.style.width = this.canvasWidth + r + "px"; t.style.height = this.canvasHeight + r + "px"; if (this.canvas) { this.canvas.width = 0; this.canvas.height = 0; delete this.canvas } if (this.image) { this.image.removeAttribute("src"); delete this.image } } }, { key: "update", value: function e(t) { if (typeof t !== "undefined") { this.rotation = t } var n = (this.rotation + this.pdfPageRotate) % 360; this.viewport = this.viewport.clone({ scale: 1, rotation: n }); this.reset() } }, { key: "cancelRendering", value: function e() { if (this.renderTask) { this.renderTask.cancel(); this.renderTask = null } this.resume = null } }, { key: "_getPageDrawContext", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; var n = document.createElement("canvas"); this.canvas = n; n.mozOpaque = true; var i = n.getContext("2d", { alpha: false }); var r = (0, v.getOutputScale)(i); n.width = this.canvasWidth * r.sx | 0; n.height = this.canvasHeight * r.sy | 0; n.style.width = this.canvasWidth + "px"; n.style.height = this.canvasHeight + "px"; if (!t && r.scaled) { i.scale(r.sx, r.sy) } return i } }, { key: "_convertCanvasToImage", value: function e() { var t = this; if (!this.canvas) { return } if (this.renderingState !== g.RenderingStates.FINISHED) { return } var n = "thumbnailImage"; if (this.disableCanvasToImageConversion) { this.canvas.className = n; this._thumbPageCanvas.then(function (e) { t.canvas.setAttribute("aria-label", e) }); this.div.setAttribute("data-loaded", true); this.ring.appendChild(this.canvas); return } var i = document.createElement("img"); i.className = n; this._thumbPageCanvas.then(function (e) { i.setAttribute("aria-label", e) }); i.style.width = this.canvasWidth + "px"; i.style.height = this.canvasHeight + "px"; i.src = this.canvas.toDataURL(); this.image = i; this.div.setAttribute("data-loaded", true); this.ring.appendChild(i); this.canvas.width = 0; this.canvas.height = 0; delete this.canvas } }, { key: "draw", value: function e() { var n = this; if (this.renderingState !== g.RenderingStates.INITIAL) { console.error("Must be in new state before drawing"); return Promise.resolve(undefined) } var t = this.pdfPage; if (!t) { this.renderingState = g.RenderingStates.FINISHED; return Promise.reject(new Error("pdfPage is not loaded")) } this.renderingState = g.RenderingStates.RUNNING; var i = (0, c.createPromiseCapability)(); var r = function e(t) { if (l === n.renderTask) { n.renderTask = null } if (t instanceof c.RenderingCancelledException) { i.resolve(undefined); return } n.renderingState = g.RenderingStates.FINISHED; n._convertCanvasToImage(); if (!t) { i.resolve(undefined) } else { i.reject(t) } }; var a = this._getPageDrawContext(); var o = this.viewport.clone({ scale: this.scale }); var s = function e(t) { if (!n.renderingQueue.isHighestPriority(n)) { n.renderingState = g.RenderingStates.PAUSED; n.resume = function () { n.renderingState = g.RenderingStates.RUNNING; t() }; return } t() }; var u = { canvasContext: a, viewport: o }; var l = this.renderTask = t.render(u); l.onContinue = s; l.promise.then(function () { r(null) }, function (e) { r(e) }); return i.promise } }, { key: "setImage", value: function e(t) { if (this.renderingState !== g.RenderingStates.INITIAL) { return } var n = t.canvas; if (!n) { return } if (!this.pdfPage) { this.setPdfPage(t.pdfPage) } this.renderingState = g.RenderingStates.FINISHED; var i = this._getPageDrawContext(true); var r = i.canvas; if (n.width <= 2 * r.width) { i.drawImage(n, 0, 0, n.width, n.height, 0, 0, r.width, r.height); this._convertCanvasToImage(); return } var a = r.width << l; var o = r.height << l; var s = f.getCanvas(a, o); var u = s.getContext("2d"); while (a > n.width || o > n.height) { a >>= 1; o >>= 1 } u.drawImage(n, 0, 0, n.width, n.height, 0, 0, a, o); while (a > 2 * r.width) { u.drawImage(s, 0, 0, a, o, 0, 0, a >> 1, o >> 1); a >>= 1; o >>= 1 } i.drawImage(s, 0, 0, a, o, 0, 0, r.width, r.height); this._convertCanvasToImage() } }, { key: "setPageLabel", value: function e(t) { var n = this; this.pageLabel = typeof t === "string" ? t : null; this._thumbPageTitle.then(function (e) { n.anchor.title = e }); if (this.renderingState !== g.RenderingStates.FINISHED) { return } this._thumbPageCanvas.then(function (e) { if (n.image) { n.image.setAttribute("aria-label", e) } else if (n.disableCanvasToImageConversion && n.canvas) { n.canvas.setAttribute("aria-label", e) } }) } }, { key: "_thumbPageTitle", get: function e() { return this.l10n.get("thumb_page_title", { page: this.pageLabel !== null ? this.pageLabel : this.id }, "Page {{page}}") } }, { key: "_thumbPageCanvas", get: function e() { return this.l10n.get("thumb_page_canvas", { page: this.pageLabel !== null ? this.pageLabel : this.id }, "Thumbnail of Page {{page}}") } }], [{ key: "cleanup", value: function e() { f.destroyCanvas() } }]); return p }(); t.PDFThumbnailView = a }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFViewer = void 0; var i = n(28); var r = n(8); function a(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { a = function e(t) { return typeof t } } else { a = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return a(e) } function s(t, e) { var n; if (typeof Symbol === "undefined" || t[Symbol.iterator] == null) { if (Array.isArray(t) || (n = u(t)) || e && t && typeof t.length === "number") { if (n) t = n; var i = 0; var r = function e() { }; return { s: r, n: function e() { if (i >= t.length) return { done: true }; return { done: false, value: t[i++] } }, e: function e(t) { throw t }, f: r } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var a = true, o = false, s; return { s: function e() { n = t[Symbol.iterator]() }, n: function e() { var t = n.next(); a = t.done; return t }, e: function e(t) { o = true; s = t }, f: function e() { try { if (!a && n["return"] != null) n["return"]() } finally { if (o) throw s } } } } function u(e, t) { if (!e) return; if (typeof e === "string") return o(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return o(e, t) } function o(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function l(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function c(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function f(e, t, n) { if (t) c(e.prototype, t); if (n) c(e, n); return e } function h(e, t, n) { if (typeof Reflect !== "undefined" && Reflect.get) { h = Reflect.get } else { h = function e(t, n, i) { var r = d(t, n); if (!r) return; var a = Object.getOwnPropertyDescriptor(r, n); if (a.get) { return a.get.call(i) } return a.value } } return h(e, t, n || e) } function d(e, t) { while (!Object.prototype.hasOwnProperty.call(e, t)) { e = w(e); if (e === null) break } return e } function p(e, t) { if (typeof t !== "function" && t !== null) { throw new TypeError("Super expression must either be null or a function") } e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: true, configurable: true } }); if (t) v(e, t) } function v(e, t) { v = Object.setPrototypeOf || function e(t, n) { t.__proto__ = n; return t }; return v(e, t) } function g(r) { var a = b(); return function e() { var t = w(r), n; if (a) { var i = w(this).constructor; n = Reflect.construct(t, arguments, i) } else { n = t.apply(this, arguments) } return m(this, n) } } function m(e, t) { if (t && (a(t) === "object" || typeof t === "function")) { return t } return y(e) } function y(e) { if (e === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called") } return e } function b() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () { })); return true } catch (e) { return false } } function w(e) { w = Object.setPrototypeOf ? Object.getPrototypeOf : function e(t) { return t.__proto__ || Object.getPrototypeOf(t) }; return w(e) } var _ = function (e) { p(d, e); var t = g(d); function d() { l(this, d); return t.apply(this, arguments) } f(d, [{ key: "_scrollIntoView", value: function e(t) { var n = t.pageDiv, i = t.pageSpot, r = i === void 0 ? null : i, a = t.pageNumber, o = a === void 0 ? null : a; if (!r && !this.isInPresentationMode) { var s = n.offsetLeft + n.clientLeft; var u = s + n.clientWidth; var l = this.container, c = l.scrollLeft, f = l.clientWidth; if (this._isScrollModeHorizontal || s < c || u > c + f) { r = { left: 0, top: 0 } } } h(w(d.prototype), "_scrollIntoView", this).call(this, { pageDiv: n, pageSpot: r, pageNumber: o }) } }, { key: "_getVisiblePages", value: function e() { if (this.isInPresentationMode) { return this._getCurrentVisiblePage() } return h(w(d.prototype), "_getVisiblePages", this).call(this) } }, { key: "_updateHelper", value: function e(t) { if (this.isInPresentationMode) { return } var n = this._currentPageNumber; var i = false; var r = s(t), a; try { for (r.s(); !(a = r.n()).done;) { var o = a.value; if (o.percent < 100) { break } if (o.id === n) { i = true; break } } } catch (e) { r.e(e) } finally { r.f() } if (!i) { n = t[0].id } this._setCurrentPageNumber(n) } }, { key: "_viewerElement", get: function e() { return (0, r.shadow)(this, "_viewerElement", this.viewer) } }]); return d }(i.BaseViewer); t.PDFViewer = _ }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.BaseViewer = void 0; var E = n(5); var i = n(11); var o = n(29); var r = n(8); var c = n(30); var a = n(21); var s = n(31); function u(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function l(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function f(e, t, n) { if (t) l(e.prototype, t); if (n) l(e, n); return e } var d = 10; function h(a) { var o = []; this.push = function (e) { var t = o.indexOf(e); if (t >= 0) { o.splice(t, 1) } o.push(e); if (o.length > a) { o.shift().destroy() } }; this.resize = function (e, t) { a = e; if (t) { var n = new Set; for (var i = 0, r = t.length; i < r; ++i) { n.add(t[i].id) } (0, E.moveToEndOfArray)(o, function (e) { return n.has(e.id) }) } while (o.length > a) { o.shift().destroy() } } } function p(e, t) { if (t === e) { return true } if (Math.abs(t - e) < 1e-15) { return true } return false } var v = function () { function n(e) { var t = this; u(this, n); if (this.constructor === n) { throw new Error("Cannot initialize BaseViewer.") } this._name = this.constructor.name; this.container = e.container; this.viewer = e.viewer || e.container.firstElementChild; this.eventBus = e.eventBus; this.linkService = e.linkService || new a.SimpleLinkService; this.downloadManager = e.downloadManager || null; this.findController = e.findController || null; this.removePageBorders = e.removePageBorders || false; this.textLayerMode = Number.isInteger(e.textLayerMode) ? e.textLayerMode : E.TextLayerMode.ENABLE; this.imageResourcesPath = e.imageResourcesPath || ""; this.renderInteractiveForms = e.renderInteractiveForms || false; this.enablePrintAutoRotate = e.enablePrintAutoRotate || false; this.renderer = e.renderer || E.RendererType.CANVAS; this.enableWebGL = e.enableWebGL || false; this.useOnlyCssZoom = e.useOnlyCssZoom || false; this.maxCanvasPixels = e.maxCanvasPixels; this.l10n = e.l10n || E.NullL10n; this.defaultRenderingQueue = !e.renderingQueue; if (this.defaultRenderingQueue) { this.renderingQueue = new i.PDFRenderingQueue; this.renderingQueue.setViewer(this) } else { this.renderingQueue = e.renderingQueue } this.scroll = (0, E.watchScroll)(this.container, this._scrollUpdate.bind(this)); this.presentationModeState = E.PresentationModeState.UNKNOWN; this._onBeforeDraw = this._onAfterDraw = null; this._resetView(); if (this.removePageBorders) { this.viewer.classList.add("removePageBorders") } Promise.resolve().then(function () { t.eventBus.dispatch("baseviewerinit", { source: t }) }) } f(n, [{ key: "getPageView", value: function e(t) { return this._pages[t] } }, { key: "_setCurrentPageNumber", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; if (this._currentPageNumber === t) { if (n) { this._resetCurrentPageView() } return true } if (!(0 < t && t <= this.pagesCount)) { return false } this._currentPageNumber = t; this.eventBus.dispatch("pagechanging", { source: this, pageNumber: t, pageLabel: this._pageLabels && this._pageLabels[t - 1] }); if (n) { this._resetCurrentPageView() } return true } }, { key: "_onePageRenderedOrForceFetch", value: function e() { if (!this.container.offsetParent || this._getVisiblePages().views.length === 0) { return Promise.resolve() } return this._onePageRenderedCapability.promise } }, { key: "setDocument", value: function e(s) { var u = this; if (this.pdfDocument) { this._cancelRendering(); this._resetView(); if (this.findController) { this.findController.setDocument(null) } } this.pdfDocument = s; if (!s) { return } var l = s.numPages; var t = s.getPage(1); this._pagesCapability.promise.then(function () { u.eventBus.dispatch("pagesloaded", { source: u, pagesCount: l }) }); this._onBeforeDraw = function (e) { var t = u._pages[e.pageNumber - 1]; if (!t) { return } u._buffer.push(t) }; this.eventBus._on("pagerender", this._onBeforeDraw); this._onAfterDraw = function (e) { if (e.cssTransform || u._onePageRenderedCapability.settled) { return } u._onePageRenderedCapability.resolve(); u.eventBus._off("pagerendered", u._onAfterDraw); u._onAfterDraw = null }; this.eventBus._on("pagerendered", this._onAfterDraw); t.then(function (e) { u._firstPageCapability.resolve(e); var t = u.currentScale; var n = e.getViewport({ scale: t * E.CSS_UNITS }); var i = u.textLayerMode !== E.TextLayerMode.DISABLE ? u : null; for (var r = 1; r <= l; ++r) { var a = new c.PDFPageView({ container: u._viewerElement, eventBus: u.eventBus, id: r, scale: t, defaultViewport: n.clone(), renderingQueue: u.renderingQueue, textLayerFactory: i, textLayerMode: u.textLayerMode, annotationLayerFactory: u, imageResourcesPath: u.imageResourcesPath, renderInteractiveForms: u.renderInteractiveForms, renderer: u.renderer, enableWebGL: u.enableWebGL, useOnlyCssZoom: u.useOnlyCssZoom, maxCanvasPixels: u.maxCanvasPixels, l10n: u.l10n }); u._pages.push(a) } var o = u._pages[0]; if (o) { o.setPdfPage(e); u.linkService.cachePageRef(1, e.ref) } if (u._spreadMode !== E.SpreadMode.NONE) { u._updateSpreadMode() } u._onePageRenderedOrForceFetch().then(function () { if (u.findController) { u.findController.setDocument(s) } if (s.loadingParams.disableAutoFetch || l > 7500) { u._pagesCapability.resolve(); return } var i = l - 1; if (i <= 0) { u._pagesCapability.resolve(); return } var e = function e(n) { s.getPage(n).then(function (e) { var t = u._pages[n - 1]; if (!t.pdfPage) { t.setPdfPage(e) } u.linkService.cachePageRef(n, e.ref); if (--i === 0) { u._pagesCapability.resolve() } }, function (e) { console.error("Unable to get page ".concat(n, " to initialize viewer"), e); if (--i === 0) { u._pagesCapability.resolve() } }) }; for (var t = 2; t <= l; ++t) { e(t) } }); u.eventBus.dispatch("pagesinit", { source: u }); if (u.defaultRenderingQueue) { u.update() } })["catch"](function (e) { console.error("Unable to initialize viewer", e) }) } }, { key: "setPageLabels", value: function e(t) { if (!this.pdfDocument) { return } if (!t) { this._pageLabels = null } else if (!(Array.isArray(t) && this.pdfDocument.numPages === t.length)) { this._pageLabels = null; console.error("".concat(this._name, ".setPageLabels: Invalid page labels.")) } else { this._pageLabels = t } for (var n = 0, i = this._pages.length; n < i; n++) { var r = this._pages[n]; var a = this._pageLabels && this._pageLabels[n]; r.setPageLabel(a) } } }, { key: "_resetView", value: function e() { this._pages = []; this._currentPageNumber = 1; this._currentScale = E.UNKNOWN_SCALE; this._currentScaleValue = null; this._pageLabels = null; this._buffer = new h(d); this._location = null; this._pagesRotation = 0; this._pagesRequests = new WeakMap; this._firstPageCapability = (0, r.createPromiseCapability)(); this._onePageRenderedCapability = (0, r.createPromiseCapability)(); this._pagesCapability = (0, r.createPromiseCapability)(); this._scrollMode = E.ScrollMode.VERTICAL; this._spreadMode = E.SpreadMode.NONE; if (this._onBeforeDraw) { this.eventBus._off("pagerender", this._onBeforeDraw); this._onBeforeDraw = null } if (this._onAfterDraw) { this.eventBus._off("pagerendered", this._onAfterDraw); this._onAfterDraw = null } this.viewer.textContent = ""; this._updateScrollMode() } }, { key: "_scrollUpdate", value: function e() { if (this.pagesCount === 0) { return } this.update() } }, { key: "_scrollIntoView", value: function e(t) { var n = t.pageDiv, i = t.pageSpot, r = i === void 0 ? null : i, a = t.pageNumber, o = a === void 0 ? null : a; (0, E.scrollIntoView)(n, r) } }, { key: "_setScaleUpdatePages", value: function e(t, n) { var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false; var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; this._currentScaleValue = n.toString(); if (p(this._currentScale, t)) { if (r) { this.eventBus.dispatch("scalechanging", { source: this, scale: t, presetValue: n }) } return } for (var a = 0, o = this._pages.length; a < o; a++) { this._pages[a].update(t) } this._currentScale = t; if (!i) { var s = this._currentPageNumber, u; if (this._location && !(this.isInPresentationMode || this.isChangingPresentationMode)) { s = this._location.pageNumber; u = [null, { name: "XYZ" }, this._location.left, this._location.top, null] } this.scrollPageIntoView({ pageNumber: s, destArray: u, allowNegativeOffset: true }) } this.eventBus.dispatch("scalechanging", { source: this, scale: t, presetValue: r ? n : undefined }); if (this.defaultRenderingQueue) { this.update() } } }, { key: "_setScale", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; var i = parseFloat(t); if (i > 0) { this._setScaleUpdatePages(i, t, n, false) } else { var r = this._pages[this._currentPageNumber - 1]; if (!r) { return } var a = this.isInPresentationMode || this.removePageBorders; var o = a ? 0 : E.SCROLLBAR_PADDING; var s = a ? 0 : E.VERTICAL_PADDING; if (!a && this._isScrollModeHorizontal) { var u = [s, o]; o = u[0]; s = u[1] } var l = (this.container.clientWidth - o) / r.width * r.scale; var c = (this.container.clientHeight - s) / r.height * r.scale; switch (t) { case "page-actual": i = 1; break; case "page-width": i = l; break; case "page-height": i = c; break; case "page-fit": i = Math.min(l, c); break; case "auto": var f = (0, E.isPortraitOrientation)(r) ? l : Math.min(c, l); i = Math.min(E.MAX_AUTO_SCALE, f); break; default: console.error("".concat(this._name, '._setScale: "').concat(t, '" is an unknown zoom value.')); return }this._setScaleUpdatePages(i, t, n, true) } } }, { key: "_resetCurrentPageView", value: function e() { if (this.isInPresentationMode) { this._setScale(this._currentScaleValue, true) } var t = this._pages[this._currentPageNumber - 1]; this._scrollIntoView({ pageDiv: t.div }) } }, { key: "scrollPageIntoView", value: function e(t) { var n = t.pageNumber, i = t.destArray, r = i === void 0 ? null : i, a = t.allowNegativeOffset, o = a === void 0 ? false : a, s = t.ignoreDestinationZoom, u = s === void 0 ? false : s; if (!this.pdfDocument) { return } var l = Number.isInteger(n) && this._pages[n - 1]; if (!l) { console.error("".concat(this._name, ".scrollPageIntoView: ") + '"'.concat(n, '" is not a valid pageNumber parameter.')); return } if (this.isInPresentationMode || !r) { this._setCurrentPageNumber(n, true); return } var c = 0, f = 0; var d = 0, h = 0, p, v; var g = l.rotation % 180 !== 0; var m = (g ? l.height : l.width) / l.scale / E.CSS_UNITS; var y = (g ? l.width : l.height) / l.scale / E.CSS_UNITS; var b = 0; switch (r[1].name) { case "XYZ": c = r[2]; f = r[3]; b = r[4]; c = c !== null ? c : 0; f = f !== null ? f : y; break; case "Fit": case "FitB": b = "page-fit"; break; case "FitH": case "FitBH": f = r[2]; b = "page-width"; if (f === null && this._location) { c = this._location.left; f = this._location.top } break; case "FitV": case "FitBV": c = r[2]; d = m; h = y; b = "page-height"; break; case "FitR": c = r[2]; f = r[3]; d = r[4] - c; h = r[5] - f; var w = this.removePageBorders ? 0 : E.SCROLLBAR_PADDING; var _ = this.removePageBorders ? 0 : E.VERTICAL_PADDING; p = (this.container.clientWidth - w) / d / E.CSS_UNITS; v = (this.container.clientHeight - _) / h / E.CSS_UNITS; b = Math.min(Math.abs(p), Math.abs(v)); break; default: console.error("".concat(this._name, ".scrollPageIntoView: ") + '"'.concat(r[1].name, '" is not a valid destination type.')); return }if (!u) { if (b && b !== this._currentScale) { this.currentScaleValue = b } else if (this._currentScale === E.UNKNOWN_SCALE) { this.currentScaleValue = E.DEFAULT_SCALE_VALUE } } if (b === "page-fit" && !r[4]) { this._scrollIntoView({ pageDiv: l.div, pageNumber: n }); return } var P = [l.viewport.convertToViewportPoint(c, f), l.viewport.convertToViewportPoint(c + d, f + h)]; var S = Math.min(P[0][0], P[1][0]); var k = Math.min(P[0][1], P[1][1]); if (!o) { S = Math.max(S, 0); k = Math.max(k, 0) } this._scrollIntoView({ pageDiv: l.div, pageSpot: { left: S, top: k }, pageNumber: n }) } }, { key: "_updateLocation", value: function e(t) { var n = this._currentScale; var i = this._currentScaleValue; var r = parseFloat(i) === n ? Math.round(n * 1e4) / 100 : i; var a = t.id; var o = "#page=" + a; o += "&zoom=" + r; var s = this._pages[a - 1]; var u = this.container; var l = s.getPagePoint(u.scrollLeft - t.x, u.scrollTop - t.y); var c = Math.round(l[0]); var f = Math.round(l[1]); o += "," + c + "," + f; this._location = { pageNumber: a, scale: r, top: f, left: c, rotation: this._pagesRotation, pdfOpenParams: o } } }, { key: "_updateHelper", value: function e(t) { throw new Error("Not implemented: _updateHelper") } }, { key: "update", value: function e() { var t = this._getVisiblePages(); var n = t.views, i = n.length; if (i === 0) { return } var r = Math.max(d, 2 * i + 1); this._buffer.resize(r, n); this.renderingQueue.renderHighestPriority(t); this._updateHelper(n); this._updateLocation(t.first); this.eventBus.dispatch("updateviewarea", { source: this, location: this._location }) } }, { key: "containsElement", value: function e(t) { return this.container.contains(t) } }, { key: "focus", value: function e() { this.container.focus() } }, { key: "_getCurrentVisiblePage", value: function e() { if (!this.pagesCount) { return { views: [] } } var t = this._pages[this._currentPageNumber - 1]; var n = t.div; var i = { id: t.id, x: n.offsetLeft + n.clientLeft, y: n.offsetTop + n.clientTop, view: t }; return { first: i, last: i, views: [i] } } }, { key: "_getVisiblePages", value: function e() { return (0, E.getVisibleElements)(this.container, this._pages, true, this._isScrollModeHorizontal) } }, { key: "isPageVisible", value: function e(t) { if (!this.pdfDocument) { return false } if (t < 1 || t > this.pagesCount) { console.error("".concat(this._name, '.isPageVisible: "').concat(t, '" is out of bounds.')); return false } return this._getVisiblePages().views.some(function (e) { return e.id === t }) } }, { key: "cleanup", value: function e() { for (var t = 0, n = this._pages.length; t < n; t++) { if (this._pages[t] && this._pages[t].renderingState !== i.RenderingStates.FINISHED) { this._pages[t].reset() } } } }, { key: "_cancelRendering", value: function e() { for (var t = 0, n = this._pages.length; t < n; t++) { if (this._pages[t]) { this._pages[t].cancelRendering() } } } }, { key: "_ensurePdfPageLoaded", value: function e(t) { var n = this; if (t.pdfPage) { return Promise.resolve(t.pdfPage) } if (this._pagesRequests.has(t)) { return this._pagesRequests.get(t) } var i = this.pdfDocument.getPage(t.id).then(function (e) { if (!t.pdfPage) { t.setPdfPage(e) } n._pagesRequests["delete"](t); return e })["catch"](function (e) { console.error("Unable to get page for page view", e); n._pagesRequests["delete"](t) }); this._pagesRequests.set(t, i); return i } }, { key: "forceRendering", value: function e(t) { var n = this; var i = t || this._getVisiblePages(); var r = this._isScrollModeHorizontal ? this.scroll.right : this.scroll.down; var a = this.renderingQueue.getHighestPriority(i, this._pages, r); if (a) { this._ensurePdfPageLoaded(a).then(function () { n.renderingQueue.renderView(a) }); return true } return false } }, { key: "createTextLayerBuilder", value: function e(t, n, i) { var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; var a = arguments.length > 4 ? arguments[4] : undefined; return new s.TextLayerBuilder({ textLayerDiv: t, eventBus: a, pageIndex: n, viewport: i, findController: this.isInPresentationMode ? null : this.findController, enhanceTextSelection: this.isInPresentationMode ? false : r }) } }, { key: "createAnnotationLayerBuilder", value: function e(t, n) { var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ""; var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; var a = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : E.NullL10n; return new o.AnnotationLayerBuilder({ pageDiv: t, pdfPage: n, imageResourcesPath: i, renderInteractiveForms: r, linkService: this.linkService, downloadManager: this.downloadManager, l10n: a }) } }, { key: "getPagesOverview", value: function e() { var t = this._pages.map(function (e) { var t = e.pdfPage.getViewport({ scale: 1 }); return { width: t.width, height: t.height, rotation: t.rotation } }); if (!this.enablePrintAutoRotate) { return t } var n = (0, E.isPortraitOrientation)(t[0]); return t.map(function (e) { if (n === (0, E.isPortraitOrientation)(e)) { return e } return { width: e.height, height: e.width, rotation: (e.rotation + 90) % 360 } }) } }, { key: "_updateScrollMode", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null; var n = this._scrollMode, i = this.viewer; i.classList.toggle("scrollHorizontal", n === E.ScrollMode.HORIZONTAL); i.classList.toggle("scrollWrapped", n === E.ScrollMode.WRAPPED); if (!this.pdfDocument || !t) { return } if (this._currentScaleValue && isNaN(this._currentScaleValue)) { this._setScale(this._currentScaleValue, true) } this._setCurrentPageNumber(t, true); this.update() } }, { key: "_updateSpreadMode", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null; if (!this.pdfDocument) { return } var n = this.viewer, i = this._pages; n.textContent = ""; if (this._spreadMode === E.SpreadMode.NONE) { for (var r = 0, a = i.length; r < a; ++r) { n.appendChild(i[r].div) } } else { var o = this._spreadMode - 1; var s = null; for (var u = 0, l = i.length; u < l; ++u) { if (s === null) { s = document.createElement("div"); s.className = "spread"; n.appendChild(s) } else if (u % 2 === o) { s = s.cloneNode(false); n.appendChild(s) } s.appendChild(i[u].div) } } if (!t) { return } this._setCurrentPageNumber(t, true); this.update() } }, { key: "pagesCount", get: function e() { return this._pages.length } }, { key: "pageViewsReady", get: function e() { if (!this._pagesCapability.settled) { return false } return this._pages.every(function (e) { return e && e.pdfPage }) } }, { key: "currentPageNumber", get: function e() { return this._currentPageNumber }, set: function e(t) { if (!Number.isInteger(t)) { throw new Error("Invalid page number.") } if (!this.pdfDocument) { return } if (!this._setCurrentPageNumber(t, true)) { console.error("".concat(this._name, '.currentPageNumber: "').concat(t, '" is not a valid page.')) } } }, { key: "currentPageLabel", get: function e() { return this._pageLabels && this._pageLabels[this._currentPageNumber - 1] }, set: function e(t) { if (!this.pdfDocument) { return } var n = t | 0; if (this._pageLabels) { var i = this._pageLabels.indexOf(t); if (i >= 0) { n = i + 1 } } if (!this._setCurrentPageNumber(n, true)) { console.error("".concat(this._name, '.currentPageLabel: "').concat(t, '" is not a valid page.')) } } }, { key: "currentScale", get: function e() { return this._currentScale !== E.UNKNOWN_SCALE ? this._currentScale : E.DEFAULT_SCALE }, set: function e(t) { if (isNaN(t)) { throw new Error("Invalid numeric scale.") } if (!this.pdfDocument) { return } this._setScale(t, false) } }, { key: "currentScaleValue", get: function e() { return this._currentScaleValue }, set: function e(t) { if (!this.pdfDocument) { return } this._setScale(t, false) } }, { key: "pagesRotation", get: function e() { return this._pagesRotation }, set: function e(t) { if (!(0, E.isValidRotation)(t)) { throw new Error("Invalid pages rotation angle.") } if (!this.pdfDocument) { return } if (this._pagesRotation === t) { return } this._pagesRotation = t; var n = this._currentPageNumber; for (var i = 0, r = this._pages.length; i < r; i++) { var a = this._pages[i]; a.update(a.scale, t) } if (this._currentScaleValue) { this._setScale(this._currentScaleValue, true) } this.eventBus.dispatch("rotationchanging", { source: this, pagesRotation: t, pageNumber: n }); if (this.defaultRenderingQueue) { this.update() } } }, { key: "firstPagePromise", get: function e() { return this.pdfDocument ? this._firstPageCapability.promise : null } }, { key: "onePageRendered", get: function e() { return this.pdfDocument ? this._onePageRenderedCapability.promise : null } }, { key: "pagesPromise", get: function e() { return this.pdfDocument ? this._pagesCapability.promise : null } }, { key: "_viewerElement", get: function e() { throw new Error("Not implemented: _viewerElement") } }, { key: "_isScrollModeHorizontal", get: function e() { return this.isInPresentationMode ? false : this._scrollMode === E.ScrollMode.HORIZONTAL } }, { key: "isInPresentationMode", get: function e() { return this.presentationModeState === E.PresentationModeState.FULLSCREEN } }, { key: "isChangingPresentationMode", get: function e() { return this.presentationModeState === E.PresentationModeState.CHANGING } }, { key: "isHorizontalScrollbarEnabled", get: function e() { return this.isInPresentationMode ? false : this.container.scrollWidth > this.container.clientWidth } }, { key: "isVerticalScrollbarEnabled", get: function e() { return this.isInPresentationMode ? false : this.container.scrollHeight > this.container.clientHeight } }, { key: "hasEqualPageSizes", get: function e() { var t = this._pages[0]; for (var n = 1, i = this._pages.length; n < i; ++n) { var r = this._pages[n]; if (r.width !== t.width || r.height !== t.height) { return false } } return true } }, { key: "scrollMode", get: function e() { return this._scrollMode }, set: function e(t) { if (this._scrollMode === t) { return } if (!(0, E.isValidScrollMode)(t)) { throw new Error("Invalid scroll mode: ".concat(t)) } this._scrollMode = t; this.eventBus.dispatch("scrollmodechanged", { source: this, mode: t }); this._updateScrollMode(this._currentPageNumber) } }, { key: "spreadMode", get: function e() { return this._spreadMode }, set: function e(t) { if (this._spreadMode === t) { return } if (!(0, E.isValidSpreadMode)(t)) { throw new Error("Invalid spread mode: ".concat(t)) } this._spreadMode = t; this.eventBus.dispatch("spreadmodechanged", { source: this, mode: t }); this._updateSpreadMode(this._currentPageNumber) } }]); return n }(); t.BaseViewer = v }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.DefaultAnnotationLayerFactory = t.AnnotationLayerBuilder = void 0; var r = n(8); var d = n(5); var o = n(21); function h(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function a(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var s = function () { function f(e) { var t = e.pageDiv, n = e.pdfPage, i = e.linkService, r = e.downloadManager, a = e.imageResourcesPath, o = a === void 0 ? "" : a, s = e.renderInteractiveForms, u = s === void 0 ? false : s, l = e.l10n, c = l === void 0 ? d.NullL10n : l; h(this, f); this.pageDiv = t; this.pdfPage = n; this.linkService = i; this.downloadManager = r; this.imageResourcesPath = o; this.renderInteractiveForms = u; this.l10n = c; this.div = null; this._cancelled = false } a(f, [{ key: "render", value: function e(n) { var i = this; var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "display"; this.pdfPage.getAnnotations({ intent: t }).then(function (e) { if (i._cancelled) { return } var t = { viewport: n.clone({ dontFlip: true }), div: i.div, annotations: e, page: i.pdfPage, imageResourcesPath: i.imageResourcesPath, renderInteractiveForms: i.renderInteractiveForms, linkService: i.linkService, downloadManager: i.downloadManager }; if (i.div) { r.AnnotationLayer.update(t) } else { if (e.length === 0) { return } i.div = document.createElement("div"); i.div.className = "annotationLayer"; i.pageDiv.appendChild(i.div); t.div = i.div; r.AnnotationLayer.render(t); i.l10n.translate(i.div) } }) } }, { key: "cancel", value: function e() { this._cancelled = true } }, { key: "hide", value: function e() { if (!this.div) { return } this.div.setAttribute("hidden", "true") } }]); return f }(); t.AnnotationLayerBuilder = s; var u = function () { function e() { h(this, e) } a(e, [{ key: "createAnnotationLayerBuilder", value: function e(t, n) { var i = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : ""; var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; var a = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : d.NullL10n; return new s({ pageDiv: t, pdfPage: n, imageResourcesPath: i, renderInteractiveForms: r, linkService: new o.SimpleLinkService, l10n: a }) } }]); return e }(); t.DefaultAnnotationLayerFactory = u }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFPageView = void 0; var f = r(n(2)); var y = n(5); var b = n(8); var d = n(11); var i = n(7); function r(e) { return e && e.__esModule ? e : { default: e } } function u(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function h(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { u(i, t, n, r, a, "next", e) } function a(e) { u(i, t, n, r, a, "throw", e) } r(undefined) }) } } function a(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function o(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) o(e.prototype, t); if (n) o(e, n); return e } var l = i.viewerCompatibilityParams.maxCanvasPixels || 16777216; var c = function () { function r(e) { a(this, r); var t = e.container; var n = e.defaultViewport; this.id = e.id; this.renderingId = "page" + this.id; this.pdfPage = null; this.pageLabel = null; this.rotation = 0; this.scale = e.scale || y.DEFAULT_SCALE; this.viewport = n; this.pdfPageRotate = n.rotation; this.hasRestrictedScaling = false; this.textLayerMode = Number.isInteger(e.textLayerMode) ? e.textLayerMode : y.TextLayerMode.ENABLE; this.imageResourcesPath = e.imageResourcesPath || ""; this.renderInteractiveForms = e.renderInteractiveForms || false; this.useOnlyCssZoom = e.useOnlyCssZoom || false; this.maxCanvasPixels = e.maxCanvasPixels || l; this.eventBus = e.eventBus; this.renderingQueue = e.renderingQueue; this.textLayerFactory = e.textLayerFactory; this.annotationLayerFactory = e.annotationLayerFactory; this.renderer = e.renderer || y.RendererType.CANVAS; this.enableWebGL = e.enableWebGL || false; this.l10n = e.l10n || y.NullL10n; this.paintTask = null; this.paintedViewportMap = new WeakMap; this.renderingState = d.RenderingStates.INITIAL; this.resume = null; this.error = null; this.annotationLayer = null; this.textLayer = null; this.zoomLayer = null; var i = document.createElement("div"); i.className = "page"; i.style.width = Math.floor(this.viewport.width) + "px"; i.style.height = Math.floor(this.viewport.height) + "px"; i.setAttribute("data-page-number", this.id); this.div = i; t.appendChild(i) } s(r, [{ key: "setPdfPage", value: function e(t) { this.pdfPage = t; this.pdfPageRotate = t.rotate; var n = (this.rotation + this.pdfPageRotate) % 360; this.viewport = t.getViewport({ scale: this.scale * y.CSS_UNITS, rotation: n }); this.stats = t.stats; this.reset() } }, { key: "destroy", value: function e() { this.reset(); if (this.pdfPage) { this.pdfPage.cleanup() } } }, { key: "_resetZoomLayer", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; if (!this.zoomLayer) { return } var n = this.zoomLayer.firstChild; this.paintedViewportMap["delete"](n); n.width = 0; n.height = 0; if (t) { this.zoomLayer.remove() } this.zoomLayer = null } }, { key: "reset", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; this.cancelRendering(n); this.renderingState = d.RenderingStates.INITIAL; var i = this.div; i.style.width = Math.floor(this.viewport.width) + "px"; i.style.height = Math.floor(this.viewport.height) + "px"; var r = i.childNodes; var a = t && this.zoomLayer || null; var o = n && this.annotationLayer && this.annotationLayer.div || null; for (var s = r.length - 1; s >= 0; s--) { var u = r[s]; if (a === u || o === u) { continue } i.removeChild(u) } i.removeAttribute("data-loaded"); if (o) { this.annotationLayer.hide() } else if (this.annotationLayer) { this.annotationLayer.cancel(); this.annotationLayer = null } if (!a) { if (this.canvas) { this.paintedViewportMap["delete"](this.canvas); this.canvas.width = 0; this.canvas.height = 0; delete this.canvas } this._resetZoomLayer() } if (this.svg) { this.paintedViewportMap["delete"](this.svg); delete this.svg } this.loadingIconDiv = document.createElement("div"); this.loadingIconDiv.className = "loadingIcon"; i.appendChild(this.loadingIconDiv) } }, { key: "update", value: function e(t, n) { this.scale = t || this.scale; if (typeof n !== "undefined") { this.rotation = n } var i = (this.rotation + this.pdfPageRotate) % 360; this.viewport = this.viewport.clone({ scale: this.scale * y.CSS_UNITS, rotation: i }); if (this.svg) { this.cssTransform(this.svg, true); this.eventBus.dispatch("pagerendered", { source: this, pageNumber: this.id, cssTransform: true, timestamp: performance.now() }); return } var r = false; if (this.canvas && this.maxCanvasPixels > 0) { var a = this.outputScale; if ((Math.floor(this.viewport.width) * a.sx | 0) * (Math.floor(this.viewport.height) * a.sy | 0) > this.maxCanvasPixels) { r = true } } if (this.canvas) { if (this.useOnlyCssZoom || this.hasRestrictedScaling && r) { this.cssTransform(this.canvas, true); this.eventBus.dispatch("pagerendered", { source: this, pageNumber: this.id, cssTransform: true, timestamp: performance.now() }); return } if (!this.zoomLayer && !this.canvas.hasAttribute("hidden")) { this.zoomLayer = this.canvas.parentNode; this.zoomLayer.style.position = "absolute" } } if (this.zoomLayer) { this.cssTransform(this.zoomLayer.firstChild) } this.reset(true, true) } }, { key: "cancelRendering", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; if (this.paintTask) { this.paintTask.cancel(); this.paintTask = null } this.resume = null; if (this.textLayer) { this.textLayer.cancel(); this.textLayer = null } if (!t && this.annotationLayer) { this.annotationLayer.cancel(); this.annotationLayer = null } } }, { key: "cssTransform", value: function e(t) { var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false; var i = this.viewport.width; var r = this.viewport.height; var a = this.div; t.style.width = t.parentNode.style.width = a.style.width = Math.floor(i) + "px"; t.style.height = t.parentNode.style.height = a.style.height = Math.floor(r) + "px"; var o = this.viewport.rotation - this.paintedViewportMap.get(t).rotation; var s = Math.abs(o); var u = 1, l = 1; if (s === 90 || s === 270) { u = r / i; l = i / r } var e = "rotate(" + o + "deg) scale(" + u + "," + l + ")"; t.style.transform = e; if (this.textLayer) { var c = this.textLayer.viewport; var f = this.viewport.rotation - c.rotation; var d = Math.abs(f); var h = i / c.width; if (d === 90 || d === 270) { h = i / c.height } var p = this.textLayer.textLayerDiv; var v, g; switch (d) { case 0: v = g = 0; break; case 90: v = 0; g = "-" + p.style.height; break; case 180: v = "-" + p.style.width; g = "-" + p.style.height; break; case 270: v = "-" + p.style.width; g = 0; break; default: console.error("Bad rotation value."); break }p.style.transform = "rotate(" + d + "deg) scale(" + h + ", " + h + ") translate(" + v + ", " + g + ")"; p.style.transformOrigin = "0% 0%" } if (n && this.annotationLayer) { this.annotationLayer.render(this.viewport, "display") } } }, { key: "getPagePoint", value: function e(t, n) { return this.viewport.convertToPdfPoint(t, n) } }, { key: "draw", value: function e() { var i = this; if (this.renderingState !== d.RenderingStates.INITIAL) { console.error("Must be in new state before drawing"); this.reset() } var r = this.div, a = this.pdfPage; if (!a) { this.renderingState = d.RenderingStates.FINISHED; if (this.loadingIconDiv) { r.removeChild(this.loadingIconDiv); delete this.loadingIconDiv } return Promise.reject(new Error("pdfPage is not loaded")) } this.renderingState = d.RenderingStates.RUNNING; var t = document.createElement("div"); t.style.width = r.style.width; t.style.height = r.style.height; t.classList.add("canvasWrapper"); if (this.annotationLayer && this.annotationLayer.div) { r.insertBefore(t, this.annotationLayer.div) } else { r.appendChild(t) } var n = null; if (this.textLayerMode !== y.TextLayerMode.DISABLE && this.textLayerFactory) { var o = document.createElement("div"); o.className = "textLayer"; o.style.width = t.style.width; o.style.height = t.style.height; if (this.annotationLayer && this.annotationLayer.div) { r.insertBefore(o, this.annotationLayer.div) } else { r.appendChild(o) } n = this.textLayerFactory.createTextLayerBuilder(o, this.id - 1, this.viewport, this.textLayerMode === y.TextLayerMode.ENABLE_ENHANCE, this.eventBus) } this.textLayer = n; var s = null; if (this.renderingQueue) { s = function e(t) { if (!i.renderingQueue.isHighestPriority(i)) { i.renderingState = d.RenderingStates.PAUSED; i.resume = function () { i.renderingState = d.RenderingStates.RUNNING; t() }; return } t() } } var u = function () { var n = h(f["default"].mark(function e(n) { return f["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: if (l === i.paintTask) { i.paintTask = null } if (!(n instanceof b.RenderingCancelledException)) { t.next = 4; break } i.error = null; return t.abrupt("return"); case 4: i.renderingState = d.RenderingStates.FINISHED; if (i.loadingIconDiv) { r.removeChild(i.loadingIconDiv); delete i.loadingIconDiv } i._resetZoomLayer(true); i.error = n; i.stats = a.stats; i.eventBus.dispatch("pagerendered", { source: i, pageNumber: i.id, cssTransform: false, timestamp: performance.now() }); if (!n) { t.next = 12; break } throw n; case 12: case "end": return t.stop() } } }, e) })); return function e(t) { return n.apply(this, arguments) } }(); var l = this.renderer === y.RendererType.SVG ? this.paintOnSvg(t) : this.paintOnCanvas(t); l.onRenderContinue = s; this.paintTask = l; var c = l.promise.then(function () { return u(null).then(function () { if (n) { var e = a.streamTextContent({ normalizeWhitespace: true }); n.setTextContentStream(e); n.render() } }) }, function (e) { return u(e) }); if (this.annotationLayerFactory) { if (!this.annotationLayer) { this.annotationLayer = this.annotationLayerFactory.createAnnotationLayerBuilder(r, a, this.imageResourcesPath, this.renderInteractiveForms, this.l10n) } this.annotationLayer.render(this.viewport, "display") } r.setAttribute("data-loaded", true); this.eventBus.dispatch("pagerender", { source: this, pageNumber: this.id }); return c } }, { key: "paintOnCanvas", value: function e(t) { var n = (0, b.createPromiseCapability)(); var i = { promise: n.promise, onRenderContinue: function e(t) { t() }, cancel: function e() { m.cancel() } }; var r = this.viewport; var a = document.createElement("canvas"); this.l10n.get("page_canvas", { page: this.id }, "Page {{page}}").then(function (e) { a.setAttribute("aria-label", e) }); a.setAttribute("hidden", "hidden"); var o = true; var s = function e() { if (o) { a.removeAttribute("hidden"); o = false } }; t.appendChild(a); this.canvas = a; a.mozOpaque = true; var u = a.getContext("2d", { alpha: false }); var l = (0, y.getOutputScale)(u); this.outputScale = l; if (this.useOnlyCssZoom) { var c = r.clone({ scale: y.CSS_UNITS }); l.sx *= c.width / r.width; l.sy *= c.height / r.height; l.scaled = true } if (this.maxCanvasPixels > 0) { var f = r.width * r.height; var d = Math.sqrt(this.maxCanvasPixels / f); if (l.sx > d || l.sy > d) { l.sx = d; l.sy = d; l.scaled = true; this.hasRestrictedScaling = true } else { this.hasRestrictedScaling = false } } var h = (0, y.approximateFraction)(l.sx); var p = (0, y.approximateFraction)(l.sy); a.width = (0, y.roundToDivide)(r.width * l.sx, h[0]); a.height = (0, y.roundToDivide)(r.height * l.sy, p[0]); a.style.width = (0, y.roundToDivide)(r.width, h[1]) + "px"; a.style.height = (0, y.roundToDivide)(r.height, p[1]) + "px"; this.paintedViewportMap.set(a, r); var v = !l.scaled ? null : [l.sx, 0, 0, l.sy, 0, 0]; var g = { canvasContext: u, transform: v, viewport: this.viewport, enableWebGL: this.enableWebGL, renderInteractiveForms: this.renderInteractiveForms }; var m = this.pdfPage.render(g); m.onContinue = function (e) { s(); if (i.onRenderContinue) { i.onRenderContinue(e) } else { e() } }; m.promise.then(function () { s(); n.resolve(undefined) }, function (e) { s(); n.reject(e) }); return i } }, { key: "paintOnSvg", value: function e(n) { var i = this; var t = false; var r = function e() { if (t) { throw new b.RenderingCancelledException("Rendering cancelled, page ".concat(i.id), "svg") } }; var a = this.pdfPage; var o = this.viewport.clone({ scale: y.CSS_UNITS }); var s = a.getOperatorList().then(function (e) { r(); var t = new b.SVGGraphics(a.commonObjs, a.objs); return t.getSVG(e, o).then(function (e) { r(); i.svg = e; i.paintedViewportMap.set(e, o); e.style.width = n.style.width; e.style.height = n.style.height; i.renderingState = d.RenderingStates.FINISHED; n.appendChild(e) }) }); return { promise: s, onRenderContinue: function e(t) { t() }, cancel: function e() { t = true } } } }, { key: "setPageLabel", value: function e(t) { this.pageLabel = typeof t === "string" ? t : null; if (this.pageLabel !== null) { this.div.setAttribute("data-page-label", this.pageLabel) } else { this.div.removeAttribute("data-page-label") } } }, { key: "width", get: function e() { return this.viewport.width } }, { key: "height", get: function e() { return this.viewport.height } }]); return r }(); t.PDFPageView = c }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.DefaultTextLayerFactory = t.TextLayerBuilder = void 0; var r = n(8); function c(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function a(e, t, n) { if (t) i(e.prototype, t); if (n) i(e, n); return e } var u = 300; var o = function () { function l(e) { var t = e.textLayerDiv, n = e.eventBus, i = e.pageIndex, r = e.viewport, a = e.findController, o = a === void 0 ? null : a, s = e.enhanceTextSelection, u = s === void 0 ? false : s; c(this, l); this.textLayerDiv = t; this.eventBus = n; this.textContent = null; this.textContentItemsStr = []; this.textContentStream = null; this.renderingDone = false; this.pageIdx = i; this.pageNumber = this.pageIdx + 1; this.matches = []; this.viewport = r; this.textDivs = []; this.findController = o; this.textLayerRenderTask = null; this.enhanceTextSelection = u; this._onUpdateTextLayerMatches = null; this._bindMouse() } a(l, [{ key: "_finishRendering", value: function e() { this.renderingDone = true; if (!this.enhanceTextSelection) { var t = document.createElement("div"); t.className = "endOfContent"; this.textLayerDiv.appendChild(t) } this.eventBus.dispatch("textlayerrendered", { source: this, pageNumber: this.pageNumber, numTextDivs: this.textDivs.length }) } }, { key: "render", value: function e() { var t = this; var n = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0; if (!(this.textContent || this.textContentStream) || this.renderingDone) { return } this.cancel(); this.textDivs = []; var i = document.createDocumentFragment(); this.textLayerRenderTask = (0, r.renderTextLayer)({ textContent: this.textContent, textContentStream: this.textContentStream, container: i, viewport: this.viewport, textDivs: this.textDivs, textContentItemsStr: this.textContentItemsStr, timeout: n, enhanceTextSelection: this.enhanceTextSelection }); this.textLayerRenderTask.promise.then(function () { t.textLayerDiv.appendChild(i); t._finishRendering(); t._updateMatches() }, function (e) { }); if (!this._onUpdateTextLayerMatches) { this._onUpdateTextLayerMatches = function (e) { if (e.pageIndex === t.pageIdx || e.pageIndex === -1) { t._updateMatches() } }; this.eventBus._on("updatetextlayermatches", this._onUpdateTextLayerMatches) } } }, { key: "cancel", value: function e() { if (this.textLayerRenderTask) { this.textLayerRenderTask.cancel(); this.textLayerRenderTask = null } if (this._onUpdateTextLayerMatches) { this.eventBus._off("updatetextlayermatches", this._onUpdateTextLayerMatches); this._onUpdateTextLayerMatches = null } } }, { key: "setTextContentStream", value: function e(t) { this.cancel(); this.textContentStream = t } }, { key: "setTextContent", value: function e(t) { this.cancel(); this.textContent = t } }, { key: "_convertMatches", value: function e(t, n) { if (!t) { return [] } var i = this.findController, r = this.textContentItemsStr; var a = 0, o = 0; var s = r.length - 1; var u = i.state.query.length; var l = []; for (var c = 0, f = t.length; c < f; c++) { var d = t[c]; while (a !== s && d >= o + r[a].length) { o += r[a].length; a++ } if (a === r.length) { console.error("Could not find a matching mapping") } var h = { begin: { divIdx: a, offset: d - o } }; if (n) { d += n[c] } else { d += u } while (a !== s && d > o + r[a].length) { o += r[a].length; a++ } h.end = { divIdx: a, offset: d - o }; l.push(h) } return l } }, { key: "_renderMatches", value: function e(t) { if (t.length === 0) { return } var n = this.findController, i = this.pageIdx, u = this.textContentItemsStr, l = this.textDivs; var r = i === n.selected.pageIdx; var a = n.selected.matchIdx; var o = n.state.highlightAll; var s = null; var c = { divIdx: -1, offset: undefined }; function f(e, t) { var n = e.divIdx; l[n].textContent = ""; d(n, 0, e.offset, t) } function d(e, t, n, i) { var r = l[e]; var a = u[e].substring(t, n); var o = document.createTextNode(a); if (i) { var s = document.createElement("span"); s.className = i; s.appendChild(o); r.appendChild(s); return } r.appendChild(o) } var h = a, p = h + 1; if (o) { h = 0; p = t.length } else if (!r) { return } for (var v = h; v < p; v++) { var g = t[v]; var m = g.begin; var y = g.end; var b = r && v === a; var w = b ? " selected" : ""; if (b) { n.scrollMatchIntoView({ element: l[m.divIdx], pageIndex: i, matchIndex: a }) } if (!s || m.divIdx !== s.divIdx) { if (s !== null) { d(s.divIdx, s.offset, c.offset) } f(m) } else { d(s.divIdx, s.offset, m.offset) } if (m.divIdx === y.divIdx) { d(m.divIdx, m.offset, y.offset, "highlight" + w) } else { d(m.divIdx, m.offset, c.offset, "highlight begin" + w); for (var _ = m.divIdx + 1, P = y.divIdx; _ < P; _++) { l[_].className = "highlight middle" + w } f(y, "highlight end" + w) } s = y } if (s) { d(s.divIdx, s.offset, c.offset) } } }, { key: "_updateMatches", value: function e() { if (!this.renderingDone) { return } var t = this.findController, n = this.matches, i = this.pageIdx, r = this.textContentItemsStr, a = this.textDivs; var o = -1; for (var s = 0, u = n.length; s < u; s++) { var l = n[s]; var c = Math.max(o, l.begin.divIdx); for (var f = c, d = l.end.divIdx; f <= d; f++) { var h = a[f]; h.textContent = r[f]; h.className = "" } o = l.end.divIdx + 1 } if (!t || !t.highlightMatches) { return } var p = t.pageMatches[i] || null; var v = t.pageMatchesLength[i] || null; this.matches = this._convertMatches(p, v); this._renderMatches(this.matches) } }, { key: "_bindMouse", value: function e() { var a = this; var o = this.textLayerDiv; var s = null; o.addEventListener("mousedown", function (e) { if (a.enhanceTextSelection && a.textLayerRenderTask) { a.textLayerRenderTask.expandTextDivs(true); if (s) { clearTimeout(s); s = null } return } var t = o.querySelector(".endOfContent"); if (!t) { return } var n = e.target !== o; n = n && window.getComputedStyle(t).getPropertyValue("-moz-user-select") !== "none"; if (n) { var i = o.getBoundingClientRect(); var r = Math.max(0, (e.pageY - i.top) / i.height); t.style.top = (r * 100).toFixed(2) + "%" } t.classList.add("active") }); o.addEventListener("mouseup", function () { if (a.enhanceTextSelection && a.textLayerRenderTask) { s = setTimeout(function () { if (a.textLayerRenderTask) { a.textLayerRenderTask.expandTextDivs(false) } s = null }, u); return } var e = o.querySelector(".endOfContent"); if (!e) { return } e.style.top = ""; e.classList.remove("active") }) } }]); return l }(); t.TextLayerBuilder = o; var s = function () { function e() { c(this, e) } a(e, [{ key: "createTextLayerBuilder", value: function e(t, n, i) { var r = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false; var a = arguments.length > 4 ? arguments[4] : undefined; return new o({ textLayerDiv: t, pageIndex: n, viewport: i, enhanceTextSelection: r, eventBus: a }) } }]); return e }(); t.DefaultTextLayerFactory = s }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.SecondaryToolbar = void 0; var a = n(5); var o = n(9); var s = n(33); function i(t, e) { var n; if (typeof Symbol === "undefined" || t[Symbol.iterator] == null) { if (Array.isArray(t) || (n = u(t)) || e && t && typeof t.length === "number") { if (n) t = n; var i = 0; var r = function e() { }; return { s: r, n: function e() { if (i >= t.length) return { done: true }; return { done: false, value: t[i++] } }, e: function e(t) { throw t }, f: r } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var a = true, o = false, s; return { s: function e() { n = t[Symbol.iterator]() }, n: function e() { var t = n.next(); a = t.done; return t }, e: function e(t) { o = true; s = t }, f: function e() { try { if (!a && n["return"] != null) n["return"]() } finally { if (o) throw s } } } } function u(e, t) { if (!e) return; if (typeof e === "string") return r(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return r(e, t) } function r(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function l(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function c(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function f(e, t, n) { if (t) c(e.prototype, t); if (n) c(e, n); return e } var d = function () { function r(e, t, n) { var i = this; l(this, r); this.toolbar = e.toolbar; this.toggleButton = e.toggleButton; this.toolbarButtonContainer = e.toolbarButtonContainer; this.buttons = [{ element: e.presentationModeButton, eventName: "presentationmode", close: true }, { element: e.openFileButton, eventName: "openfile", close: true }, { element: e.printButton, eventName: "print", close: true }, { element: e.downloadButton, eventName: "download", close: true }, { element: e.viewBookmarkButton, eventName: null, close: true }, { element: e.firstPageButton, eventName: "firstpage", close: true }, { element: e.lastPageButton, eventName: "lastpage", close: true }, { element: e.pageRotateCwButton, eventName: "rotatecw", close: false }, { element: e.pageRotateCcwButton, eventName: "rotateccw", close: false }, { element: e.cursorSelectToolButton, eventName: "switchcursortool", eventDetails: { tool: o.CursorTool.SELECT }, close: true }, { element: e.cursorHandToolButton, eventName: "switchcursortool", eventDetails: { tool: o.CursorTool.HAND }, close: true }, { element: e.scrollVerticalButton, eventName: "switchscrollmode", eventDetails: { mode: a.ScrollMode.VERTICAL }, close: true }, { element: e.scrollHorizontalButton, eventName: "switchscrollmode", eventDetails: { mode: a.ScrollMode.HORIZONTAL }, close: true }, { element: e.scrollWrappedButton, eventName: "switchscrollmode", eventDetails: { mode: a.ScrollMode.WRAPPED }, close: true }, { element: e.spreadNoneButton, eventName: "switchspreadmode", eventDetails: { mode: a.SpreadMode.NONE }, close: true }, { element: e.spreadOddButton, eventName: "switchspreadmode", eventDetails: { mode: a.SpreadMode.ODD }, close: true }, { element: e.spreadEvenButton, eventName: "switchspreadmode", eventDetails: { mode: a.SpreadMode.EVEN }, close: true }, { element: e.documentPropertiesButton, eventName: "documentproperties", close: true }]; this.items = { firstPage: e.firstPageButton, lastPage: e.lastPageButton, pageRotateCw: e.pageRotateCwButton, pageRotateCcw: e.pageRotateCcwButton }; this.mainContainer = t; this.eventBus = n; this.opened = false; this.containerHeight = null; this.previousContainerHeight = null; this.reset(); this._bindClickListeners(); this._bindCursorToolsListener(e); this._bindScrollModeListener(e); this._bindSpreadModeListener(e); this.eventBus._on("resize", this._setMaxHeight.bind(this)); this.eventBus._on("baseviewerinit", function (e) { if (e.source instanceof s.PDFSinglePageViewer) { i.toolbarButtonContainer.classList.add("hiddenScrollModeButtons", "hiddenSpreadModeButtons") } else { i.toolbarButtonContainer.classList.remove("hiddenScrollModeButtons", "hiddenSpreadModeButtons") } }) } f(r, [{ key: "setPageNumber", value: function e(t) { this.pageNumber = t; this._updateUIState() } }, { key: "setPagesCount", value: function e(t) { this.pagesCount = t; this._updateUIState() } }, { key: "reset", value: function e() { this.pageNumber = 0; this.pagesCount = 0; this._updateUIState(); this.eventBus.dispatch("secondarytoolbarreset", { source: this }) } }, { key: "_updateUIState", value: function e() { this.items.firstPage.disabled = this.pageNumber <= 1; this.items.lastPage.disabled = this.pageNumber >= this.pagesCount; this.items.pageRotateCw.disabled = this.pagesCount === 0; this.items.pageRotateCcw.disabled = this.pagesCount === 0 } }, { key: "_bindClickListeners", value: function e() { var o = this; this.toggleButton.addEventListener("click", this.toggle.bind(this)); var t = i(this.buttons), s; try { var n = function e() { var t = s.value, n = t.element, i = t.eventName, r = t.close, a = t.eventDetails; n.addEventListener("click", function (e) { if (i !== null) { var t = { source: o }; for (var n in a) { t[n] = a[n] } o.eventBus.dispatch(i, t) } if (r) { o.close() } }) }; for (t.s(); !(s = t.n()).done;) { n() } } catch (e) { t.e(e) } finally { t.f() } } }, { key: "_bindCursorToolsListener", value: function e(n) { this.eventBus._on("cursortoolchanged", function (e) { var t = e.tool; n.cursorSelectToolButton.classList.toggle("toggled", t === o.CursorTool.SELECT); n.cursorHandToolButton.classList.toggle("toggled", t === o.CursorTool.HAND) }) } }, { key: "_bindScrollModeListener", value: function e(i) { var t = this; function n(e) { var t = e.mode; i.scrollVerticalButton.classList.toggle("toggled", t === a.ScrollMode.VERTICAL); i.scrollHorizontalButton.classList.toggle("toggled", t === a.ScrollMode.HORIZONTAL); i.scrollWrappedButton.classList.toggle("toggled", t === a.ScrollMode.WRAPPED); var n = t === a.ScrollMode.HORIZONTAL; i.spreadNoneButton.disabled = n; i.spreadOddButton.disabled = n; i.spreadEvenButton.disabled = n } this.eventBus._on("scrollmodechanged", n); this.eventBus._on("secondarytoolbarreset", function (e) { if (e.source === t) { n({ mode: a.ScrollMode.VERTICAL }) } }) } }, { key: "_bindSpreadModeListener", value: function e(n) { var t = this; function i(e) { var t = e.mode; n.spreadNoneButton.classList.toggle("toggled", t === a.SpreadMode.NONE); n.spreadOddButton.classList.toggle("toggled", t === a.SpreadMode.ODD); n.spreadEvenButton.classList.toggle("toggled", t === a.SpreadMode.EVEN) } this.eventBus._on("spreadmodechanged", i); this.eventBus._on("secondarytoolbarreset", function (e) { if (e.source === t) { i({ mode: a.SpreadMode.NONE }) } }) } }, { key: "open", value: function e() { if (this.opened) { return } this.opened = true; this._setMaxHeight(); this.toggleButton.classList.add("toggled"); this.toolbar.classList.remove("hidden") } }, { key: "close", value: function e() { if (!this.opened) { return } this.opened = false; this.toolbar.classList.add("hidden"); this.toggleButton.classList.remove("toggled") } }, { key: "toggle", value: function e() { if (this.opened) { this.close() } else { this.open() } } }, { key: "_setMaxHeight", value: function e() { if (!this.opened) { return } this.containerHeight = this.mainContainer.clientHeight; if (this.containerHeight === this.previousContainerHeight) { return } this.toolbarButtonContainer.style.maxHeight = "".concat(this.containerHeight - a.SCROLLBAR_PADDING, "px"); this.previousContainerHeight = this.containerHeight } }, { key: "isOpen", get: function e() { return this.opened } }]); return r }(); t.SecondaryToolbar = d }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFSinglePageViewer = void 0; var i = n(28); var r = n(8); function a(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { a = function e(t) { return typeof t } } else { a = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return a(e) } function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function s(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function u(e, t, n) { if (t) s(e.prototype, t); if (n) s(e, n); return e } function c(e, t, n) { if (typeof Reflect !== "undefined" && Reflect.get) { c = Reflect.get } else { c = function e(t, n, i) { var r = l(t, n); if (!r) return; var a = Object.getOwnPropertyDescriptor(r, n); if (a.get) { return a.get.call(i) } return a.value } } return c(e, t, n || e) } function l(e, t) { while (!Object.prototype.hasOwnProperty.call(e, t)) { e = m(e); if (e === null) break } return e } function f(e, t) { if (typeof t !== "function" && t !== null) { throw new TypeError("Super expression must either be null or a function") } e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: true, configurable: true } }); if (t) d(e, t) } function d(e, t) { d = Object.setPrototypeOf || function e(t, n) { t.__proto__ = n; return t }; return d(e, t) } function h(r) { var a = g(); return function e() { var t = m(r), n; if (a) { var i = m(this).constructor; n = Reflect.construct(t, arguments, i) } else { n = t.apply(this, arguments) } return p(this, n) } } function p(e, t) { if (t && (a(t) === "object" || typeof t === "function")) { return t } return v(e) } function v(e) { if (e === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called") } return e } function g() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () { })); return true } catch (e) { return false } } function m(e) { m = Object.setPrototypeOf ? Object.getPrototypeOf : function e(t) { return t.__proto__ || Object.getPrototypeOf(t) }; return m(e) } var y = function (e) { f(l, e); var n = h(l); function l(e) { var t; o(this, l); t = n.call(this, e); t.eventBus._on("pagesinit", function (e) { t._ensurePageViewVisible() }); return t } u(l, [{ key: "_resetView", value: function e() { c(m(l.prototype), "_resetView", this).call(this); this._previousPageNumber = 1; this._shadowViewer = document.createDocumentFragment(); this._updateScrollDown = null } }, { key: "_ensurePageViewVisible", value: function e() { var t = this._pages[this._currentPageNumber - 1]; var n = this._pages[this._previousPageNumber - 1]; var i = this.viewer.childNodes; switch (i.length) { case 0: this.viewer.appendChild(t.div); break; case 1: if (i[0] !== n.div) { throw new Error("_ensurePageViewVisible: Unexpected previously visible page.") } if (t === n) { break } this._shadowViewer.appendChild(n.div); this.viewer.appendChild(t.div); this.container.scrollTop = 0; break; default: throw new Error("_ensurePageViewVisible: Only one page should be visible at a time.") }this._previousPageNumber = this._currentPageNumber } }, { key: "_scrollUpdate", value: function e() { if (this._updateScrollDown) { this._updateScrollDown() } c(m(l.prototype), "_scrollUpdate", this).call(this) } }, { key: "_scrollIntoView", value: function e(t) { var n = this; var i = t.pageDiv, r = t.pageSpot, a = r === void 0 ? null : r, o = t.pageNumber, s = o === void 0 ? null : o; if (s) { this._setCurrentPageNumber(s) } var u = this._currentPageNumber >= this._previousPageNumber; this._ensurePageViewVisible(); this.update(); c(m(l.prototype), "_scrollIntoView", this).call(this, { pageDiv: i, pageSpot: a, pageNumber: s }); this._updateScrollDown = function () { n.scroll.down = u; n._updateScrollDown = null } } }, { key: "_getVisiblePages", value: function e() { return this._getCurrentVisiblePage() } }, { key: "_updateHelper", value: function e(t) { } }, { key: "_updateScrollMode", value: function e() { } }, { key: "_updateSpreadMode", value: function e() { } }, { key: "_viewerElement", get: function e() { return (0, r.shadow)(this, "_viewerElement", this._shadowViewer) } }, { key: "_isScrollModeHorizontal", get: function e() { return (0, r.shadow)(this, "_isScrollModeHorizontal", false) } }]); return l }(i.BaseViewer); t.PDFSinglePageViewer = y }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.Toolbar = void 0; var m = i(n(2)); var y = n(5); function i(e) { return e && e.__esModule ? e : { default: e } } function u(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function r(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { u(i, t, n, r, a, "next", e) } function a(e) { u(i, t, n, r, a, "throw", e) } r(undefined) }) } } function b(t, e) { var n; if (typeof Symbol === "undefined" || t[Symbol.iterator] == null) { if (Array.isArray(t) || (n = l(t)) || e && t && typeof t.length === "number") { if (n) t = n; var i = 0; var r = function e() { }; return { s: r, n: function e() { if (i >= t.length) return { done: true }; return { done: false, value: t[i++] } }, e: function e(t) { throw t }, f: r } } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.") } var a = true, o = false, s; return { s: function e() { n = t[Symbol.iterator]() }, n: function e() { var t = n.next(); a = t.done; return t }, e: function e(t) { o = true; s = t }, f: function e() { try { if (!a && n["return"] != null) n["return"]() } finally { if (o) throw s } } } } function l(e, t) { if (!e) return; if (typeof e === "string") return a(e, t); var n = Object.prototype.toString.call(e).slice(8, -1); if (n === "Object" && e.constructor) n = e.constructor.name; if (n === "Map" || n === "Set") return Array.from(e); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return a(e, t) } function a(e, t) { if (t == null || t > e.length) t = e.length; for (var n = 0, i = new Array(t); n < t; n++) { i[n] = e[n] } return i } function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function s(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function c(e, t, n) { if (t) s(e.prototype, t); if (n) s(e, n); return e } var f = "visiblePageIsLoading"; var w = 140; var _ = 162; var d = function () { function i(e, t) { var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : y.NullL10n; o(this, i); this.toolbar = e.container; this.eventBus = t; this.l10n = n; this.buttons = [{ element: e.previous, eventName: "previouspage" }, { element: e.next, eventName: "nextpage" }, { element: e.zoomIn, eventName: "zoomin" }, { element: e.zoomOut, eventName: "zoomout" }, { element: e.openFile, eventName: "openfile" }, { element: e.print, eventName: "print" }, { element: e.presentationModeButton, eventName: "presentationmode" }, { element: e.download, eventName: "download" }, { element: e.viewBookmark, eventName: null }]; this.items = { numPages: e.numPages, pageNumber: e.pageNumber, scaleSelectContainer: e.scaleSelectContainer, scaleSelect: e.scaleSelect, customScaleOption: e.customScaleOption, previous: e.previous, next: e.next, zoomIn: e.zoomIn, zoomOut: e.zoomOut }; this._wasLocalized = false; this.reset(); this._bindListeners() } c(i, [{ key: "setPageNumber", value: function e(t, n) { this.pageNumber = t; this.pageLabel = n; this._updateUIState(false) } }, { key: "setPagesCount", value: function e(t, n) { this.pagesCount = t; this.hasPageLabels = n; this._updateUIState(true) } }, { key: "setPageScale", value: function e(t, n) { this.pageScaleValue = (t || n).toString(); this.pageScale = n; this._updateUIState(false) } }, { key: "reset", value: function e() { this.pageNumber = 0; this.pageLabel = null; this.hasPageLabels = false; this.pagesCount = 0; this.pageScaleValue = y.DEFAULT_SCALE_VALUE; this.pageScale = y.DEFAULT_SCALE; this._updateUIState(true); this.updateLoadingIndicatorState() } }, { key: "_bindListeners", value: function e() { var r = this; var t = this.items, n = t.pageNumber, i = t.scaleSelect; var a = this; var o = b(this.buttons), s; try { var u = function e() { var t = s.value, n = t.element, i = t.eventName; n.addEventListener("click", function (e) { if (i !== null) { r.eventBus.dispatch(i, { source: r }) } }) }; for (o.s(); !(s = o.n()).done;) { u() } } catch (e) { o.e(e) } finally { o.f() } n.addEventListener("click", function () { this.select() }); n.addEventListener("change", function () { a.eventBus.dispatch("pagenumberchanged", { source: a, value: this.value }) }); i.addEventListener("change", function () { if (this.value === "custom") { return } a.eventBus.dispatch("scalechanged", { source: a, value: this.value }) }); i.oncontextmenu = y.noContextMenuHandler; this.eventBus._on("localized", function () { r._wasLocalized = true; r._adjustScaleWidth(); r._updateUIState(true) }) } }, { key: "_updateUIState", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; if (!this._wasLocalized) { return } var n = this.pageNumber, i = this.pagesCount, a = this.pageScaleValue, r = this.pageScale, o = this.items; if (t) { if (this.hasPageLabels) { o.pageNumber.type = "text" } else { o.pageNumber.type = "number"; this.l10n.get("of_pages", { pagesCount: i }, "of {{pagesCount}}").then(function (e) { o.numPages.textContent = e }) } o.pageNumber.max = i } if (this.hasPageLabels) { o.pageNumber.value = this.pageLabel; this.l10n.get("page_of_pages", { pageNumber: n, pagesCount: i }, "({{pageNumber}} of {{pagesCount}})").then(function (e) { o.numPages.textContent = e }) } else { o.pageNumber.value = n } o.previous.disabled = n <= 1; o.next.disabled = n >= i; o.zoomOut.disabled = r <= y.MIN_SCALE; o.zoomIn.disabled = r >= y.MAX_SCALE; var s = Math.round(r * 1e4) / 100; this.l10n.get("page_scale_percent", { scale: s }, "{{scale}}%").then(function (e) { var t = false; var n = b(o.scaleSelect.options), i; try { for (n.s(); !(i = n.n()).done;) { var r = i.value; if (r.value !== a) { r.selected = false; continue } r.selected = true; t = true } } catch (e) { n.e(e) } finally { n.f() } if (!t) { o.customScaleOption.textContent = e; o.customScaleOption.selected = true } }) } }, { key: "updateLoadingIndicatorState", value: function e() { var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false; var n = this.items.pageNumber; n.classList.toggle(f, t) } }, { key: "_adjustScaleWidth", value: function () { var e = r(m["default"].mark(function e() { var n, i, r, a, o, s, u, l, c, f, d, h, p, v, g; return m["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: n = this.items, i = this.l10n; r = Promise.all([i.get("page_scale_auto", null, "Automatic Zoom"), i.get("page_scale_actual", null, "Actual Size"), i.get("page_scale_fit", null, "Page Fit"), i.get("page_scale_width", null, "Page Width")]); a = document.createElement("canvas"); a.mozOpaque = true; o = a.getContext("2d", { alpha: false }); t.next = 7; return y.animationStarted; case 7: s = getComputedStyle(n.scaleSelect), u = s.fontSize, l = s.fontFamily; o.font = "".concat(u, " ").concat(l); c = 0; t.t0 = b; t.next = 13; return r; case 13: t.t1 = t.sent; f = (0, t.t0)(t.t1); try { for (f.s(); !(d = f.n()).done;) { h = d.value; p = o.measureText(h), v = p.width; if (v > c) { c = v } } } catch (e) { f.e(e) } finally { f.f() } g = _ - w; c += 1.5 * g; if (c > w) { n.scaleSelect.style.width = "".concat(c + g, "px"); n.scaleSelectContainer.style.width = "".concat(c, "px") } a.width = 0; a.height = 0; a = o = null; case 22: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }]); return i }(); t.Toolbar = d }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.ViewHistory = void 0; var o = i(n(2)); function i(e) { return e && e.__esModule ? e : { default: e } } function u(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function r(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { u(i, t, n, r, a, "next", e) } function a(e) { u(i, t, n, r, a, "throw", e) } r(undefined) }) } } function a(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function s(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function l(e, t, n) { if (t) s(e.prototype, t); if (n) s(e, n); return e } var c = 20; var f = function () { function n(e) { var o = this; var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : c; a(this, n); this.fingerprint = e; this.cacheSize = t; this._initializedPromise = this._readFromStorage().then(function (e) { var t = JSON.parse(e || "{}"); var n = -1; if (!Array.isArray(t.files)) { t.files = [] } else { while (t.files.length >= o.cacheSize) { t.files.shift() } for (var i = 0, r = t.files.length; i < r; i++) { var a = t.files[i]; if (a.fingerprint === o.fingerprint) { n = i; break } } } if (n === -1) { n = t.files.push({ fingerprint: o.fingerprint }) - 1 } o.file = t.files[n]; o.database = t }) } l(n, [{ key: "_writeToStorage", value: function () { var e = r(o["default"].mark(function e() { var n; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: n = JSON.stringify(this.database); localStorage.setItem("pdfjs.history", n); case 2: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }, { key: "_readFromStorage", value: function () { var e = r(o["default"].mark(function e() { return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: return t.abrupt("return", localStorage.getItem("pdfjs.history")); case 1: case "end": return t.stop() } } }, e) })); function t() { return e.apply(this, arguments) } return t }() }, { key: "set", value: function () { var n = r(o["default"].mark(function e(n, i) { return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: this.file[n] = i; return t.abrupt("return", this._writeToStorage()); case 4: case "end": return t.stop() } } }, e, this) })); function e(e, t) { return n.apply(this, arguments) } return e }() }, { key: "setMultiple", value: function () { var t = r(o["default"].mark(function e(n) { var i; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: for (i in n) { this.file[i] = n[i] } return t.abrupt("return", this._writeToStorage()); case 4: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "get", value: function () { var n = r(o["default"].mark(function e(n, i) { var r; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: r = this.file[n]; return t.abrupt("return", r !== undefined ? r : i); case 4: case "end": return t.stop() } } }, e, this) })); function e(e, t) { return n.apply(this, arguments) } return e }() }, { key: "getMultiple", value: function () { var t = r(o["default"].mark(function e(n) { var i, r, a; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: i = Object.create(null); for (r in n) { a = this.file[r]; i[r] = a !== undefined ? a : n[r] } return t.abrupt("return", i); case 5: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }]); return n }(); t.ViewHistory = f }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.GenericCom = void 0; var i = u(n(2)); var r = n(1); var a = n(37); var o = n(38); var s = n(39); function u(e) { return e && e.__esModule ? e : { default: e } } function l(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { l = function e(t) { return typeof t } } else { l = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return l(e) } function c(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function f(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { c(i, t, n, r, a, "next", e) } function a(e) { c(i, t, n, r, a, "throw", e) } r(undefined) }) } } function d(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function h(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function p(e, t, n) { if (t) h(e.prototype, t); if (n) h(e, n); return e } function v(e, t) { if (typeof t !== "function" && t !== null) { throw new TypeError("Super expression must either be null or a function") } e.prototype = Object.create(t && t.prototype, { constructor: { value: e, writable: true, configurable: true } }); if (t) g(e, t) } function g(e, t) { g = Object.setPrototypeOf || function e(t, n) { t.__proto__ = n; return t }; return g(e, t) } function m(r) { var a = w(); return function e() { var t = _(r), n; if (a) { var i = _(this).constructor; n = Reflect.construct(t, arguments, i) } else { n = t.apply(this, arguments) } return y(this, n) } } function y(e, t) { if (t && (l(t) === "object" || typeof t === "function")) { return t } return b(e) } function b(e) { if (e === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called") } return e } function w() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () { })); return true } catch (e) { return false } } function _(e) { _ = Object.setPrototypeOf ? Object.getPrototypeOf : function e(t) { return t.__proto__ || Object.getPrototypeOf(t) }; return _(e) } var P = {}; t.GenericCom = P; var S = function (e) { v(n, e); var t = m(n); function n() { d(this, n); return t.apply(this, arguments) } p(n, [{ key: "_writeToStorage", value: function () { var t = f(i["default"].mark(function e(n) { return i["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: localStorage.setItem("pdfjs.preferences", JSON.stringify(n)); case 1: case "end": return t.stop() } } }, e) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "_readFromStorage", value: function () { var t = f(i["default"].mark(function e(t) { return i["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: return t.abrupt("return", JSON.parse(localStorage.getItem("pdfjs.preferences"))); case 1: case "end": return t.stop() } } }, e) })); function e(e) { return t.apply(this, arguments) } return e }() }]); return n }(a.BasePreferences); var k = function (e) { v(n, e); var t = m(n); function n() { d(this, n); return t.apply(this, arguments) } p(n, null, [{ key: "createDownloadManager", value: function e(t) { return new o.DownloadManager(t) } }, { key: "createPreferences", value: function e() { return new S } }, { key: "createL10n", value: function e(t) { var n = t.locale, i = n === void 0 ? "en-US" : n; return new s.GenericL10n(i) } }]); return n }(r.DefaultExternalServices); r.PDFViewerApplication.externalServices = k }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.BasePreferences = void 0; var s = r(n(2)); var i = n(6); function r(e) { return e && e.__esModule ? e : { default: e } } function u(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function a(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { u(i, t, n, r, a, "next", e) } function a(e) { u(i, t, n, r, a, "throw", e) } r(undefined) }) } } function l(e) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { l = function e(t) { return typeof t } } else { l = function e(t) { return t && typeof Symbol === "function" && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t } } return l(e) } function o(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function c(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function f(e, t, n) { if (t) c(e.prototype, t); if (n) c(e, n); return e } var d = null; function h() { if (!d) { d = Promise.resolve({ cursorToolOnLoad: 0, defaultZoomValue: "", disablePageLabels: false, enablePermissions: false, enablePrintAutoRotate: false, enableWebGL: false, externalLinkTarget: 0, historyUpdateUrl: false, ignoreDestinationZoom: false, pdfBugEnabled: false, renderer: "canvas", renderInteractiveForms: false, sidebarViewOnLoad: -1, scrollModeOnLoad: -1, spreadModeOnLoad: -1, textLayerMode: 1, useOnlyCssZoom: false, viewOnLoad: 0, disableAutoFetch: false, disableFontFace: false, disableRange: false, disableStream: false }) } return d } var p = function () { function e() { var r = this; o(this, e); if (this.constructor === e) { throw new Error("Cannot initialize BasePreferences.") } this.prefs = null; this._initializedPromise = h().then(function (e) { Object.defineProperty(r, "defaults", { value: Object.freeze(e), writable: false, enumerable: true, configurable: false }); r.prefs = Object.assign(Object.create(null), e); return r._readFromStorage(e) }).then(function (e) { if (!e) { return } for (var t in e) { var n = r.defaults[t], i = e[t]; if (n === undefined || l(i) !== l(n)) { continue } r.prefs[t] = i } }) } f(e, [{ key: "_writeToStorage", value: function () { var t = a(s["default"].mark(function e(t) { return s["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: throw new Error("Not implemented: _writeToStorage"); case 1: case "end": return t.stop() } } }, e) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "_readFromStorage", value: function () { var t = a(s["default"].mark(function e(t) { return s["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: throw new Error("Not implemented: _readFromStorage"); case 1: case "end": return t.stop() } } }, e) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "reset", value: function () { var e = a(s["default"].mark(function e() { return s["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: this.prefs = Object.assign(Object.create(null), this.defaults); return t.abrupt("return", this._writeToStorage(this.defaults)); case 4: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }, { key: "set", value: function () { var n = a(s["default"].mark(function e(n, i) { var r, a, o; return s["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: r = this.defaults[n]; if (!(r === undefined)) { t.next = 7; break } throw new Error('Set preference: "'.concat(n, '" is undefined.')); case 7: if (!(i === undefined)) { t.next = 9; break } throw new Error("Set preference: no value is specified."); case 9: a = l(i); o = l(r); if (!(a !== o)) { t.next = 19; break } if (!(a === "number" && o === "string")) { t.next = 16; break } i = i.toString(); t.next = 17; break; case 16: throw new Error('Set preference: "'.concat(i, '" is a ').concat(a, ", ") + "expected a ".concat(o, ".")); case 17: t.next = 21; break; case 19: if (!(a === "number" && !Number.isInteger(i))) { t.next = 21; break } throw new Error('Set preference: "'.concat(i, '" must be an integer.')); case 21: this.prefs[n] = i; return t.abrupt("return", this._writeToStorage(this.prefs)); case 23: case "end": return t.stop() } } }, e, this) })); function e(e, t) { return n.apply(this, arguments) } return e }() }, { key: "get", value: function () { var t = a(s["default"].mark(function e(n) { var i, r; return s["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: i = this.defaults[n]; if (!(i === undefined)) { t.next = 7; break } throw new Error('Get preference: "'.concat(n, '" is undefined.')); case 7: r = this.prefs[n]; if (!(r !== undefined)) { t.next = 10; break } return t.abrupt("return", r); case 10: return t.abrupt("return", i); case 11: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }, { key: "getAll", value: function () { var e = a(s["default"].mark(function e() { return s["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._initializedPromise; case 2: return t.abrupt("return", Object.assign(Object.create(null), this.defaults, this.prefs)); case 3: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }]); return e }(); t.BasePreferences = p }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.DownloadManager = void 0; var a = n(8); var i = n(7); function r(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function o(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function s(e, t, n) { if (t) o(e.prototype, t); if (n) o(e, n); return e } var u = i.viewerCompatibilityParams.disableCreateObjectURL || false; function l(e, t) { var n = document.createElement("a"); if (!n.click) { throw new Error('DownloadManager: "a.click()" is not supported.') } n.href = e; n.target = "_parent"; if ("download" in n) { n.download = t } (document.body || document.documentElement).appendChild(n); n.click(); n.remove() } var c = function () { function i(e) { var t = e.disableCreateObjectURL, n = t === void 0 ? u : t; r(this, i); this.disableCreateObjectURL = n } s(i, [{ key: "downloadUrl", value: function e(t, n) { if (!(0, a.createValidAbsoluteUrl)(t, "http://example.com")) { return } l(t + "#pdfjs.action=download", n) } }, { key: "downloadData", value: function e(t, n, i) { if (navigator.msSaveBlob) { navigator.msSaveBlob(new Blob([t], { type: i }), n); return } var r = (0, a.createObjectURL)(t, i, this.disableCreateObjectURL); l(r, n) } }, { key: "download", value: function e(t, n, i) { if (navigator.msSaveBlob) { if (!navigator.msSaveBlob(t, i)) { this.downloadUrl(n, i) } return } if (this.disableCreateObjectURL) { this.downloadUrl(n, i); return } var r = URL.createObjectURL(t); l(r, i) } }]); return i }(); t.DownloadManager = c }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.GenericL10n = void 0; var o = i(n(2)); n(40); function i(e) { return e && e.__esModule ? e : { default: e } } function u(e, t, n, i, r, a, o) { try { var s = e[a](o); var u = s.value } catch (e) { n(e); return } if (s.done) { t(u) } else { Promise.resolve(u).then(i, r) } } function r(s) { return function () { var e = this, o = arguments; return new Promise(function (t, n) { var i = s.apply(e, o); function r(e) { u(i, t, n, r, a, "next", e) } function a(e) { u(i, t, n, r, a, "throw", e) } r(undefined) }) } } function a(e, t) { if (!(e instanceof t)) { throw new TypeError("Cannot call a class as a function") } } function s(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || false; i.configurable = true; if ("value" in i) i.writable = true; Object.defineProperty(e, i.key, i) } } function l(e, t, n) { if (t) s(e.prototype, t); if (n) s(e, n); return e } var c = document.webL10n; var f = function () { function e(n) { a(this, e); this._lang = n; this._ready = new Promise(function (e, t) { c.setLanguage(n, function () { e(c) }) }) } l(e, [{ key: "getLanguage", value: function () { var e = r(o["default"].mark(function e() { var n; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._ready; case 2: n = t.sent; return t.abrupt("return", n.getLanguage()); case 4: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }, { key: "getDirection", value: function () { var e = r(o["default"].mark(function e() { var n; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._ready; case 2: n = t.sent; return t.abrupt("return", n.getDirection()); case 4: case "end": return t.stop() } } }, e, this) })); function t() { return e.apply(this, arguments) } return t }() }, { key: "get", value: function () { var i = r(o["default"].mark(function e(n, i, r) { var a; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._ready; case 2: a = t.sent; return t.abrupt("return", a.get(n, i, r)); case 4: case "end": return t.stop() } } }, e, this) })); function e(e, t, n) { return i.apply(this, arguments) } return e }() }, { key: "translate", value: function () { var t = r(o["default"].mark(function e(n) { var i; return o["default"].wrap(function e(t) { while (1) { switch (t.prev = t.next) { case 0: t.next = 2; return this._ready; case 2: i = t.sent; return t.abrupt("return", i.translate(n)); case 4: case "end": return t.stop() } } }, e, this) })); function e(e) { return t.apply(this, arguments) } return e }() }]); return e }(); t.GenericL10n = f }, function (e, t, n) { "use strict"; document.webL10n = function (n, l, e) { var d = {}; var i = ""; var c = "textContent"; var h = ""; var f = {}; var p = "loading"; var r = true; function v() { return l.querySelectorAll('link[type="application/l10n"]') } function g() { var e = l.querySelector('script[type="application/l10n"]'); return e ? JSON.parse(e.innerHTML) : null } function a(e) { return e ? e.querySelectorAll("*[data-l10n-id]") : [] } function m(e) { if (!e) return {}; var t = e.getAttribute("data-l10n-id"); var n = e.getAttribute("data-l10n-args"); var i = {}; if (n) { try { i = JSON.parse(n) } catch (e) { console.warn("could not parse arguments for #" + t) } } return { id: t, args: i } } function o(e, t, n) { t = t || function e(t) { }; n = n || function e() { }; var i = new XMLHttpRequest; i.open("GET", e, r); if (i.overrideMimeType) { i.overrideMimeType("text/plain; charset=utf-8") } i.onreadystatechange = function () { if (i.readyState == 4) { if (i.status == 200 || i.status === 0) { t(i.responseText) } else { n() } } }; i.onerror = n; i.ontimeout = n; try { i.send(null) } catch (e) { n() } } function y(e, m, a, t) { var y = e.replace(/[^\/]*$/, "") || "./"; function b(e) { if (e.lastIndexOf("\\") < 0) return e; return e.replace(/\\\\/g, "\\").replace(/\\n/g, "\n").replace(/\\r/g, "\r").replace(/\\t/g, "\t").replace(/\\b/g, "\b").replace(/\\f/g, "\f").replace(/\\{/g, "{").replace(/\\}/g, "}").replace(/\\"/g, '"').replace(/\\'/g, "'") } function n(e, t) { var c = {}; var f = /^\s*|\s*$/; var d = /^\s*#|^\s*$/; var h = /^\s*\[(.*)\]\s*$/; var p = /^\s*@import\s+url\((.*)\)\s*$/i; var v = /^([^=\s]*)\s*=\s*(.+)$/; function n(e, n, i) { var r = e.replace(f, "").split(/[\r\n]+/); var a = "*"; var o = m.split("-", 1)[0]; var s = false; var u = ""; function l() { while (true) { if (!r.length) { i(); return } var e = r.shift(); if (d.test(e)) continue; if (n) { u = h.exec(e); if (u) { a = u[1].toLowerCase(); s = a !== "*" && a !== m && a !== o; continue } else if (s) { continue } u = p.exec(e); if (u) { g(y + u[1], l); return } } var t = e.match(v); if (t && t.length == 3) { c[t[1]] = b(t[2]) } } } l() } function g(e, t) { o(e, function (e) { n(e, false, t) }, function () { console.warn(e + " not found."); t() }) } n(e, true, function () { t(c) }) } o(e, function (e) { i += e; n(e, function (e) { for (var t in e) { var n, i, r = t.lastIndexOf("."); if (r > 0) { n = t.substring(0, r); i = t.substring(r + 1) } else { n = t; i = c } if (!d[n]) { d[n] = {} } d[n][i] = e[t] } if (a) { a() } }) }, t) } function s(e, t) { if (e) { e = e.toLowerCase() } t = t || function e() { }; b(); h = e; var n = v(); var i = n.length; if (i === 0) { var r = g(); if (r && r.locales && r.default_locale) { d = r.locales[e]; if (!d) { var a = r.default_locale.toLowerCase(); for (var o in r.locales) { o = o.toLowerCase(); if (o === e) { d = r.locales[e]; break } else if (o === a) { d = r.locales[a] } } } t() } else { } p = "complete"; return } var s = null; var u = 0; s = function e() { u++; if (u >= i) { t(); p = "complete" } }; function l(e) { var n = e.href; this.load = function (e, t) { y(n, e, t, function () { console.warn(n + " not found."); console.warn('"' + e + '" resource not found'); h = ""; t() }) } } for (var c = 0; c < i; c++) { var f = new l(n[c]); f.load(e, s) } } function b() { d = {}; i = ""; h = "" } function u(e) { var t = { af: 3, ak: 4, am: 4, ar: 1, asa: 3, az: 0, be: 11, bem: 3, bez: 3, bg: 3, bh: 4, bm: 0, bn: 3, bo: 0, br: 20, brx: 3, bs: 11, ca: 3, cgg: 3, chr: 3, cs: 12, cy: 17, da: 3, de: 3, dv: 3, dz: 0, ee: 3, el: 3, en: 3, eo: 3, es: 3, et: 3, eu: 3, fa: 0, ff: 5, fi: 3, fil: 4, fo: 3, fr: 5, fur: 3, fy: 3, ga: 8, gd: 24, gl: 3, gsw: 3, gu: 3, guw: 4, gv: 23, ha: 3, haw: 3, he: 2, hi: 4, hr: 11, hu: 0, id: 0, ig: 0, ii: 0, is: 3, it: 3, iu: 7, ja: 0, jmc: 3, jv: 0, ka: 0, kab: 5, kaj: 3, kcg: 3, kde: 0, kea: 0, kk: 3, kl: 3, km: 0, kn: 0, ko: 0, ksb: 3, ksh: 21, ku: 3, kw: 7, lag: 18, lb: 3, lg: 3, ln: 4, lo: 0, lt: 10, lv: 6, mas: 3, mg: 4, mk: 16, ml: 3, mn: 3, mo: 9, mr: 3, ms: 0, mt: 15, my: 0, nah: 3, naq: 7, nb: 3, nd: 3, ne: 3, nl: 3, nn: 3, no: 3, nr: 3, nso: 4, ny: 3, nyn: 3, om: 3, or: 3, pa: 3, pap: 3, pl: 13, ps: 3, pt: 3, rm: 3, ro: 9, rof: 3, ru: 11, rwk: 3, sah: 0, saq: 3, se: 7, seh: 3, ses: 0, sg: 0, sh: 11, shi: 19, sk: 12, sl: 14, sma: 7, smi: 7, smj: 7, smn: 7, sms: 7, sn: 3, so: 3, sq: 3, sr: 11, ss: 3, ssy: 3, st: 3, sv: 3, sw: 3, syr: 3, ta: 3, te: 3, teo: 3, th: 0, ti: 4, tig: 3, tk: 3, tl: 4, tn: 3, to: 0, tr: 0, ts: 3, tzm: 22, uk: 11, ur: 3, ve: 3, vi: 0, vun: 3, wa: 4, wae: 3, wo: 0, xh: 3, xog: 3, yo: 0, zh: 0, zu: 3 }; function n(e, t) { return t.indexOf(e) !== -1 } function i(e, t, n) { return t <= e && e <= n } var r = { 0: function e(t) { return "other" }, 1: function e(t) { if (i(t % 100, 3, 10)) return "few"; if (t === 0) return "zero"; if (i(t % 100, 11, 99)) return "many"; if (t == 2) return "two"; if (t == 1) return "one"; return "other" }, 2: function e(t) { if (t !== 0 && t % 10 === 0) return "many"; if (t == 2) return "two"; if (t == 1) return "one"; return "other" }, 3: function e(t) { if (t == 1) return "one"; return "other" }, 4: function e(t) { if (i(t, 0, 1)) return "one"; return "other" }, 5: function e(t) { if (i(t, 0, 2) && t != 2) return "one"; return "other" }, 6: function e(t) { if (t === 0) return "zero"; if (t % 10 == 1 && t % 100 != 11) return "one"; return "other" }, 7: function e(t) { if (t == 2) return "two"; if (t == 1) return "one"; return "other" }, 8: function e(t) { if (i(t, 3, 6)) return "few"; if (i(t, 7, 10)) return "many"; if (t == 2) return "two"; if (t == 1) return "one"; return "other" }, 9: function e(t) { if (t === 0 || t != 1 && i(t % 100, 1, 19)) return "few"; if (t == 1) return "one"; return "other" }, 10: function e(t) { if (i(t % 10, 2, 9) && !i(t % 100, 11, 19)) return "few"; if (t % 10 == 1 && !i(t % 100, 11, 19)) return "one"; return "other" }, 11: function e(t) { if (i(t % 10, 2, 4) && !i(t % 100, 12, 14)) return "few"; if (t % 10 === 0 || i(t % 10, 5, 9) || i(t % 100, 11, 14)) return "many"; if (t % 10 == 1 && t % 100 != 11) return "one"; return "other" }, 12: function e(t) { if (i(t, 2, 4)) return "few"; if (t == 1) return "one"; return "other" }, 13: function e(t) { if (i(t % 10, 2, 4) && !i(t % 100, 12, 14)) return "few"; if (t != 1 && i(t % 10, 0, 1) || i(t % 10, 5, 9) || i(t % 100, 12, 14)) return "many"; if (t == 1) return "one"; return "other" }, 14: function e(t) { if (i(t % 100, 3, 4)) return "few"; if (t % 100 == 2) return "two"; if (t % 100 == 1) return "one"; return "other" }, 15: function e(t) { if (t === 0 || i(t % 100, 2, 10)) return "few"; if (i(t % 100, 11, 19)) return "many"; if (t == 1) return "one"; return "other" }, 16: function e(t) { if (t % 10 == 1 && t != 11) return "one"; return "other" }, 17: function e(t) { if (t == 3) return "few"; if (t === 0) return "zero"; if (t == 6) return "many"; if (t == 2) return "two"; if (t == 1) return "one"; return "other" }, 18: function e(t) { if (t === 0) return "zero"; if (i(t, 0, 2) && t !== 0 && t != 2) return "one"; return "other" }, 19: function e(t) { if (i(t, 2, 10)) return "few"; if (i(t, 0, 1)) return "one"; return "other" }, 20: function e(t) { if ((i(t % 10, 3, 4) || t % 10 == 9) && !(i(t % 100, 10, 19) || i(t % 100, 70, 79) || i(t % 100, 90, 99))) return "few"; if (t % 1e6 === 0 && t !== 0) return "many"; if (t % 10 == 2 && !n(t % 100, [12, 72, 92])) return "two"; if (t % 10 == 1 && !n(t % 100, [11, 71, 91])) return "one"; return "other" }, 21: function e(t) { if (t === 0) return "zero"; if (t == 1) return "one"; return "other" }, 22: function e(t) { if (i(t, 0, 1) || i(t, 11, 99)) return "one"; return "other" }, 23: function e(t) { if (i(t % 10, 1, 2) || t % 20 === 0) return "one"; return "other" }, 24: function e(t) { if (i(t, 3, 10) || i(t, 13, 19)) return "few"; if (n(t, [2, 12])) return "two"; if (n(t, [1, 11])) return "one"; return "other" } }; var a = t[e.replace(/-.*$/, "")]; if (!(a in r)) { console.warn("plural form unknown for [" + e + "]"); return function () { return "other" } } return r[a] } f.plural = function (e, t, n, i) { var r = parseFloat(t); if (isNaN(r)) return e; if (i != c) return e; if (!f._pluralRules) { f._pluralRules = u(h) } var a = "[" + f._pluralRules(r) + "]"; if (r === 0 && n + "[zero]" in d) { e = d[n + "[zero]"][i] } else if (r == 1 && n + "[one]" in d) { e = d[n + "[one]"][i] } else if (r == 2 && n + "[two]" in d) { e = d[n + "[two]"][i] } else if (n + a in d) { e = d[n + a][i] } else if (n + "[other]" in d) { e = d[n + "[other]"][i] } return e }; function w(e, t, n) { var i = d[e]; if (!i) { console.warn("#" + e + " is undefined."); if (!n) { return null } i = n } var r = {}; for (var a in i) { var o = i[a]; o = _(o, t, e, a); o = P(o, t, e); r[a] = o } return r } function _(e, t, n, i) { var r = /\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/; var a = r.exec(e); if (!a || !a.length) return e; var o = a[1]; var s = a[2]; var u; if (t && s in t) { u = t[s] } else if (s in d) { u = d[s] } if (o in f) { var l = f[o]; e = l(e, u, n, i) } return e } function P(e, n, i) { var t = /\{\{\s*(.+?)\s*\}\}/g; return e.replace(t, function (e, t) { if (n && t in n) { return n[t] } if (t in d) { return d[t] } return e }) } function S(e) { var t = m(e); if (!t.id) return; var n = w(t.id, t.args); if (!n) { console.warn("#" + t.id + " is undefined."); return } if (n[c]) { if (k(e) === 0) { e[c] = n[c] } else { var i = e.childNodes; var r = false; for (var a = 0, o = i.length; a < o; a++) { if (i[a].nodeType === 3 && /\S/.test(i[a].nodeValue)) { if (r) { i[a].nodeValue = "" } else { i[a].nodeValue = n[c]; r = true } } } if (!r) { var s = l.createTextNode(n[c]); e.insertBefore(s, e.firstChild) } } delete n[c] } for (var u in n) { e[u] = n[u] } } function k(e) { if (e.children) { return e.children.length } if (typeof e.childElementCount !== "undefined") { return e.childElementCount } var t = 0; for (var n = 0; n < e.childNodes.length; n++) { t += e.nodeType === 1 ? 1 : 0 } return t } function t(e) { e = e || l.documentElement; var t = a(e); var n = t.length; for (var i = 0; i < n; i++) { S(t[i]) } S(e) } return { get: function e(t, n, i) { var r = t.lastIndexOf("."); var a = c; if (r > 0) { a = t.substring(r + 1); t = t.substring(0, r) } var o; if (i) { o = {}; o[a] = i } var s = w(t, n, o); if (s && a in s) { return s[a] } return "{{" + t + "}}" }, getData: function e() { return d }, getText: function e() { return i }, getLanguage: function e() { return h }, setLanguage: function e(t, n) { s(t, function () { if (n) n() }) }, getDirection: function e() { var t = ["ar", "he", "fa", "ps", "ur"]; var n = h.split("-", 1)[0]; return t.indexOf(n) >= 0 ? "rtl" : "ltr" }, translate: t, getReadyState: function e() { return p }, ready: function e(t) { if (!t) { return } else if (p == "complete" || p == "interactive") { n.setTimeout(function () { t() }) } else if (l.addEventListener) { l.addEventListener("localized", function e() { l.removeEventListener("localized", e); t() }) } } } }(window, document) }, function (e, t, n) { "use strict"; Object.defineProperty(t, "__esModule", { value: true }); t.PDFPrintService = a; var c = n(5); var i = n(1); var f = n(6); var d = null; var r = null; function o(e, t, n, i) { var r = d.scratchCanvas; var a = f.AppOptions.get("printResolution") || 150; var o = a / 72; r.width = Math.floor(i.width * o); r.height = Math.floor(i.height * o); var s = Math.floor(i.width * c.CSS_UNITS) + "px"; var u = Math.floor(i.height * c.CSS_UNITS) + "px"; var l = r.getContext("2d"); l.save(); l.fillStyle = "rgb(255, 255, 255)"; l.fillRect(0, 0, r.width, r.height); l.restore(); return t.getPage(n).then(function (e) { var t = { canvasContext: l, transform: [o, 0, 0, o, 0, 0], viewport: e.getViewport({ scale: 1, rotation: i.rotation }), intent: "print" }; return e.render(t).promise }).then(function () { return { width: s, height: u } }) } function a(e, t, n, i) { this.pdfDocument = e; this.pagesOverview = t; this.printContainer = n; this.l10n = i || c.NullL10n; this.disableCreateObjectURL = f.AppOptions.get("disableCreateObjectURL"); this.currentPage = -1; this.scratchCanvas = document.createElement("canvas") } a.prototype = { layout: function e() { this.throwIfInactive(); var t = document.querySelector("body"); t.setAttribute("data-pdfjsprinting", true); var n = this.pagesOverview.every(function (e) { return e.width === this.pagesOverview[0].width && e.height === this.pagesOverview[0].height }, this); if (!n) { console.warn("Not all pages have the same size. The printed result may be incorrect!") } this.pageStyleSheet = document.createElement("style"); var i = this.pagesOverview[0]; this.pageStyleSheet.textContent = "@supports ((size:A4) and (size:1pt 1pt)) {@page { size: " + i.width + "pt " + i.height + "pt;}}"; t.appendChild(this.pageStyleSheet) }, destroy: function e() { if (d !== this) { return } this.printContainer.textContent = ""; var t = document.querySelector("body"); t.removeAttribute("data-pdfjsprinting"); if (this.pageStyleSheet) { this.pageStyleSheet.remove(); this.pageStyleSheet = null } this.scratchCanvas.width = this.scratchCanvas.height = 0; this.scratchCanvas = null; d = null; g().then(function () { if (r.active !== "printServiceOverlay") { return } r.close("printServiceOverlay") }) }, renderPages: function e() { var r = this; var a = this.pagesOverview.length; var t = function e(t, n) { r.throwIfInactive(); if (++r.currentPage >= a) { h(a, a, r.l10n); t(); return } var i = r.currentPage; h(i, a, r.l10n); o(r, r.pdfDocument, i + 1, r.pagesOverview[i]).then(r.useRenderedPage.bind(r)).then(function () { e(t, n) }, n) }; return new Promise(t) }, useRenderedPage: function e(t) { this.throwIfInactive(); var n = document.createElement("img"); n.style.width = t.width; n.style.height = t.height; var i = this.scratchCanvas; if ("toBlob" in i && !this.disableCreateObjectURL) { i.toBlob(function (e) { n.src = URL.createObjectURL(e) }) } else { n.src = i.toDataURL() } var r = document.createElement("div"); r.appendChild(n); this.printContainer.appendChild(r); return new Promise(function (e, t) { n.onload = e; n.onerror = t }) }, performPrint: function e() { var t = this; this.throwIfInactive(); return new Promise(function (e) { setTimeout(function () { if (!t.active) { e(); return } s.call(window); setTimeout(e, 20) }, 0) }) }, get active() { return this === d }, throwIfInactive: function e() { if (!this.active) { throw new Error("This print request was cancelled or completed.") } } }; var s = window.print; window.print = function () { if (d) { console.warn("Ignored window.print() because of a pending print job."); return } g().then(function () { if (d) { r.open("printServiceOverlay") } }); try { u("beforeprint") } finally { if (!d) { console.error("Expected print service to be initialized."); g().then(function () { if (r.active === "printServiceOverlay") { r.close("printServiceOverlay") } }); return } var e = d; d.renderPages().then(function () { return e.performPrint() })["catch"](function () { }).then(function () { if (e.active) { l() } }) } }; function u(e) { var t = document.createEvent("CustomEvent"); t.initCustomEvent(e, false, false, "custom"); window.dispatchEvent(t) } function l() { if (d) { d.destroy(); u("afterprint") } } function h(e, t, n) { var i = document.getElementById("printServiceOverlay"); var r = Math.round(100 * e / t); var a = i.querySelector("progress"); var o = i.querySelector(".relative-progress"); a.value = r; n.get("print_progress_percent", { progress: r }, r + "%").then(function (e) { o.textContent = e }) } window.addEventListener("keydown", function (e) { if (e.keyCode === 80 && (e.ctrlKey || e.metaKey) && !e.altKey && (!e.shiftKey || window.chrome || window.opera)) { window.print(); e.preventDefault(); if (e.stopImmediatePropagation) { e.stopImmediatePropagation() } else { e.stopPropagation() } } }, true); if ("onbeforeprint" in window) { var p = function e(t) { if (t.detail !== "custom" && t.stopImmediatePropagation) { t.stopImmediatePropagation() } }; window.addEventListener("beforeprint", p); window.addEventListener("afterprint", p) } var v; function g() { if (!v) { r = i.PDFViewerApplication.overlayManager; if (!r) { throw new Error("The overlay manager has not yet been initialized.") } v = r.register("printServiceOverlay", document.getElementById("printServiceOverlay"), l, true); document.getElementById("printCancel").onclick = l } return v } i.PDFPrintServiceFactory.instance = { supportsPrinting: true, createPrintService: function e(t, n, i, r) { if (d) { throw new Error("The print service is created and active.") } d = new a(t, n, i, r); return d } } }]);